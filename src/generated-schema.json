{
  "openapi": "3.0.0",
  "security": [
    {
      "groupAuthz": []
    }
  ],
  "info": {
    "title": "The otomi-stack API",
    "description": "Holds the entire schema needed by console to autogenerate forms",
    "version": "0.0.0-PLACEHOLDER"
  },
  "externalDocs": {
    "description": "This is the base url of the external documentation",
    "url": "https://otomi.io/"
  },
  "x-responses": {
    "BadRequest": {
      "description": "Bad Request",
      "content": {
        "application/json": {
          "schema": {
            "x-acl": [],
            "properties": {
              "status": {
                "type": "integer"
              },
              "errors": {
                "type": "array",
                "items": {
                  "x-acl": [],
                  "properties": {
                    "path": {
                      "type": "string"
                    },
                    "errorCode": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    },
                    "location": {
                      "type": "string",
                      "enum": ["body", "path"]
                    }
                  },
                  "type": "object"
                }
              }
            },
            "type": "object"
          }
        }
      }
    },
    "OtomiStackError": {
      "description": "Resource already exists",
      "content": {
        "application/json": {
          "schema": {
            "x-acl": [],
            "properties": {
              "message": {
                "type": "string"
              }
            },
            "type": "object"
          }
        }
      }
    },
    "NotFound": {
      "description": "Resource does not exist",
      "content": {
        "application/json": {
          "schema": {
            "x-acl": [],
            "properties": {
              "message": {
                "type": "string"
              }
            },
            "type": "object"
          }
        }
      }
    }
  },
  "x-post-responses": {
    "400": {
      "description": "Bad Request",
      "content": {
        "application/json": {
          "schema": {
            "x-acl": [],
            "properties": {
              "status": {
                "type": "integer"
              },
              "errors": {
                "type": "array",
                "items": {
                  "x-acl": [],
                  "properties": {
                    "path": {
                      "type": "string"
                    },
                    "errorCode": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    },
                    "location": {
                      "type": "string",
                      "enum": ["body", "path"]
                    }
                  },
                  "type": "object"
                }
              }
            },
            "type": "object"
          }
        }
      }
    },
    "409": {
      "description": "Resource already exists",
      "content": {
        "application/json": {
          "schema": {
            "x-acl": [],
            "properties": {
              "message": {
                "type": "string"
              }
            },
            "type": "object"
          }
        }
      }
    }
  },
  "x-get-responses": {
    "400": {
      "description": "Bad Request",
      "content": {
        "application/json": {
          "schema": {
            "x-acl": [],
            "properties": {
              "status": {
                "type": "integer"
              },
              "errors": {
                "type": "array",
                "items": {
                  "x-acl": [],
                  "properties": {
                    "path": {
                      "type": "string"
                    },
                    "errorCode": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    },
                    "location": {
                      "type": "string",
                      "enum": ["body", "path"]
                    }
                  },
                  "type": "object"
                }
              }
            },
            "type": "object"
          }
        }
      }
    },
    "404": {
      "description": "Resource does not exist",
      "content": {
        "application/json": {
          "schema": {
            "x-acl": [],
            "properties": {
              "message": {
                "type": "string"
              }
            },
            "type": "object"
          }
        }
      }
    }
  },
  "paths": {
    "/clusters": {
      "get": {
        "operationId": "getClusters",
        "description": "Get available clusters",
        "x-aclSchema": "Cluster",
        "responses": {
          "200": {
            "description": "Successfully obtained cluster collection",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "properties": {
                      "apiName": {
                        "description": "Only used for API/UI to show in app.",
                        "type": "string",
                        "readOnly": true
                      },
                      "apiServer": {
                        "description": "Used by kubectl for local deployment to target cluster.",
                        "type": "string",
                        "readOnly": true
                      },
                      "entrypoint": {
                        "description": "A Kubernetes API public IP address (onprem only).",
                        "type": "string",
                        "readOnly": true
                      },
                      "k8sVersion": {
                        "readOnly": true,
                        "default": "1.19",
                        "description": "The cluster k8s version. Otomi supports 2 minor versions backwards compatibility from the suggested default.",
                        "enum": ["1.17", "1.18", "1.19"],
                        "type": "string"
                      },
                      "name": {
                        "type": "string",
                        "readOnly": true
                      },
                      "otomiVersion": {
                        "default": "latest",
                        "description": "Please pin this a valid release version found in the repo. Suggestion: try the most recent stable version.",
                        "type": "string"
                      },
                      "provider": {
                        "type": "string",
                        "enum": ["aws", "azure", "google", "oneprem"],
                        "readOnly": true
                      },
                      "region": {
                        "description": "Dependent on provider.",
                        "type": "string",
                        "readOnly": true
                      },
                      "vpcID": {
                        "description": "AWS only. If provided will override autodiscovery from metadata.",
                        "type": "string",
                        "readOnly": true
                      }
                    },
                    "required": ["otomiVersion"],
                    "type": "object"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/secrets": {
      "get": {
        "operationId": "getAllSecrets",
        "description": "Get all secrets",
        "x-aclSchema": "Secret",
        "responses": {
          "200": {
            "description": "Successfully obtained all secrets",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "x-acl": {
                      "admin": ["read-any", "create-any", "update-any", "delete-any"],
                      "team": ["read", "create", "update", "delete"]
                    },
                    "properties": {
                      "id": {
                        "readOnly": true,
                        "type": "string"
                      },
                      "name": {
                        "type": "string",
                        "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$",
                        "title": "Name",
                        "description": "A secret name",
                        "example": "secret01"
                      }
                    },
                    "required": ["name"],
                    "oneOf": [
                      {
                        "title": "Generic",
                        "properties": {
                          "type": {
                            "default": "generic",
                            "enum": ["generic"]
                          },
                          "entries": {
                            "type": "array",
                            "items": {
                              "description": "A property name at vaultPath",
                              "minItems": 1,
                              "pattern": "^[a-zA-Z0-9_]*$",
                              "type": "string",
                              "uniqueItems": true
                            }
                          }
                        },
                        "required": ["type", "entries"],
                        "type": "object"
                      },
                      {
                        "title": "Docker registry",
                        "properties": {
                          "type": {
                            "default": "docker-registry",
                            "enum": ["docker-registry"],
                            "type": "string"
                          },
                          "dockerconfig": {
                            "type": "string",
                            "enum": [".dockerconfig.json"],
                            "default": ".dockerconfig.json",
                            "readOnly": true
                          }
                        },
                        "required": ["type"],
                        "type": "object"
                      },
                      {
                        "title": "TLS",
                        "properties": {
                          "type": {
                            "default": "tls",
                            "enum": ["tls"],
                            "type": "string"
                          },
                          "crt": {
                            "type": "string",
                            "default": "tls.crt",
                            "description": "A Vault property name that contains PEM public key certificate"
                          },
                          "key": {
                            "type": "string",
                            "default": "tls.key",
                            "description": "A Vault property name that contains PEM private key certificate"
                          },
                          "ca": {
                            "type": "string",
                            "title": "CA",
                            "description": "A Vault property name that contains CA certificate content"
                          }
                        },
                        "required": ["type", "crt", "key"],
                        "type": "object"
                      }
                    ],
                    "type": "object"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/services": {
      "get": {
        "operationId": "getAllServices",
        "description": "Get all services running on the cluster",
        "x-aclSchema": "Service",
        "responses": {
          "200": {
            "description": "Successfully obtained all services",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "x-acl": {
                      "admin": ["delete-any", "read-any", "create-any", "update-any"],
                      "team": ["delete", "read", "create", "update"]
                    },
                    "x-externalDocsPath": "docs/configuring-services",
                    "properties": {
                      "enabled": {
                        "default": true,
                        "type": "boolean"
                      },
                      "id": {
                        "readOnly": true,
                        "type": "string"
                      },
                      "name": {
                        "type": "string",
                        "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                        "title": "Name",
                        "description": "A service name",
                        "example": "some-service"
                      },
                      "port": {
                        "description": "A service port",
                        "type": "integer",
                        "default": 80,
                        "minimum": 1,
                        "maximum": 65535
                      },
                      "ksvc": {
                        "oneOf": [
                          {
                            "nullable": true,
                            "properties": {
                              "annotations": {
                                "title": "Pod annotations",
                                "description": "Kubernetes annotations with arbitrary metadata",
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "name": {
                                      "type": "string",
                                      "pattern": "^((.){1,253}\\/)?(.){1,63}$"
                                    },
                                    "value": {
                                      "type": "string",
                                      "maxLength": 32767
                                    }
                                  }
                                }
                              },
                              "autoCD": {
                                "description": "Deploys new images based on a tagging strategy",
                                "oneOf": [
                                  {
                                    "additionalProperties": false,
                                    "nullable": true,
                                    "title": "Off",
                                    "type": "object"
                                  },
                                  {
                                    "nullable": true,
                                    "properties": {
                                      "semver": {
                                        "description": "Use this filter if your image tags follow semantic versioning rules (MAJOR.MINOR.PATCH). E.g.: PATCH only: \"~1.1\", MINOR and PATCH only \"~1\", ALL \"*\"",
                                        "example": "PATCH only: \"~1.1\", MINOR and PATCH only \"~1\", ALL \"*\",  \">=1.2.3-0\"",
                                        "title": "Semver version pattern",
                                        "type": "string"
                                      },
                                      "tagMatcher": {
                                        "default": "semver",
                                        "enum": ["semver"],
                                        "type": "string"
                                      }
                                    },
                                    "required": ["semver"],
                                    "title": "Semver versioning",
                                    "type": "object"
                                  },
                                  {
                                    "additionalProperties": false,
                                    "properties": {
                                      "glob": {
                                        "description": "Use this filter if you want to make glob-style patterns. E.g.: \"main-v1.3.*\"",
                                        "example": "main-v1.3.*",
                                        "title": "Glob string pattern",
                                        "type": "string"
                                      },
                                      "tagMatcher": {
                                        "default": "glob",
                                        "enum": ["glob"],
                                        "type": "string"
                                      }
                                    },
                                    "required": ["glob"],
                                    "title": "Glob pattern matching",
                                    "type": "object"
                                  }
                                ],
                                "title": "Continuous delivery"
                              },
                              "env": {
                                "title": "Environment variables",
                                "type": "array",
                                "nullable": true,
                                "items": {
                                  "properties": {
                                    "name": {
                                      "type": "string",
                                      "pattern": "^[a-zA-Z0-9_]*$"
                                    },
                                    "value": {
                                      "type": "string",
                                      "maxLength": 131072
                                    }
                                  },
                                  "required": ["name", "value"],
                                  "type": "object"
                                }
                              },
                              "image": {
                                "nullable": true,
                                "properties": {
                                  "repository": {
                                    "description": "A container image repository.",
                                    "pattern": "^[a-z0-9]+(?:[/._-]{1,2}[a-z0-9]+)*$",
                                    "type": "string"
                                  },
                                  "tag": {
                                    "pattern": "[\\w][\\w.-]{0,127}",
                                    "type": "string"
                                  }
                                },
                                "required": ["repository", "tag"],
                                "title": "Container image",
                                "type": "object"
                              },
                              "resources": {
                                "additionalProperties": false,
                                "description": "Compute resources for containers.",
                                "properties": {
                                  "limits": {
                                    "description": "Requested resources (best effort).",
                                    "additionalProperties": false,
                                    "properties": {
                                      "cpu": {
                                        "description": "Amount of cores, or slice of cpu in millis.",
                                        "default": "50m",
                                        "example": ["1", "200m"],
                                        "pattern": "^([0-9]+\\.[0-9]{1,2})|([0-9]{2,3}m)?$",
                                        "type": "string"
                                      },
                                      "memory": {
                                        "description": "Amount of memory. Valid units are E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki.",
                                        "default": "64Mi",
                                        "example": ["1Mi", "0.5M"],
                                        "pattern": "^([0-9]+\\.)?[0-9]+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$",
                                        "type": "string"
                                      }
                                    },
                                    "required": ["cpu", "memory"],
                                    "type": "object"
                                  },
                                  "requests": {
                                    "description": "Requested resources (guaranteed).",
                                    "additionalProperties": false,
                                    "properties": {
                                      "cpu": {
                                        "description": "Amount of cores, or slice of cpu in millis.",
                                        "default": "50m",
                                        "example": ["1", "200m"],
                                        "pattern": "^([0-9]+\\.[0-9]{1,2})|([0-9]{2,3}m)?$",
                                        "type": "string"
                                      },
                                      "memory": {
                                        "description": "Amount of memory. Valid units are E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki.",
                                        "default": "64Mi",
                                        "example": ["1Mi", "0.5M"],
                                        "pattern": "^([0-9]+\\.)?[0-9]+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$",
                                        "type": "string"
                                      }
                                    },
                                    "required": ["cpu", "memory"],
                                    "type": "object"
                                  }
                                },
                                "title": "Pod resources",
                                "type": "object"
                              },
                              "scaleToZero": {
                                "default": false,
                                "description": "Scales to zero after 60 seconds and needs approximately 8 seconds to start back up.",
                                "title": "Scale to zero",
                                "type": "boolean"
                              },
                              "secrets": {
                                "items": {
                                  "properties": {
                                    "name": {
                                      "type": "string"
                                    },
                                    "entries": {
                                      "items": {
                                        "type": "string"
                                      },
                                      "title": "Entries",
                                      "type": "array",
                                      "uniqueItems": true
                                    }
                                  },
                                  "required": ["name"],
                                  "type": "object"
                                },
                                "type": "array"
                              },
                              "serviceType": {
                                "default": "ksvc",
                                "enum": ["ksvc"],
                                "type": "string"
                              }
                            },
                            "title": "Knative service"
                          },
                          {
                            "properties": {
                              "serviceType": {
                                "default": "ksvcPredeployed",
                                "enum": ["ksvcPredeployed"],
                                "type": "string"
                              }
                            },
                            "required": ["serviceType"],
                            "title": "Existing Knative service",
                            "type": "object"
                          },
                          {
                            "properties": {
                              "serviceType": {
                                "default": "svcPredeployed",
                                "enum": ["svcPredeployed"],
                                "type": "string"
                              }
                            },
                            "required": ["serviceType"],
                            "title": "Existing Kubernetes service",
                            "type": "object"
                          }
                        ],
                        "title": "Type",
                        "type": "object"
                      },
                      "ingress": {
                        "oneOf": [
                          {
                            "additionalProperties": false,
                            "nullable": true,
                            "title": "Private",
                            "type": "object"
                          },
                          {
                            "properties": {
                              "useDefaultSubdomain": {
                                "default": true,
                                "description": "Use the team domain so that the URL reveals the owner.",
                                "title": "Use team domain (preferred)",
                                "type": "boolean"
                              },
                              "subdomain": {
                                "description": "A host that is used to set DNS 'A' records",
                                "nullable": true,
                                "title": "Host",
                                "type": "string",
                                "pattern": "^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9])$"
                              },
                              "domain": {
                                "description": "A managed DNS zone",
                                "title": "DNS Zone",
                                "type": "string"
                              },
                              "path": {
                                "description": "The path in the URL that the service should be mapped to (e.g. for microservices on one app/domain.)",
                                "title": "URL path",
                                "type": "string"
                              },
                              "forwardPath": {
                                "description": "Forward the URL path into the service (don't rewrite to /)",
                                "title": "Forward path",
                                "type": "boolean"
                              },
                              "hasSingleSignOn": {
                                "default": false,
                                "title": "Authenticate with Single Sign On",
                                "type": "boolean"
                              },
                              "hasCert": {
                                "default": false,
                                "description": "If true a certificate should exist already",
                                "title": "Already has a certificate",
                                "type": "boolean"
                              },
                              "certArn": {
                                "example": "arn:aws:acm:eu-central-1:xxx:certificate/xxx",
                                "title": "Certificate ARN",
                                "type": "string"
                              },
                              "certSelect": {
                                "default": true,
                                "title": "Select existing secret name",
                                "type": "boolean"
                              },
                              "certName": {
                                "example": "www-example-com",
                                "title": "Secret name",
                                "type": "string"
                              }
                            },
                            "required": ["domain", "subdomain"],
                            "title": "Public URL",
                            "type": "object"
                          }
                        ],
                        "title": "Exposure",
                        "x-acl": {
                          "team": ["read"]
                        }
                      },
                      "teamId": {
                        "type": "string",
                        "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                        "readOnly": true
                      }
                    },
                    "required": ["name", "teamId"],
                    "type": "object"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/teams": {
      "get": {
        "operationId": "getTeams",
        "description": "Get teams collection",
        "x-aclSchema": "Team",
        "responses": {
          "200": {
            "description": "Successfully obtained teams collection",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "properties": {
                      "id": {
                        "type": "string",
                        "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                        "title": "ID",
                        "x-acl": {
                          "admin": ["read"],
                          "team": ["read"]
                        }
                      },
                      "name": {
                        "type": "string",
                        "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                        "title": "Name",
                        "description": "A team name"
                      },
                      "oidc": {
                        "properties": {
                          "groupMapping": {
                            "description": "An OIDC group name/id granting access to this team",
                            "title": "Group mapping",
                            "type": "string"
                          }
                        },
                        "title": "OIDC",
                        "type": "object"
                      },
                      "password": {
                        "type": "string",
                        "writeOnly": true
                      },
                      "alerts": {
                        "properties": {
                          "email": {
                            "properties": {
                              "critical": {
                                "description": "Email addresses (comma separated) for critical events.",
                                "title": "Criticals",
                                "type": "string"
                              },
                              "nonCritical": {
                                "description": "One or more email addresses (comma separated) for non-critical events.",
                                "title": "Non criticals",
                                "type": "string"
                              }
                            },
                            "title": "Email",
                            "type": "object"
                          },
                          "msteams": {
                            "properties": {
                              "highPrio": {
                                "description": "The high prio web hook",
                                "title": "High prio webhook",
                                "type": "string"
                              },
                              "lowPrio": {
                                "description": "The low prio web hook",
                                "title": "Low prio webhook",
                                "type": "string"
                              }
                            },
                            "title": "Microsoft Teams",
                            "type": "object"
                          },
                          "receivers": {
                            "items": {
                              "enum": ["slack", "msteams", "email"],
                              "type": "string"
                            },
                            "title": "Receivers",
                            "type": "array",
                            "uniqueItems": true
                          },
                          "slack": {
                            "properties": {
                              "channel": {
                                "description": "Slack channel for non-criticals. If none is given the global one is used, which defaults to 'mon-otomi'.",
                                "title": "Channel for non-criticals",
                                "type": "string"
                              },
                              "channelCrit": {
                                "description": "Slack channel for critical alerts. If none is given the global one is used, which defaults to 'mon-otomi-crit'.",
                                "title": "Channel for criticals",
                                "type": "string"
                              },
                              "url": {
                                "description": "Slack web hook. If none is given the global one is used.",
                                "title": "Web hook",
                                "type": "string"
                              }
                            },
                            "title": "Slack",
                            "type": "object"
                          }
                        },
                        "title": "Alerting endpoints",
                        "type": "object"
                      }
                    },
                    "required": ["name"],
                    "type": "object",
                    "x-acl": {
                      "admin": ["delete-any", "read-any", "create-any", "update-any"],
                      "team": ["read-any", "update"]
                    },
                    "x-externalDocsPath": "docs/configuring-teams"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "operationId": "createTeam",
        "description": "Create a team",
        "x-aclSchema": "Team",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "id": {
                    "type": "string",
                    "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                    "title": "ID",
                    "x-acl": {
                      "admin": ["read"],
                      "team": ["read"]
                    }
                  },
                  "name": {
                    "type": "string",
                    "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                    "title": "Name",
                    "description": "A team name"
                  },
                  "oidc": {
                    "properties": {
                      "groupMapping": {
                        "description": "An OIDC group name/id granting access to this team",
                        "title": "Group mapping",
                        "type": "string"
                      }
                    },
                    "title": "OIDC",
                    "type": "object"
                  },
                  "password": {
                    "type": "string",
                    "writeOnly": true
                  },
                  "alerts": {
                    "properties": {
                      "email": {
                        "properties": {
                          "critical": {
                            "description": "Email addresses (comma separated) for critical events.",
                            "title": "Criticals",
                            "type": "string"
                          },
                          "nonCritical": {
                            "description": "One or more email addresses (comma separated) for non-critical events.",
                            "title": "Non criticals",
                            "type": "string"
                          }
                        },
                        "title": "Email",
                        "type": "object"
                      },
                      "msteams": {
                        "properties": {
                          "highPrio": {
                            "description": "The high prio web hook",
                            "title": "High prio webhook",
                            "type": "string"
                          },
                          "lowPrio": {
                            "description": "The low prio web hook",
                            "title": "Low prio webhook",
                            "type": "string"
                          }
                        },
                        "title": "Microsoft Teams",
                        "type": "object"
                      },
                      "receivers": {
                        "items": {
                          "enum": ["slack", "msteams", "email"],
                          "type": "string"
                        },
                        "title": "Receivers",
                        "type": "array",
                        "uniqueItems": true
                      },
                      "slack": {
                        "properties": {
                          "channel": {
                            "description": "Slack channel for non-criticals. If none is given the global one is used, which defaults to 'mon-otomi'.",
                            "title": "Channel for non-criticals",
                            "type": "string"
                          },
                          "channelCrit": {
                            "description": "Slack channel for critical alerts. If none is given the global one is used, which defaults to 'mon-otomi-crit'.",
                            "title": "Channel for criticals",
                            "type": "string"
                          },
                          "url": {
                            "description": "Slack web hook. If none is given the global one is used.",
                            "title": "Web hook",
                            "type": "string"
                          }
                        },
                        "title": "Slack",
                        "type": "object"
                      }
                    },
                    "title": "Alerting endpoints",
                    "type": "object"
                  }
                },
                "required": ["name"],
                "type": "object",
                "x-acl": {
                  "admin": ["delete-any", "read-any", "create-any", "update-any"],
                  "team": ["read-any", "update"]
                },
                "x-externalDocsPath": "docs/configuring-teams"
              }
            }
          },
          "description": "Team object that needs to be added to the collection",
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully obtained teams collection",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "id": {
                      "type": "string",
                      "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                      "title": "ID",
                      "x-acl": {
                        "admin": ["read"],
                        "team": ["read"]
                      }
                    },
                    "name": {
                      "type": "string",
                      "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                      "title": "Name",
                      "description": "A team name"
                    },
                    "oidc": {
                      "properties": {
                        "groupMapping": {
                          "description": "An OIDC group name/id granting access to this team",
                          "title": "Group mapping",
                          "type": "string"
                        }
                      },
                      "title": "OIDC",
                      "type": "object"
                    },
                    "password": {
                      "type": "string",
                      "writeOnly": true
                    },
                    "alerts": {
                      "properties": {
                        "email": {
                          "properties": {
                            "critical": {
                              "description": "Email addresses (comma separated) for critical events.",
                              "title": "Criticals",
                              "type": "string"
                            },
                            "nonCritical": {
                              "description": "One or more email addresses (comma separated) for non-critical events.",
                              "title": "Non criticals",
                              "type": "string"
                            }
                          },
                          "title": "Email",
                          "type": "object"
                        },
                        "msteams": {
                          "properties": {
                            "highPrio": {
                              "description": "The high prio web hook",
                              "title": "High prio webhook",
                              "type": "string"
                            },
                            "lowPrio": {
                              "description": "The low prio web hook",
                              "title": "Low prio webhook",
                              "type": "string"
                            }
                          },
                          "title": "Microsoft Teams",
                          "type": "object"
                        },
                        "receivers": {
                          "items": {
                            "enum": ["slack", "msteams", "email"],
                            "type": "string"
                          },
                          "title": "Receivers",
                          "type": "array",
                          "uniqueItems": true
                        },
                        "slack": {
                          "properties": {
                            "channel": {
                              "description": "Slack channel for non-criticals. If none is given the global one is used, which defaults to 'mon-otomi'.",
                              "title": "Channel for non-criticals",
                              "type": "string"
                            },
                            "channelCrit": {
                              "description": "Slack channel for critical alerts. If none is given the global one is used, which defaults to 'mon-otomi-crit'.",
                              "title": "Channel for criticals",
                              "type": "string"
                            },
                            "url": {
                              "description": "Slack web hook. If none is given the global one is used.",
                              "title": "Web hook",
                              "type": "string"
                            }
                          },
                          "title": "Slack",
                          "type": "object"
                        }
                      },
                      "title": "Alerting endpoints",
                      "type": "object"
                    }
                  },
                  "required": ["name"],
                  "type": "object",
                  "x-acl": {
                    "admin": ["delete-any", "read-any", "create-any", "update-any"],
                    "team": ["read-any", "update"]
                  },
                  "x-externalDocsPath": "docs/configuring-teams"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "409": {
            "description": "Resource already exists",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}": {
      "parameters": [
        {
          "name": "teamId",
          "in": "path",
          "description": "ID of team to return",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "operationId": "getTeam",
        "description": "Get a specific team",
        "x-aclSchema": "Team",
        "responses": {
          "200": {
            "description": "Successfully obtained team",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "id": {
                      "type": "string",
                      "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                      "title": "ID",
                      "x-acl": {
                        "admin": ["read"],
                        "team": ["read"]
                      }
                    },
                    "name": {
                      "type": "string",
                      "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                      "title": "Name",
                      "description": "A team name"
                    },
                    "oidc": {
                      "properties": {
                        "groupMapping": {
                          "description": "An OIDC group name/id granting access to this team",
                          "title": "Group mapping",
                          "type": "string"
                        }
                      },
                      "title": "OIDC",
                      "type": "object"
                    },
                    "password": {
                      "type": "string",
                      "writeOnly": true
                    },
                    "alerts": {
                      "properties": {
                        "email": {
                          "properties": {
                            "critical": {
                              "description": "Email addresses (comma separated) for critical events.",
                              "title": "Criticals",
                              "type": "string"
                            },
                            "nonCritical": {
                              "description": "One or more email addresses (comma separated) for non-critical events.",
                              "title": "Non criticals",
                              "type": "string"
                            }
                          },
                          "title": "Email",
                          "type": "object"
                        },
                        "msteams": {
                          "properties": {
                            "highPrio": {
                              "description": "The high prio web hook",
                              "title": "High prio webhook",
                              "type": "string"
                            },
                            "lowPrio": {
                              "description": "The low prio web hook",
                              "title": "Low prio webhook",
                              "type": "string"
                            }
                          },
                          "title": "Microsoft Teams",
                          "type": "object"
                        },
                        "receivers": {
                          "items": {
                            "enum": ["slack", "msteams", "email"],
                            "type": "string"
                          },
                          "title": "Receivers",
                          "type": "array",
                          "uniqueItems": true
                        },
                        "slack": {
                          "properties": {
                            "channel": {
                              "description": "Slack channel for non-criticals. If none is given the global one is used, which defaults to 'mon-otomi'.",
                              "title": "Channel for non-criticals",
                              "type": "string"
                            },
                            "channelCrit": {
                              "description": "Slack channel for critical alerts. If none is given the global one is used, which defaults to 'mon-otomi-crit'.",
                              "title": "Channel for criticals",
                              "type": "string"
                            },
                            "url": {
                              "description": "Slack web hook. If none is given the global one is used.",
                              "title": "Web hook",
                              "type": "string"
                            }
                          },
                          "title": "Slack",
                          "type": "object"
                        }
                      },
                      "title": "Alerting endpoints",
                      "type": "object"
                    }
                  },
                  "required": ["name"],
                  "type": "object",
                  "x-acl": {
                    "admin": ["delete-any", "read-any", "create-any", "update-any"],
                    "team": ["read-any", "update"]
                  },
                  "x-externalDocsPath": "docs/configuring-teams"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "404": {
            "description": "Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "put": {
        "operationId": "editTeam",
        "description": "Edit a team",
        "x-aclSchema": "Team",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "id": {
                    "type": "string",
                    "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                    "title": "ID",
                    "x-acl": {
                      "admin": ["read"],
                      "team": ["read"]
                    }
                  },
                  "name": {
                    "type": "string",
                    "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                    "title": "Name",
                    "description": "A team name"
                  },
                  "oidc": {
                    "properties": {
                      "groupMapping": {
                        "description": "An OIDC group name/id granting access to this team",
                        "title": "Group mapping",
                        "type": "string"
                      }
                    },
                    "title": "OIDC",
                    "type": "object"
                  },
                  "password": {
                    "type": "string",
                    "writeOnly": true
                  },
                  "alerts": {
                    "properties": {
                      "email": {
                        "properties": {
                          "critical": {
                            "description": "Email addresses (comma separated) for critical events.",
                            "title": "Criticals",
                            "type": "string"
                          },
                          "nonCritical": {
                            "description": "One or more email addresses (comma separated) for non-critical events.",
                            "title": "Non criticals",
                            "type": "string"
                          }
                        },
                        "title": "Email",
                        "type": "object"
                      },
                      "msteams": {
                        "properties": {
                          "highPrio": {
                            "description": "The high prio web hook",
                            "title": "High prio webhook",
                            "type": "string"
                          },
                          "lowPrio": {
                            "description": "The low prio web hook",
                            "title": "Low prio webhook",
                            "type": "string"
                          }
                        },
                        "title": "Microsoft Teams",
                        "type": "object"
                      },
                      "receivers": {
                        "items": {
                          "enum": ["slack", "msteams", "email"],
                          "type": "string"
                        },
                        "title": "Receivers",
                        "type": "array",
                        "uniqueItems": true
                      },
                      "slack": {
                        "properties": {
                          "channel": {
                            "description": "Slack channel for non-criticals. If none is given the global one is used, which defaults to 'mon-otomi'.",
                            "title": "Channel for non-criticals",
                            "type": "string"
                          },
                          "channelCrit": {
                            "description": "Slack channel for critical alerts. If none is given the global one is used, which defaults to 'mon-otomi-crit'.",
                            "title": "Channel for criticals",
                            "type": "string"
                          },
                          "url": {
                            "description": "Slack web hook. If none is given the global one is used.",
                            "title": "Web hook",
                            "type": "string"
                          }
                        },
                        "title": "Slack",
                        "type": "object"
                      }
                    },
                    "title": "Alerting endpoints",
                    "type": "object"
                  }
                },
                "required": ["name"],
                "type": "object",
                "x-acl": {
                  "admin": ["delete-any", "read-any", "create-any", "update-any"],
                  "team": ["read-any", "update"]
                },
                "x-externalDocsPath": "docs/configuring-teams"
              }
            }
          },
          "description": "Team object that contains updated values",
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully edited team",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "id": {
                      "type": "string",
                      "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                      "title": "ID",
                      "x-acl": {
                        "admin": ["read"],
                        "team": ["read"]
                      }
                    },
                    "name": {
                      "type": "string",
                      "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                      "title": "Name",
                      "description": "A team name"
                    },
                    "oidc": {
                      "properties": {
                        "groupMapping": {
                          "description": "An OIDC group name/id granting access to this team",
                          "title": "Group mapping",
                          "type": "string"
                        }
                      },
                      "title": "OIDC",
                      "type": "object"
                    },
                    "password": {
                      "type": "string",
                      "writeOnly": true
                    },
                    "alerts": {
                      "properties": {
                        "email": {
                          "properties": {
                            "critical": {
                              "description": "Email addresses (comma separated) for critical events.",
                              "title": "Criticals",
                              "type": "string"
                            },
                            "nonCritical": {
                              "description": "One or more email addresses (comma separated) for non-critical events.",
                              "title": "Non criticals",
                              "type": "string"
                            }
                          },
                          "title": "Email",
                          "type": "object"
                        },
                        "msteams": {
                          "properties": {
                            "highPrio": {
                              "description": "The high prio web hook",
                              "title": "High prio webhook",
                              "type": "string"
                            },
                            "lowPrio": {
                              "description": "The low prio web hook",
                              "title": "Low prio webhook",
                              "type": "string"
                            }
                          },
                          "title": "Microsoft Teams",
                          "type": "object"
                        },
                        "receivers": {
                          "items": {
                            "enum": ["slack", "msteams", "email"],
                            "type": "string"
                          },
                          "title": "Receivers",
                          "type": "array",
                          "uniqueItems": true
                        },
                        "slack": {
                          "properties": {
                            "channel": {
                              "description": "Slack channel for non-criticals. If none is given the global one is used, which defaults to 'mon-otomi'.",
                              "title": "Channel for non-criticals",
                              "type": "string"
                            },
                            "channelCrit": {
                              "description": "Slack channel for critical alerts. If none is given the global one is used, which defaults to 'mon-otomi-crit'.",
                              "title": "Channel for criticals",
                              "type": "string"
                            },
                            "url": {
                              "description": "Slack web hook. If none is given the global one is used.",
                              "title": "Web hook",
                              "type": "string"
                            }
                          },
                          "title": "Slack",
                          "type": "object"
                        }
                      },
                      "title": "Alerting endpoints",
                      "type": "object"
                    }
                  },
                  "required": ["name"],
                  "type": "object",
                  "x-acl": {
                    "admin": ["delete-any", "read-any", "create-any", "update-any"],
                    "team": ["read-any", "update"]
                  },
                  "x-externalDocsPath": "docs/configuring-teams"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "404": {
            "description": "Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "delete": {
        "operationId": "deleteTeam",
        "description": "Delete team",
        "x-aclSchema": "Team",
        "responses": {
          "200": {
            "description": "Successfully deleted a team"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "404": {
            "description": "Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/services": {
      "parameters": [
        {
          "name": "teamId",
          "in": "path",
          "description": "ID of team to return",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "operationId": "getTeamServices",
        "description": "Get services from a given team",
        "x-aclSchema": "Service",
        "responses": {
          "200": {
            "description": "Successfully obtained services",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "x-acl": {
                      "admin": ["delete-any", "read-any", "create-any", "update-any"],
                      "team": ["delete", "read", "create", "update"]
                    },
                    "x-externalDocsPath": "docs/configuring-services",
                    "properties": {
                      "enabled": {
                        "default": true,
                        "type": "boolean"
                      },
                      "id": {
                        "readOnly": true,
                        "type": "string"
                      },
                      "name": {
                        "type": "string",
                        "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                        "title": "Name",
                        "description": "A service name",
                        "example": "some-service"
                      },
                      "port": {
                        "description": "A service port",
                        "type": "integer",
                        "default": 80,
                        "minimum": 1,
                        "maximum": 65535
                      },
                      "ksvc": {
                        "oneOf": [
                          {
                            "nullable": true,
                            "properties": {
                              "annotations": {
                                "title": "Pod annotations",
                                "description": "Kubernetes annotations with arbitrary metadata",
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "name": {
                                      "type": "string",
                                      "pattern": "^((.){1,253}\\/)?(.){1,63}$"
                                    },
                                    "value": {
                                      "type": "string",
                                      "maxLength": 32767
                                    }
                                  }
                                }
                              },
                              "autoCD": {
                                "description": "Deploys new images based on a tagging strategy",
                                "oneOf": [
                                  {
                                    "additionalProperties": false,
                                    "nullable": true,
                                    "title": "Off",
                                    "type": "object"
                                  },
                                  {
                                    "nullable": true,
                                    "properties": {
                                      "semver": {
                                        "description": "Use this filter if your image tags follow semantic versioning rules (MAJOR.MINOR.PATCH). E.g.: PATCH only: \"~1.1\", MINOR and PATCH only \"~1\", ALL \"*\"",
                                        "example": "PATCH only: \"~1.1\", MINOR and PATCH only \"~1\", ALL \"*\",  \">=1.2.3-0\"",
                                        "title": "Semver version pattern",
                                        "type": "string"
                                      },
                                      "tagMatcher": {
                                        "default": "semver",
                                        "enum": ["semver"],
                                        "type": "string"
                                      }
                                    },
                                    "required": ["semver"],
                                    "title": "Semver versioning",
                                    "type": "object"
                                  },
                                  {
                                    "additionalProperties": false,
                                    "properties": {
                                      "glob": {
                                        "description": "Use this filter if you want to make glob-style patterns. E.g.: \"main-v1.3.*\"",
                                        "example": "main-v1.3.*",
                                        "title": "Glob string pattern",
                                        "type": "string"
                                      },
                                      "tagMatcher": {
                                        "default": "glob",
                                        "enum": ["glob"],
                                        "type": "string"
                                      }
                                    },
                                    "required": ["glob"],
                                    "title": "Glob pattern matching",
                                    "type": "object"
                                  }
                                ],
                                "title": "Continuous delivery"
                              },
                              "env": {
                                "title": "Environment variables",
                                "type": "array",
                                "nullable": true,
                                "items": {
                                  "properties": {
                                    "name": {
                                      "type": "string",
                                      "pattern": "^[a-zA-Z0-9_]*$"
                                    },
                                    "value": {
                                      "type": "string",
                                      "maxLength": 131072
                                    }
                                  },
                                  "required": ["name", "value"],
                                  "type": "object"
                                }
                              },
                              "image": {
                                "nullable": true,
                                "properties": {
                                  "repository": {
                                    "description": "A container image repository.",
                                    "pattern": "^[a-z0-9]+(?:[/._-]{1,2}[a-z0-9]+)*$",
                                    "type": "string"
                                  },
                                  "tag": {
                                    "pattern": "[\\w][\\w.-]{0,127}",
                                    "type": "string"
                                  }
                                },
                                "required": ["repository", "tag"],
                                "title": "Container image",
                                "type": "object"
                              },
                              "resources": {
                                "additionalProperties": false,
                                "description": "Compute resources for containers.",
                                "properties": {
                                  "limits": {
                                    "description": "Requested resources (best effort).",
                                    "additionalProperties": false,
                                    "properties": {
                                      "cpu": {
                                        "description": "Amount of cores, or slice of cpu in millis.",
                                        "default": "50m",
                                        "example": ["1", "200m"],
                                        "pattern": "^([0-9]+\\.[0-9]{1,2})|([0-9]{2,3}m)?$",
                                        "type": "string"
                                      },
                                      "memory": {
                                        "description": "Amount of memory. Valid units are E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki.",
                                        "default": "64Mi",
                                        "example": ["1Mi", "0.5M"],
                                        "pattern": "^([0-9]+\\.)?[0-9]+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$",
                                        "type": "string"
                                      }
                                    },
                                    "required": ["cpu", "memory"],
                                    "type": "object"
                                  },
                                  "requests": {
                                    "description": "Requested resources (guaranteed).",
                                    "additionalProperties": false,
                                    "properties": {
                                      "cpu": {
                                        "description": "Amount of cores, or slice of cpu in millis.",
                                        "default": "50m",
                                        "example": ["1", "200m"],
                                        "pattern": "^([0-9]+\\.[0-9]{1,2})|([0-9]{2,3}m)?$",
                                        "type": "string"
                                      },
                                      "memory": {
                                        "description": "Amount of memory. Valid units are E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki.",
                                        "default": "64Mi",
                                        "example": ["1Mi", "0.5M"],
                                        "pattern": "^([0-9]+\\.)?[0-9]+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$",
                                        "type": "string"
                                      }
                                    },
                                    "required": ["cpu", "memory"],
                                    "type": "object"
                                  }
                                },
                                "title": "Pod resources",
                                "type": "object"
                              },
                              "scaleToZero": {
                                "default": false,
                                "description": "Scales to zero after 60 seconds and needs approximately 8 seconds to start back up.",
                                "title": "Scale to zero",
                                "type": "boolean"
                              },
                              "secrets": {
                                "items": {
                                  "properties": {
                                    "name": {
                                      "type": "string"
                                    },
                                    "entries": {
                                      "items": {
                                        "type": "string"
                                      },
                                      "title": "Entries",
                                      "type": "array",
                                      "uniqueItems": true
                                    }
                                  },
                                  "required": ["name"],
                                  "type": "object"
                                },
                                "type": "array"
                              },
                              "serviceType": {
                                "default": "ksvc",
                                "enum": ["ksvc"],
                                "type": "string"
                              }
                            },
                            "title": "Knative service"
                          },
                          {
                            "properties": {
                              "serviceType": {
                                "default": "ksvcPredeployed",
                                "enum": ["ksvcPredeployed"],
                                "type": "string"
                              }
                            },
                            "required": ["serviceType"],
                            "title": "Existing Knative service",
                            "type": "object"
                          },
                          {
                            "properties": {
                              "serviceType": {
                                "default": "svcPredeployed",
                                "enum": ["svcPredeployed"],
                                "type": "string"
                              }
                            },
                            "required": ["serviceType"],
                            "title": "Existing Kubernetes service",
                            "type": "object"
                          }
                        ],
                        "title": "Type",
                        "type": "object"
                      },
                      "ingress": {
                        "oneOf": [
                          {
                            "additionalProperties": false,
                            "nullable": true,
                            "title": "Private",
                            "type": "object"
                          },
                          {
                            "properties": {
                              "useDefaultSubdomain": {
                                "default": true,
                                "description": "Use the team domain so that the URL reveals the owner.",
                                "title": "Use team domain (preferred)",
                                "type": "boolean"
                              },
                              "subdomain": {
                                "description": "A host that is used to set DNS 'A' records",
                                "nullable": true,
                                "title": "Host",
                                "type": "string",
                                "pattern": "^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9])$"
                              },
                              "domain": {
                                "description": "A managed DNS zone",
                                "title": "DNS Zone",
                                "type": "string"
                              },
                              "path": {
                                "description": "The path in the URL that the service should be mapped to (e.g. for microservices on one app/domain.)",
                                "title": "URL path",
                                "type": "string"
                              },
                              "forwardPath": {
                                "description": "Forward the URL path into the service (don't rewrite to /)",
                                "title": "Forward path",
                                "type": "boolean"
                              },
                              "hasSingleSignOn": {
                                "default": false,
                                "title": "Authenticate with Single Sign On",
                                "type": "boolean"
                              },
                              "hasCert": {
                                "default": false,
                                "description": "If true a certificate should exist already",
                                "title": "Already has a certificate",
                                "type": "boolean"
                              },
                              "certArn": {
                                "example": "arn:aws:acm:eu-central-1:xxx:certificate/xxx",
                                "title": "Certificate ARN",
                                "type": "string"
                              },
                              "certSelect": {
                                "default": true,
                                "title": "Select existing secret name",
                                "type": "boolean"
                              },
                              "certName": {
                                "example": "www-example-com",
                                "title": "Secret name",
                                "type": "string"
                              }
                            },
                            "required": ["domain", "subdomain"],
                            "title": "Public URL",
                            "type": "object"
                          }
                        ],
                        "title": "Exposure",
                        "x-acl": {
                          "team": ["read"]
                        }
                      },
                      "teamId": {
                        "type": "string",
                        "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                        "readOnly": true
                      }
                    },
                    "required": ["name", "teamId"],
                    "type": "object"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "post": {
        "operationId": "createService",
        "description": "Create a service",
        "x-aclSchema": "Service",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "x-acl": {
                  "admin": ["delete-any", "read-any", "create-any", "update-any"],
                  "team": ["delete", "read", "create", "update"]
                },
                "x-externalDocsPath": "docs/configuring-services",
                "properties": {
                  "enabled": {
                    "default": true,
                    "type": "boolean"
                  },
                  "id": {
                    "readOnly": true,
                    "type": "string"
                  },
                  "name": {
                    "type": "string",
                    "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                    "title": "Name",
                    "description": "A service name",
                    "example": "some-service"
                  },
                  "port": {
                    "description": "A service port",
                    "type": "integer",
                    "default": 80,
                    "minimum": 1,
                    "maximum": 65535
                  },
                  "ksvc": {
                    "oneOf": [
                      {
                        "nullable": true,
                        "properties": {
                          "annotations": {
                            "title": "Pod annotations",
                            "description": "Kubernetes annotations with arbitrary metadata",
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "name": {
                                  "type": "string",
                                  "pattern": "^((.){1,253}\\/)?(.){1,63}$"
                                },
                                "value": {
                                  "type": "string",
                                  "maxLength": 32767
                                }
                              }
                            }
                          },
                          "autoCD": {
                            "description": "Deploys new images based on a tagging strategy",
                            "oneOf": [
                              {
                                "additionalProperties": false,
                                "nullable": true,
                                "title": "Off",
                                "type": "object"
                              },
                              {
                                "nullable": true,
                                "properties": {
                                  "semver": {
                                    "description": "Use this filter if your image tags follow semantic versioning rules (MAJOR.MINOR.PATCH). E.g.: PATCH only: \"~1.1\", MINOR and PATCH only \"~1\", ALL \"*\"",
                                    "example": "PATCH only: \"~1.1\", MINOR and PATCH only \"~1\", ALL \"*\",  \">=1.2.3-0\"",
                                    "title": "Semver version pattern",
                                    "type": "string"
                                  },
                                  "tagMatcher": {
                                    "default": "semver",
                                    "enum": ["semver"],
                                    "type": "string"
                                  }
                                },
                                "required": ["semver"],
                                "title": "Semver versioning",
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "glob": {
                                    "description": "Use this filter if you want to make glob-style patterns. E.g.: \"main-v1.3.*\"",
                                    "example": "main-v1.3.*",
                                    "title": "Glob string pattern",
                                    "type": "string"
                                  },
                                  "tagMatcher": {
                                    "default": "glob",
                                    "enum": ["glob"],
                                    "type": "string"
                                  }
                                },
                                "required": ["glob"],
                                "title": "Glob pattern matching",
                                "type": "object"
                              }
                            ],
                            "title": "Continuous delivery"
                          },
                          "env": {
                            "title": "Environment variables",
                            "type": "array",
                            "nullable": true,
                            "items": {
                              "properties": {
                                "name": {
                                  "type": "string",
                                  "pattern": "^[a-zA-Z0-9_]*$"
                                },
                                "value": {
                                  "type": "string",
                                  "maxLength": 131072
                                }
                              },
                              "required": ["name", "value"],
                              "type": "object"
                            }
                          },
                          "image": {
                            "nullable": true,
                            "properties": {
                              "repository": {
                                "description": "A container image repository.",
                                "pattern": "^[a-z0-9]+(?:[/._-]{1,2}[a-z0-9]+)*$",
                                "type": "string"
                              },
                              "tag": {
                                "pattern": "[\\w][\\w.-]{0,127}",
                                "type": "string"
                              }
                            },
                            "required": ["repository", "tag"],
                            "title": "Container image",
                            "type": "object"
                          },
                          "resources": {
                            "additionalProperties": false,
                            "description": "Compute resources for containers.",
                            "properties": {
                              "limits": {
                                "description": "Requested resources (best effort).",
                                "additionalProperties": false,
                                "properties": {
                                  "cpu": {
                                    "description": "Amount of cores, or slice of cpu in millis.",
                                    "default": "50m",
                                    "example": ["1", "200m"],
                                    "pattern": "^([0-9]+\\.[0-9]{1,2})|([0-9]{2,3}m)?$",
                                    "type": "string"
                                  },
                                  "memory": {
                                    "description": "Amount of memory. Valid units are E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki.",
                                    "default": "64Mi",
                                    "example": ["1Mi", "0.5M"],
                                    "pattern": "^([0-9]+\\.)?[0-9]+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$",
                                    "type": "string"
                                  }
                                },
                                "required": ["cpu", "memory"],
                                "type": "object"
                              },
                              "requests": {
                                "description": "Requested resources (guaranteed).",
                                "additionalProperties": false,
                                "properties": {
                                  "cpu": {
                                    "description": "Amount of cores, or slice of cpu in millis.",
                                    "default": "50m",
                                    "example": ["1", "200m"],
                                    "pattern": "^([0-9]+\\.[0-9]{1,2})|([0-9]{2,3}m)?$",
                                    "type": "string"
                                  },
                                  "memory": {
                                    "description": "Amount of memory. Valid units are E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki.",
                                    "default": "64Mi",
                                    "example": ["1Mi", "0.5M"],
                                    "pattern": "^([0-9]+\\.)?[0-9]+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$",
                                    "type": "string"
                                  }
                                },
                                "required": ["cpu", "memory"],
                                "type": "object"
                              }
                            },
                            "title": "Pod resources",
                            "type": "object"
                          },
                          "scaleToZero": {
                            "default": false,
                            "description": "Scales to zero after 60 seconds and needs approximately 8 seconds to start back up.",
                            "title": "Scale to zero",
                            "type": "boolean"
                          },
                          "secrets": {
                            "items": {
                              "properties": {
                                "name": {
                                  "type": "string"
                                },
                                "entries": {
                                  "items": {
                                    "type": "string"
                                  },
                                  "title": "Entries",
                                  "type": "array",
                                  "uniqueItems": true
                                }
                              },
                              "required": ["name"],
                              "type": "object"
                            },
                            "type": "array"
                          },
                          "serviceType": {
                            "default": "ksvc",
                            "enum": ["ksvc"],
                            "type": "string"
                          }
                        },
                        "title": "Knative service"
                      },
                      {
                        "properties": {
                          "serviceType": {
                            "default": "ksvcPredeployed",
                            "enum": ["ksvcPredeployed"],
                            "type": "string"
                          }
                        },
                        "required": ["serviceType"],
                        "title": "Existing Knative service",
                        "type": "object"
                      },
                      {
                        "properties": {
                          "serviceType": {
                            "default": "svcPredeployed",
                            "enum": ["svcPredeployed"],
                            "type": "string"
                          }
                        },
                        "required": ["serviceType"],
                        "title": "Existing Kubernetes service",
                        "type": "object"
                      }
                    ],
                    "title": "Type",
                    "type": "object"
                  },
                  "ingress": {
                    "oneOf": [
                      {
                        "additionalProperties": false,
                        "nullable": true,
                        "title": "Private",
                        "type": "object"
                      },
                      {
                        "properties": {
                          "useDefaultSubdomain": {
                            "default": true,
                            "description": "Use the team domain so that the URL reveals the owner.",
                            "title": "Use team domain (preferred)",
                            "type": "boolean"
                          },
                          "subdomain": {
                            "description": "A host that is used to set DNS 'A' records",
                            "nullable": true,
                            "title": "Host",
                            "type": "string",
                            "pattern": "^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9])$"
                          },
                          "domain": {
                            "description": "A managed DNS zone",
                            "title": "DNS Zone",
                            "type": "string"
                          },
                          "path": {
                            "description": "The path in the URL that the service should be mapped to (e.g. for microservices on one app/domain.)",
                            "title": "URL path",
                            "type": "string"
                          },
                          "forwardPath": {
                            "description": "Forward the URL path into the service (don't rewrite to /)",
                            "title": "Forward path",
                            "type": "boolean"
                          },
                          "hasSingleSignOn": {
                            "default": false,
                            "title": "Authenticate with Single Sign On",
                            "type": "boolean"
                          },
                          "hasCert": {
                            "default": false,
                            "description": "If true a certificate should exist already",
                            "title": "Already has a certificate",
                            "type": "boolean"
                          },
                          "certArn": {
                            "example": "arn:aws:acm:eu-central-1:xxx:certificate/xxx",
                            "title": "Certificate ARN",
                            "type": "string"
                          },
                          "certSelect": {
                            "default": true,
                            "title": "Select existing secret name",
                            "type": "boolean"
                          },
                          "certName": {
                            "example": "www-example-com",
                            "title": "Secret name",
                            "type": "string"
                          }
                        },
                        "required": ["domain", "subdomain"],
                        "title": "Public URL",
                        "type": "object"
                      }
                    ],
                    "title": "Exposure",
                    "x-acl": {
                      "team": ["read"]
                    }
                  },
                  "teamId": {
                    "type": "string",
                    "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                    "readOnly": true
                  }
                },
                "required": ["name", "teamId"],
                "type": "object"
              }
            }
          },
          "description": "Service object",
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully stored service configuration",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": {
                    "admin": ["delete-any", "read-any", "create-any", "update-any"],
                    "team": ["delete", "read", "create", "update"]
                  },
                  "x-externalDocsPath": "docs/configuring-services",
                  "properties": {
                    "enabled": {
                      "default": true,
                      "type": "boolean"
                    },
                    "id": {
                      "readOnly": true,
                      "type": "string"
                    },
                    "name": {
                      "type": "string",
                      "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                      "title": "Name",
                      "description": "A service name",
                      "example": "some-service"
                    },
                    "port": {
                      "description": "A service port",
                      "type": "integer",
                      "default": 80,
                      "minimum": 1,
                      "maximum": 65535
                    },
                    "ksvc": {
                      "oneOf": [
                        {
                          "nullable": true,
                          "properties": {
                            "annotations": {
                              "title": "Pod annotations",
                              "description": "Kubernetes annotations with arbitrary metadata",
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "name": {
                                    "type": "string",
                                    "pattern": "^((.){1,253}\\/)?(.){1,63}$"
                                  },
                                  "value": {
                                    "type": "string",
                                    "maxLength": 32767
                                  }
                                }
                              }
                            },
                            "autoCD": {
                              "description": "Deploys new images based on a tagging strategy",
                              "oneOf": [
                                {
                                  "additionalProperties": false,
                                  "nullable": true,
                                  "title": "Off",
                                  "type": "object"
                                },
                                {
                                  "nullable": true,
                                  "properties": {
                                    "semver": {
                                      "description": "Use this filter if your image tags follow semantic versioning rules (MAJOR.MINOR.PATCH). E.g.: PATCH only: \"~1.1\", MINOR and PATCH only \"~1\", ALL \"*\"",
                                      "example": "PATCH only: \"~1.1\", MINOR and PATCH only \"~1\", ALL \"*\",  \">=1.2.3-0\"",
                                      "title": "Semver version pattern",
                                      "type": "string"
                                    },
                                    "tagMatcher": {
                                      "default": "semver",
                                      "enum": ["semver"],
                                      "type": "string"
                                    }
                                  },
                                  "required": ["semver"],
                                  "title": "Semver versioning",
                                  "type": "object"
                                },
                                {
                                  "additionalProperties": false,
                                  "properties": {
                                    "glob": {
                                      "description": "Use this filter if you want to make glob-style patterns. E.g.: \"main-v1.3.*\"",
                                      "example": "main-v1.3.*",
                                      "title": "Glob string pattern",
                                      "type": "string"
                                    },
                                    "tagMatcher": {
                                      "default": "glob",
                                      "enum": ["glob"],
                                      "type": "string"
                                    }
                                  },
                                  "required": ["glob"],
                                  "title": "Glob pattern matching",
                                  "type": "object"
                                }
                              ],
                              "title": "Continuous delivery"
                            },
                            "env": {
                              "title": "Environment variables",
                              "type": "array",
                              "nullable": true,
                              "items": {
                                "properties": {
                                  "name": {
                                    "type": "string",
                                    "pattern": "^[a-zA-Z0-9_]*$"
                                  },
                                  "value": {
                                    "type": "string",
                                    "maxLength": 131072
                                  }
                                },
                                "required": ["name", "value"],
                                "type": "object"
                              }
                            },
                            "image": {
                              "nullable": true,
                              "properties": {
                                "repository": {
                                  "description": "A container image repository.",
                                  "pattern": "^[a-z0-9]+(?:[/._-]{1,2}[a-z0-9]+)*$",
                                  "type": "string"
                                },
                                "tag": {
                                  "pattern": "[\\w][\\w.-]{0,127}",
                                  "type": "string"
                                }
                              },
                              "required": ["repository", "tag"],
                              "title": "Container image",
                              "type": "object"
                            },
                            "resources": {
                              "additionalProperties": false,
                              "description": "Compute resources for containers.",
                              "properties": {
                                "limits": {
                                  "description": "Requested resources (best effort).",
                                  "additionalProperties": false,
                                  "properties": {
                                    "cpu": {
                                      "description": "Amount of cores, or slice of cpu in millis.",
                                      "default": "50m",
                                      "example": ["1", "200m"],
                                      "pattern": "^([0-9]+\\.[0-9]{1,2})|([0-9]{2,3}m)?$",
                                      "type": "string"
                                    },
                                    "memory": {
                                      "description": "Amount of memory. Valid units are E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki.",
                                      "default": "64Mi",
                                      "example": ["1Mi", "0.5M"],
                                      "pattern": "^([0-9]+\\.)?[0-9]+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$",
                                      "type": "string"
                                    }
                                  },
                                  "required": ["cpu", "memory"],
                                  "type": "object"
                                },
                                "requests": {
                                  "description": "Requested resources (guaranteed).",
                                  "additionalProperties": false,
                                  "properties": {
                                    "cpu": {
                                      "description": "Amount of cores, or slice of cpu in millis.",
                                      "default": "50m",
                                      "example": ["1", "200m"],
                                      "pattern": "^([0-9]+\\.[0-9]{1,2})|([0-9]{2,3}m)?$",
                                      "type": "string"
                                    },
                                    "memory": {
                                      "description": "Amount of memory. Valid units are E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki.",
                                      "default": "64Mi",
                                      "example": ["1Mi", "0.5M"],
                                      "pattern": "^([0-9]+\\.)?[0-9]+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$",
                                      "type": "string"
                                    }
                                  },
                                  "required": ["cpu", "memory"],
                                  "type": "object"
                                }
                              },
                              "title": "Pod resources",
                              "type": "object"
                            },
                            "scaleToZero": {
                              "default": false,
                              "description": "Scales to zero after 60 seconds and needs approximately 8 seconds to start back up.",
                              "title": "Scale to zero",
                              "type": "boolean"
                            },
                            "secrets": {
                              "items": {
                                "properties": {
                                  "name": {
                                    "type": "string"
                                  },
                                  "entries": {
                                    "items": {
                                      "type": "string"
                                    },
                                    "title": "Entries",
                                    "type": "array",
                                    "uniqueItems": true
                                  }
                                },
                                "required": ["name"],
                                "type": "object"
                              },
                              "type": "array"
                            },
                            "serviceType": {
                              "default": "ksvc",
                              "enum": ["ksvc"],
                              "type": "string"
                            }
                          },
                          "title": "Knative service"
                        },
                        {
                          "properties": {
                            "serviceType": {
                              "default": "ksvcPredeployed",
                              "enum": ["ksvcPredeployed"],
                              "type": "string"
                            }
                          },
                          "required": ["serviceType"],
                          "title": "Existing Knative service",
                          "type": "object"
                        },
                        {
                          "properties": {
                            "serviceType": {
                              "default": "svcPredeployed",
                              "enum": ["svcPredeployed"],
                              "type": "string"
                            }
                          },
                          "required": ["serviceType"],
                          "title": "Existing Kubernetes service",
                          "type": "object"
                        }
                      ],
                      "title": "Type",
                      "type": "object"
                    },
                    "ingress": {
                      "oneOf": [
                        {
                          "additionalProperties": false,
                          "nullable": true,
                          "title": "Private",
                          "type": "object"
                        },
                        {
                          "properties": {
                            "useDefaultSubdomain": {
                              "default": true,
                              "description": "Use the team domain so that the URL reveals the owner.",
                              "title": "Use team domain (preferred)",
                              "type": "boolean"
                            },
                            "subdomain": {
                              "description": "A host that is used to set DNS 'A' records",
                              "nullable": true,
                              "title": "Host",
                              "type": "string",
                              "pattern": "^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9])$"
                            },
                            "domain": {
                              "description": "A managed DNS zone",
                              "title": "DNS Zone",
                              "type": "string"
                            },
                            "path": {
                              "description": "The path in the URL that the service should be mapped to (e.g. for microservices on one app/domain.)",
                              "title": "URL path",
                              "type": "string"
                            },
                            "forwardPath": {
                              "description": "Forward the URL path into the service (don't rewrite to /)",
                              "title": "Forward path",
                              "type": "boolean"
                            },
                            "hasSingleSignOn": {
                              "default": false,
                              "title": "Authenticate with Single Sign On",
                              "type": "boolean"
                            },
                            "hasCert": {
                              "default": false,
                              "description": "If true a certificate should exist already",
                              "title": "Already has a certificate",
                              "type": "boolean"
                            },
                            "certArn": {
                              "example": "arn:aws:acm:eu-central-1:xxx:certificate/xxx",
                              "title": "Certificate ARN",
                              "type": "string"
                            },
                            "certSelect": {
                              "default": true,
                              "title": "Select existing secret name",
                              "type": "boolean"
                            },
                            "certName": {
                              "example": "www-example-com",
                              "title": "Secret name",
                              "type": "string"
                            }
                          },
                          "required": ["domain", "subdomain"],
                          "title": "Public URL",
                          "type": "object"
                        }
                      ],
                      "title": "Exposure",
                      "x-acl": {
                        "team": ["read"]
                      }
                    },
                    "teamId": {
                      "type": "string",
                      "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                      "readOnly": true
                    }
                  },
                  "required": ["name", "teamId"],
                  "type": "object"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "409": {
            "description": "Resource already exists",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/services/{serviceId}": {
      "parameters": [
        {
          "name": "teamId",
          "in": "path",
          "description": "ID of team to return",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "serviceId",
          "in": "path",
          "description": "ID of the service",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "operationId": "getService",
        "description": "Get a service from a given team",
        "x-aclSchema": "Service",
        "responses": {
          "200": {
            "description": "Successfully obtained service configuration",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": {
                    "admin": ["delete-any", "read-any", "create-any", "update-any"],
                    "team": ["delete", "read", "create", "update"]
                  },
                  "x-externalDocsPath": "docs/configuring-services",
                  "properties": {
                    "enabled": {
                      "default": true,
                      "type": "boolean"
                    },
                    "id": {
                      "readOnly": true,
                      "type": "string"
                    },
                    "name": {
                      "type": "string",
                      "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                      "title": "Name",
                      "description": "A service name",
                      "example": "some-service"
                    },
                    "port": {
                      "description": "A service port",
                      "type": "integer",
                      "default": 80,
                      "minimum": 1,
                      "maximum": 65535
                    },
                    "ksvc": {
                      "oneOf": [
                        {
                          "nullable": true,
                          "properties": {
                            "annotations": {
                              "title": "Pod annotations",
                              "description": "Kubernetes annotations with arbitrary metadata",
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "name": {
                                    "type": "string",
                                    "pattern": "^((.){1,253}\\/)?(.){1,63}$"
                                  },
                                  "value": {
                                    "type": "string",
                                    "maxLength": 32767
                                  }
                                }
                              }
                            },
                            "autoCD": {
                              "description": "Deploys new images based on a tagging strategy",
                              "oneOf": [
                                {
                                  "additionalProperties": false,
                                  "nullable": true,
                                  "title": "Off",
                                  "type": "object"
                                },
                                {
                                  "nullable": true,
                                  "properties": {
                                    "semver": {
                                      "description": "Use this filter if your image tags follow semantic versioning rules (MAJOR.MINOR.PATCH). E.g.: PATCH only: \"~1.1\", MINOR and PATCH only \"~1\", ALL \"*\"",
                                      "example": "PATCH only: \"~1.1\", MINOR and PATCH only \"~1\", ALL \"*\",  \">=1.2.3-0\"",
                                      "title": "Semver version pattern",
                                      "type": "string"
                                    },
                                    "tagMatcher": {
                                      "default": "semver",
                                      "enum": ["semver"],
                                      "type": "string"
                                    }
                                  },
                                  "required": ["semver"],
                                  "title": "Semver versioning",
                                  "type": "object"
                                },
                                {
                                  "additionalProperties": false,
                                  "properties": {
                                    "glob": {
                                      "description": "Use this filter if you want to make glob-style patterns. E.g.: \"main-v1.3.*\"",
                                      "example": "main-v1.3.*",
                                      "title": "Glob string pattern",
                                      "type": "string"
                                    },
                                    "tagMatcher": {
                                      "default": "glob",
                                      "enum": ["glob"],
                                      "type": "string"
                                    }
                                  },
                                  "required": ["glob"],
                                  "title": "Glob pattern matching",
                                  "type": "object"
                                }
                              ],
                              "title": "Continuous delivery"
                            },
                            "env": {
                              "title": "Environment variables",
                              "type": "array",
                              "nullable": true,
                              "items": {
                                "properties": {
                                  "name": {
                                    "type": "string",
                                    "pattern": "^[a-zA-Z0-9_]*$"
                                  },
                                  "value": {
                                    "type": "string",
                                    "maxLength": 131072
                                  }
                                },
                                "required": ["name", "value"],
                                "type": "object"
                              }
                            },
                            "image": {
                              "nullable": true,
                              "properties": {
                                "repository": {
                                  "description": "A container image repository.",
                                  "pattern": "^[a-z0-9]+(?:[/._-]{1,2}[a-z0-9]+)*$",
                                  "type": "string"
                                },
                                "tag": {
                                  "pattern": "[\\w][\\w.-]{0,127}",
                                  "type": "string"
                                }
                              },
                              "required": ["repository", "tag"],
                              "title": "Container image",
                              "type": "object"
                            },
                            "resources": {
                              "additionalProperties": false,
                              "description": "Compute resources for containers.",
                              "properties": {
                                "limits": {
                                  "description": "Requested resources (best effort).",
                                  "additionalProperties": false,
                                  "properties": {
                                    "cpu": {
                                      "description": "Amount of cores, or slice of cpu in millis.",
                                      "default": "50m",
                                      "example": ["1", "200m"],
                                      "pattern": "^([0-9]+\\.[0-9]{1,2})|([0-9]{2,3}m)?$",
                                      "type": "string"
                                    },
                                    "memory": {
                                      "description": "Amount of memory. Valid units are E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki.",
                                      "default": "64Mi",
                                      "example": ["1Mi", "0.5M"],
                                      "pattern": "^([0-9]+\\.)?[0-9]+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$",
                                      "type": "string"
                                    }
                                  },
                                  "required": ["cpu", "memory"],
                                  "type": "object"
                                },
                                "requests": {
                                  "description": "Requested resources (guaranteed).",
                                  "additionalProperties": false,
                                  "properties": {
                                    "cpu": {
                                      "description": "Amount of cores, or slice of cpu in millis.",
                                      "default": "50m",
                                      "example": ["1", "200m"],
                                      "pattern": "^([0-9]+\\.[0-9]{1,2})|([0-9]{2,3}m)?$",
                                      "type": "string"
                                    },
                                    "memory": {
                                      "description": "Amount of memory. Valid units are E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki.",
                                      "default": "64Mi",
                                      "example": ["1Mi", "0.5M"],
                                      "pattern": "^([0-9]+\\.)?[0-9]+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$",
                                      "type": "string"
                                    }
                                  },
                                  "required": ["cpu", "memory"],
                                  "type": "object"
                                }
                              },
                              "title": "Pod resources",
                              "type": "object"
                            },
                            "scaleToZero": {
                              "default": false,
                              "description": "Scales to zero after 60 seconds and needs approximately 8 seconds to start back up.",
                              "title": "Scale to zero",
                              "type": "boolean"
                            },
                            "secrets": {
                              "items": {
                                "properties": {
                                  "name": {
                                    "type": "string"
                                  },
                                  "entries": {
                                    "items": {
                                      "type": "string"
                                    },
                                    "title": "Entries",
                                    "type": "array",
                                    "uniqueItems": true
                                  }
                                },
                                "required": ["name"],
                                "type": "object"
                              },
                              "type": "array"
                            },
                            "serviceType": {
                              "default": "ksvc",
                              "enum": ["ksvc"],
                              "type": "string"
                            }
                          },
                          "title": "Knative service"
                        },
                        {
                          "properties": {
                            "serviceType": {
                              "default": "ksvcPredeployed",
                              "enum": ["ksvcPredeployed"],
                              "type": "string"
                            }
                          },
                          "required": ["serviceType"],
                          "title": "Existing Knative service",
                          "type": "object"
                        },
                        {
                          "properties": {
                            "serviceType": {
                              "default": "svcPredeployed",
                              "enum": ["svcPredeployed"],
                              "type": "string"
                            }
                          },
                          "required": ["serviceType"],
                          "title": "Existing Kubernetes service",
                          "type": "object"
                        }
                      ],
                      "title": "Type",
                      "type": "object"
                    },
                    "ingress": {
                      "oneOf": [
                        {
                          "additionalProperties": false,
                          "nullable": true,
                          "title": "Private",
                          "type": "object"
                        },
                        {
                          "properties": {
                            "useDefaultSubdomain": {
                              "default": true,
                              "description": "Use the team domain so that the URL reveals the owner.",
                              "title": "Use team domain (preferred)",
                              "type": "boolean"
                            },
                            "subdomain": {
                              "description": "A host that is used to set DNS 'A' records",
                              "nullable": true,
                              "title": "Host",
                              "type": "string",
                              "pattern": "^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9])$"
                            },
                            "domain": {
                              "description": "A managed DNS zone",
                              "title": "DNS Zone",
                              "type": "string"
                            },
                            "path": {
                              "description": "The path in the URL that the service should be mapped to (e.g. for microservices on one app/domain.)",
                              "title": "URL path",
                              "type": "string"
                            },
                            "forwardPath": {
                              "description": "Forward the URL path into the service (don't rewrite to /)",
                              "title": "Forward path",
                              "type": "boolean"
                            },
                            "hasSingleSignOn": {
                              "default": false,
                              "title": "Authenticate with Single Sign On",
                              "type": "boolean"
                            },
                            "hasCert": {
                              "default": false,
                              "description": "If true a certificate should exist already",
                              "title": "Already has a certificate",
                              "type": "boolean"
                            },
                            "certArn": {
                              "example": "arn:aws:acm:eu-central-1:xxx:certificate/xxx",
                              "title": "Certificate ARN",
                              "type": "string"
                            },
                            "certSelect": {
                              "default": true,
                              "title": "Select existing secret name",
                              "type": "boolean"
                            },
                            "certName": {
                              "example": "www-example-com",
                              "title": "Secret name",
                              "type": "string"
                            }
                          },
                          "required": ["domain", "subdomain"],
                          "title": "Public URL",
                          "type": "object"
                        }
                      ],
                      "title": "Exposure",
                      "x-acl": {
                        "team": ["read"]
                      }
                    },
                    "teamId": {
                      "type": "string",
                      "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                      "readOnly": true
                    }
                  },
                  "required": ["name", "teamId"],
                  "type": "object"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "404": {
            "description": "Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "put": {
        "operationId": "editService",
        "description": "Edit a service from a given team",
        "x-aclSchema": "Service",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "x-acl": {
                  "admin": ["delete-any", "read-any", "create-any", "update-any"],
                  "team": ["delete", "read", "create", "update"]
                },
                "x-externalDocsPath": "docs/configuring-services",
                "properties": {
                  "enabled": {
                    "default": true,
                    "type": "boolean"
                  },
                  "id": {
                    "readOnly": true,
                    "type": "string"
                  },
                  "name": {
                    "type": "string",
                    "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                    "title": "Name",
                    "description": "A service name",
                    "example": "some-service"
                  },
                  "port": {
                    "description": "A service port",
                    "type": "integer",
                    "default": 80,
                    "minimum": 1,
                    "maximum": 65535
                  },
                  "ksvc": {
                    "oneOf": [
                      {
                        "nullable": true,
                        "properties": {
                          "annotations": {
                            "title": "Pod annotations",
                            "description": "Kubernetes annotations with arbitrary metadata",
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "name": {
                                  "type": "string",
                                  "pattern": "^((.){1,253}\\/)?(.){1,63}$"
                                },
                                "value": {
                                  "type": "string",
                                  "maxLength": 32767
                                }
                              }
                            }
                          },
                          "autoCD": {
                            "description": "Deploys new images based on a tagging strategy",
                            "oneOf": [
                              {
                                "additionalProperties": false,
                                "nullable": true,
                                "title": "Off",
                                "type": "object"
                              },
                              {
                                "nullable": true,
                                "properties": {
                                  "semver": {
                                    "description": "Use this filter if your image tags follow semantic versioning rules (MAJOR.MINOR.PATCH). E.g.: PATCH only: \"~1.1\", MINOR and PATCH only \"~1\", ALL \"*\"",
                                    "example": "PATCH only: \"~1.1\", MINOR and PATCH only \"~1\", ALL \"*\",  \">=1.2.3-0\"",
                                    "title": "Semver version pattern",
                                    "type": "string"
                                  },
                                  "tagMatcher": {
                                    "default": "semver",
                                    "enum": ["semver"],
                                    "type": "string"
                                  }
                                },
                                "required": ["semver"],
                                "title": "Semver versioning",
                                "type": "object"
                              },
                              {
                                "additionalProperties": false,
                                "properties": {
                                  "glob": {
                                    "description": "Use this filter if you want to make glob-style patterns. E.g.: \"main-v1.3.*\"",
                                    "example": "main-v1.3.*",
                                    "title": "Glob string pattern",
                                    "type": "string"
                                  },
                                  "tagMatcher": {
                                    "default": "glob",
                                    "enum": ["glob"],
                                    "type": "string"
                                  }
                                },
                                "required": ["glob"],
                                "title": "Glob pattern matching",
                                "type": "object"
                              }
                            ],
                            "title": "Continuous delivery"
                          },
                          "env": {
                            "title": "Environment variables",
                            "type": "array",
                            "nullable": true,
                            "items": {
                              "properties": {
                                "name": {
                                  "type": "string",
                                  "pattern": "^[a-zA-Z0-9_]*$"
                                },
                                "value": {
                                  "type": "string",
                                  "maxLength": 131072
                                }
                              },
                              "required": ["name", "value"],
                              "type": "object"
                            }
                          },
                          "image": {
                            "nullable": true,
                            "properties": {
                              "repository": {
                                "description": "A container image repository.",
                                "pattern": "^[a-z0-9]+(?:[/._-]{1,2}[a-z0-9]+)*$",
                                "type": "string"
                              },
                              "tag": {
                                "pattern": "[\\w][\\w.-]{0,127}",
                                "type": "string"
                              }
                            },
                            "required": ["repository", "tag"],
                            "title": "Container image",
                            "type": "object"
                          },
                          "resources": {
                            "additionalProperties": false,
                            "description": "Compute resources for containers.",
                            "properties": {
                              "limits": {
                                "description": "Requested resources (best effort).",
                                "additionalProperties": false,
                                "properties": {
                                  "cpu": {
                                    "description": "Amount of cores, or slice of cpu in millis.",
                                    "default": "50m",
                                    "example": ["1", "200m"],
                                    "pattern": "^([0-9]+\\.[0-9]{1,2})|([0-9]{2,3}m)?$",
                                    "type": "string"
                                  },
                                  "memory": {
                                    "description": "Amount of memory. Valid units are E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki.",
                                    "default": "64Mi",
                                    "example": ["1Mi", "0.5M"],
                                    "pattern": "^([0-9]+\\.)?[0-9]+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$",
                                    "type": "string"
                                  }
                                },
                                "required": ["cpu", "memory"],
                                "type": "object"
                              },
                              "requests": {
                                "description": "Requested resources (guaranteed).",
                                "additionalProperties": false,
                                "properties": {
                                  "cpu": {
                                    "description": "Amount of cores, or slice of cpu in millis.",
                                    "default": "50m",
                                    "example": ["1", "200m"],
                                    "pattern": "^([0-9]+\\.[0-9]{1,2})|([0-9]{2,3}m)?$",
                                    "type": "string"
                                  },
                                  "memory": {
                                    "description": "Amount of memory. Valid units are E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki.",
                                    "default": "64Mi",
                                    "example": ["1Mi", "0.5M"],
                                    "pattern": "^([0-9]+\\.)?[0-9]+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$",
                                    "type": "string"
                                  }
                                },
                                "required": ["cpu", "memory"],
                                "type": "object"
                              }
                            },
                            "title": "Pod resources",
                            "type": "object"
                          },
                          "scaleToZero": {
                            "default": false,
                            "description": "Scales to zero after 60 seconds and needs approximately 8 seconds to start back up.",
                            "title": "Scale to zero",
                            "type": "boolean"
                          },
                          "secrets": {
                            "items": {
                              "properties": {
                                "name": {
                                  "type": "string"
                                },
                                "entries": {
                                  "items": {
                                    "type": "string"
                                  },
                                  "title": "Entries",
                                  "type": "array",
                                  "uniqueItems": true
                                }
                              },
                              "required": ["name"],
                              "type": "object"
                            },
                            "type": "array"
                          },
                          "serviceType": {
                            "default": "ksvc",
                            "enum": ["ksvc"],
                            "type": "string"
                          }
                        },
                        "title": "Knative service"
                      },
                      {
                        "properties": {
                          "serviceType": {
                            "default": "ksvcPredeployed",
                            "enum": ["ksvcPredeployed"],
                            "type": "string"
                          }
                        },
                        "required": ["serviceType"],
                        "title": "Existing Knative service",
                        "type": "object"
                      },
                      {
                        "properties": {
                          "serviceType": {
                            "default": "svcPredeployed",
                            "enum": ["svcPredeployed"],
                            "type": "string"
                          }
                        },
                        "required": ["serviceType"],
                        "title": "Existing Kubernetes service",
                        "type": "object"
                      }
                    ],
                    "title": "Type",
                    "type": "object"
                  },
                  "ingress": {
                    "oneOf": [
                      {
                        "additionalProperties": false,
                        "nullable": true,
                        "title": "Private",
                        "type": "object"
                      },
                      {
                        "properties": {
                          "useDefaultSubdomain": {
                            "default": true,
                            "description": "Use the team domain so that the URL reveals the owner.",
                            "title": "Use team domain (preferred)",
                            "type": "boolean"
                          },
                          "subdomain": {
                            "description": "A host that is used to set DNS 'A' records",
                            "nullable": true,
                            "title": "Host",
                            "type": "string",
                            "pattern": "^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9])$"
                          },
                          "domain": {
                            "description": "A managed DNS zone",
                            "title": "DNS Zone",
                            "type": "string"
                          },
                          "path": {
                            "description": "The path in the URL that the service should be mapped to (e.g. for microservices on one app/domain.)",
                            "title": "URL path",
                            "type": "string"
                          },
                          "forwardPath": {
                            "description": "Forward the URL path into the service (don't rewrite to /)",
                            "title": "Forward path",
                            "type": "boolean"
                          },
                          "hasSingleSignOn": {
                            "default": false,
                            "title": "Authenticate with Single Sign On",
                            "type": "boolean"
                          },
                          "hasCert": {
                            "default": false,
                            "description": "If true a certificate should exist already",
                            "title": "Already has a certificate",
                            "type": "boolean"
                          },
                          "certArn": {
                            "example": "arn:aws:acm:eu-central-1:xxx:certificate/xxx",
                            "title": "Certificate ARN",
                            "type": "string"
                          },
                          "certSelect": {
                            "default": true,
                            "title": "Select existing secret name",
                            "type": "boolean"
                          },
                          "certName": {
                            "example": "www-example-com",
                            "title": "Secret name",
                            "type": "string"
                          }
                        },
                        "required": ["domain", "subdomain"],
                        "title": "Public URL",
                        "type": "object"
                      }
                    ],
                    "title": "Exposure",
                    "x-acl": {
                      "team": ["read"]
                    }
                  },
                  "teamId": {
                    "type": "string",
                    "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                    "readOnly": true
                  }
                },
                "required": ["name", "teamId"],
                "type": "object"
              }
            }
          },
          "description": "Service object that contains updated values",
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully edited service",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": {
                    "admin": ["delete-any", "read-any", "create-any", "update-any"],
                    "team": ["delete", "read", "create", "update"]
                  },
                  "x-externalDocsPath": "docs/configuring-services",
                  "properties": {
                    "enabled": {
                      "default": true,
                      "type": "boolean"
                    },
                    "id": {
                      "readOnly": true,
                      "type": "string"
                    },
                    "name": {
                      "type": "string",
                      "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                      "title": "Name",
                      "description": "A service name",
                      "example": "some-service"
                    },
                    "port": {
                      "description": "A service port",
                      "type": "integer",
                      "default": 80,
                      "minimum": 1,
                      "maximum": 65535
                    },
                    "ksvc": {
                      "oneOf": [
                        {
                          "nullable": true,
                          "properties": {
                            "annotations": {
                              "title": "Pod annotations",
                              "description": "Kubernetes annotations with arbitrary metadata",
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "name": {
                                    "type": "string",
                                    "pattern": "^((.){1,253}\\/)?(.){1,63}$"
                                  },
                                  "value": {
                                    "type": "string",
                                    "maxLength": 32767
                                  }
                                }
                              }
                            },
                            "autoCD": {
                              "description": "Deploys new images based on a tagging strategy",
                              "oneOf": [
                                {
                                  "additionalProperties": false,
                                  "nullable": true,
                                  "title": "Off",
                                  "type": "object"
                                },
                                {
                                  "nullable": true,
                                  "properties": {
                                    "semver": {
                                      "description": "Use this filter if your image tags follow semantic versioning rules (MAJOR.MINOR.PATCH). E.g.: PATCH only: \"~1.1\", MINOR and PATCH only \"~1\", ALL \"*\"",
                                      "example": "PATCH only: \"~1.1\", MINOR and PATCH only \"~1\", ALL \"*\",  \">=1.2.3-0\"",
                                      "title": "Semver version pattern",
                                      "type": "string"
                                    },
                                    "tagMatcher": {
                                      "default": "semver",
                                      "enum": ["semver"],
                                      "type": "string"
                                    }
                                  },
                                  "required": ["semver"],
                                  "title": "Semver versioning",
                                  "type": "object"
                                },
                                {
                                  "additionalProperties": false,
                                  "properties": {
                                    "glob": {
                                      "description": "Use this filter if you want to make glob-style patterns. E.g.: \"main-v1.3.*\"",
                                      "example": "main-v1.3.*",
                                      "title": "Glob string pattern",
                                      "type": "string"
                                    },
                                    "tagMatcher": {
                                      "default": "glob",
                                      "enum": ["glob"],
                                      "type": "string"
                                    }
                                  },
                                  "required": ["glob"],
                                  "title": "Glob pattern matching",
                                  "type": "object"
                                }
                              ],
                              "title": "Continuous delivery"
                            },
                            "env": {
                              "title": "Environment variables",
                              "type": "array",
                              "nullable": true,
                              "items": {
                                "properties": {
                                  "name": {
                                    "type": "string",
                                    "pattern": "^[a-zA-Z0-9_]*$"
                                  },
                                  "value": {
                                    "type": "string",
                                    "maxLength": 131072
                                  }
                                },
                                "required": ["name", "value"],
                                "type": "object"
                              }
                            },
                            "image": {
                              "nullable": true,
                              "properties": {
                                "repository": {
                                  "description": "A container image repository.",
                                  "pattern": "^[a-z0-9]+(?:[/._-]{1,2}[a-z0-9]+)*$",
                                  "type": "string"
                                },
                                "tag": {
                                  "pattern": "[\\w][\\w.-]{0,127}",
                                  "type": "string"
                                }
                              },
                              "required": ["repository", "tag"],
                              "title": "Container image",
                              "type": "object"
                            },
                            "resources": {
                              "additionalProperties": false,
                              "description": "Compute resources for containers.",
                              "properties": {
                                "limits": {
                                  "description": "Requested resources (best effort).",
                                  "additionalProperties": false,
                                  "properties": {
                                    "cpu": {
                                      "description": "Amount of cores, or slice of cpu in millis.",
                                      "default": "50m",
                                      "example": ["1", "200m"],
                                      "pattern": "^([0-9]+\\.[0-9]{1,2})|([0-9]{2,3}m)?$",
                                      "type": "string"
                                    },
                                    "memory": {
                                      "description": "Amount of memory. Valid units are E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki.",
                                      "default": "64Mi",
                                      "example": ["1Mi", "0.5M"],
                                      "pattern": "^([0-9]+\\.)?[0-9]+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$",
                                      "type": "string"
                                    }
                                  },
                                  "required": ["cpu", "memory"],
                                  "type": "object"
                                },
                                "requests": {
                                  "description": "Requested resources (guaranteed).",
                                  "additionalProperties": false,
                                  "properties": {
                                    "cpu": {
                                      "description": "Amount of cores, or slice of cpu in millis.",
                                      "default": "50m",
                                      "example": ["1", "200m"],
                                      "pattern": "^([0-9]+\\.[0-9]{1,2})|([0-9]{2,3}m)?$",
                                      "type": "string"
                                    },
                                    "memory": {
                                      "description": "Amount of memory. Valid units are E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki.",
                                      "default": "64Mi",
                                      "example": ["1Mi", "0.5M"],
                                      "pattern": "^([0-9]+\\.)?[0-9]+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$",
                                      "type": "string"
                                    }
                                  },
                                  "required": ["cpu", "memory"],
                                  "type": "object"
                                }
                              },
                              "title": "Pod resources",
                              "type": "object"
                            },
                            "scaleToZero": {
                              "default": false,
                              "description": "Scales to zero after 60 seconds and needs approximately 8 seconds to start back up.",
                              "title": "Scale to zero",
                              "type": "boolean"
                            },
                            "secrets": {
                              "items": {
                                "properties": {
                                  "name": {
                                    "type": "string"
                                  },
                                  "entries": {
                                    "items": {
                                      "type": "string"
                                    },
                                    "title": "Entries",
                                    "type": "array",
                                    "uniqueItems": true
                                  }
                                },
                                "required": ["name"],
                                "type": "object"
                              },
                              "type": "array"
                            },
                            "serviceType": {
                              "default": "ksvc",
                              "enum": ["ksvc"],
                              "type": "string"
                            }
                          },
                          "title": "Knative service"
                        },
                        {
                          "properties": {
                            "serviceType": {
                              "default": "ksvcPredeployed",
                              "enum": ["ksvcPredeployed"],
                              "type": "string"
                            }
                          },
                          "required": ["serviceType"],
                          "title": "Existing Knative service",
                          "type": "object"
                        },
                        {
                          "properties": {
                            "serviceType": {
                              "default": "svcPredeployed",
                              "enum": ["svcPredeployed"],
                              "type": "string"
                            }
                          },
                          "required": ["serviceType"],
                          "title": "Existing Kubernetes service",
                          "type": "object"
                        }
                      ],
                      "title": "Type",
                      "type": "object"
                    },
                    "ingress": {
                      "oneOf": [
                        {
                          "additionalProperties": false,
                          "nullable": true,
                          "title": "Private",
                          "type": "object"
                        },
                        {
                          "properties": {
                            "useDefaultSubdomain": {
                              "default": true,
                              "description": "Use the team domain so that the URL reveals the owner.",
                              "title": "Use team domain (preferred)",
                              "type": "boolean"
                            },
                            "subdomain": {
                              "description": "A host that is used to set DNS 'A' records",
                              "nullable": true,
                              "title": "Host",
                              "type": "string",
                              "pattern": "^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9])$"
                            },
                            "domain": {
                              "description": "A managed DNS zone",
                              "title": "DNS Zone",
                              "type": "string"
                            },
                            "path": {
                              "description": "The path in the URL that the service should be mapped to (e.g. for microservices on one app/domain.)",
                              "title": "URL path",
                              "type": "string"
                            },
                            "forwardPath": {
                              "description": "Forward the URL path into the service (don't rewrite to /)",
                              "title": "Forward path",
                              "type": "boolean"
                            },
                            "hasSingleSignOn": {
                              "default": false,
                              "title": "Authenticate with Single Sign On",
                              "type": "boolean"
                            },
                            "hasCert": {
                              "default": false,
                              "description": "If true a certificate should exist already",
                              "title": "Already has a certificate",
                              "type": "boolean"
                            },
                            "certArn": {
                              "example": "arn:aws:acm:eu-central-1:xxx:certificate/xxx",
                              "title": "Certificate ARN",
                              "type": "string"
                            },
                            "certSelect": {
                              "default": true,
                              "title": "Select existing secret name",
                              "type": "boolean"
                            },
                            "certName": {
                              "example": "www-example-com",
                              "title": "Secret name",
                              "type": "string"
                            }
                          },
                          "required": ["domain", "subdomain"],
                          "title": "Public URL",
                          "type": "object"
                        }
                      ],
                      "title": "Exposure",
                      "x-acl": {
                        "team": ["read"]
                      }
                    },
                    "teamId": {
                      "type": "string",
                      "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                      "readOnly": true
                    }
                  },
                  "required": ["name", "teamId"],
                  "type": "object"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "404": {
            "description": "Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "delete": {
        "operationId": "deleteService",
        "description": "Delete a service from a given team",
        "x-aclSchema": "Service",
        "responses": {
          "200": {
            "description": "Successfully deleted a service"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "404": {
            "description": "Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/secrets": {
      "parameters": [
        {
          "name": "teamId",
          "in": "path",
          "description": "ID of team to return",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "operationId": "getSecrets",
        "description": "Get secrets from a given team",
        "x-aclSchema": "Secret",
        "responses": {
          "200": {
            "description": "Successfully obtained secrets",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "x-acl": {
                      "admin": ["read-any", "create-any", "update-any", "delete-any"],
                      "team": ["read", "create", "update", "delete"]
                    },
                    "properties": {
                      "id": {
                        "readOnly": true,
                        "type": "string"
                      },
                      "name": {
                        "type": "string",
                        "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$",
                        "title": "Name",
                        "description": "A secret name",
                        "example": "secret01"
                      }
                    },
                    "required": ["name"],
                    "oneOf": [
                      {
                        "title": "Generic",
                        "properties": {
                          "type": {
                            "default": "generic",
                            "enum": ["generic"]
                          },
                          "entries": {
                            "type": "array",
                            "items": {
                              "description": "A property name at vaultPath",
                              "minItems": 1,
                              "pattern": "^[a-zA-Z0-9_]*$",
                              "type": "string",
                              "uniqueItems": true
                            }
                          }
                        },
                        "required": ["type", "entries"],
                        "type": "object"
                      },
                      {
                        "title": "Docker registry",
                        "properties": {
                          "type": {
                            "default": "docker-registry",
                            "enum": ["docker-registry"],
                            "type": "string"
                          },
                          "dockerconfig": {
                            "type": "string",
                            "enum": [".dockerconfig.json"],
                            "default": ".dockerconfig.json",
                            "readOnly": true
                          }
                        },
                        "required": ["type"],
                        "type": "object"
                      },
                      {
                        "title": "TLS",
                        "properties": {
                          "type": {
                            "default": "tls",
                            "enum": ["tls"],
                            "type": "string"
                          },
                          "crt": {
                            "type": "string",
                            "default": "tls.crt",
                            "description": "A Vault property name that contains PEM public key certificate"
                          },
                          "key": {
                            "type": "string",
                            "default": "tls.key",
                            "description": "A Vault property name that contains PEM private key certificate"
                          },
                          "ca": {
                            "type": "string",
                            "title": "CA",
                            "description": "A Vault property name that contains CA certificate content"
                          }
                        },
                        "required": ["type", "crt", "key"],
                        "type": "object"
                      }
                    ],
                    "type": "object"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "post": {
        "operationId": "createSecret",
        "description": "Create a team secret",
        "x-aclSchema": "Secret",
        "parameters": [
          {
            "name": "teamId",
            "in": "path",
            "description": "ID of team",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "x-acl": {
                  "admin": ["read-any", "create-any", "update-any", "delete-any"],
                  "team": ["read", "create", "update", "delete"]
                },
                "properties": {
                  "id": {
                    "readOnly": true,
                    "type": "string"
                  },
                  "name": {
                    "type": "string",
                    "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$",
                    "title": "Name",
                    "description": "A secret name",
                    "example": "secret01"
                  }
                },
                "required": ["name"],
                "oneOf": [
                  {
                    "title": "Generic",
                    "properties": {
                      "type": {
                        "default": "generic",
                        "enum": ["generic"]
                      },
                      "entries": {
                        "type": "array",
                        "items": {
                          "description": "A property name at vaultPath",
                          "minItems": 1,
                          "pattern": "^[a-zA-Z0-9_]*$",
                          "type": "string",
                          "uniqueItems": true
                        }
                      }
                    },
                    "required": ["type", "entries"],
                    "type": "object"
                  },
                  {
                    "title": "Docker registry",
                    "properties": {
                      "type": {
                        "default": "docker-registry",
                        "enum": ["docker-registry"],
                        "type": "string"
                      },
                      "dockerconfig": {
                        "type": "string",
                        "enum": [".dockerconfig.json"],
                        "default": ".dockerconfig.json",
                        "readOnly": true
                      }
                    },
                    "required": ["type"],
                    "type": "object"
                  },
                  {
                    "title": "TLS",
                    "properties": {
                      "type": {
                        "default": "tls",
                        "enum": ["tls"],
                        "type": "string"
                      },
                      "crt": {
                        "type": "string",
                        "default": "tls.crt",
                        "description": "A Vault property name that contains PEM public key certificate"
                      },
                      "key": {
                        "type": "string",
                        "default": "tls.key",
                        "description": "A Vault property name that contains PEM private key certificate"
                      },
                      "ca": {
                        "type": "string",
                        "title": "CA",
                        "description": "A Vault property name that contains CA certificate content"
                      }
                    },
                    "required": ["type", "crt", "key"],
                    "type": "object"
                  }
                ],
                "type": "object"
              }
            }
          },
          "description": "Service object",
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully stored secret configuration",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": {
                    "admin": ["read-any", "create-any", "update-any", "delete-any"],
                    "team": ["read", "create", "update", "delete"]
                  },
                  "properties": {
                    "id": {
                      "readOnly": true,
                      "type": "string"
                    },
                    "name": {
                      "type": "string",
                      "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$",
                      "title": "Name",
                      "description": "A secret name",
                      "example": "secret01"
                    }
                  },
                  "required": ["name"],
                  "oneOf": [
                    {
                      "title": "Generic",
                      "properties": {
                        "type": {
                          "default": "generic",
                          "enum": ["generic"]
                        },
                        "entries": {
                          "type": "array",
                          "items": {
                            "description": "A property name at vaultPath",
                            "minItems": 1,
                            "pattern": "^[a-zA-Z0-9_]*$",
                            "type": "string",
                            "uniqueItems": true
                          }
                        }
                      },
                      "required": ["type", "entries"],
                      "type": "object"
                    },
                    {
                      "title": "Docker registry",
                      "properties": {
                        "type": {
                          "default": "docker-registry",
                          "enum": ["docker-registry"],
                          "type": "string"
                        },
                        "dockerconfig": {
                          "type": "string",
                          "enum": [".dockerconfig.json"],
                          "default": ".dockerconfig.json",
                          "readOnly": true
                        }
                      },
                      "required": ["type"],
                      "type": "object"
                    },
                    {
                      "title": "TLS",
                      "properties": {
                        "type": {
                          "default": "tls",
                          "enum": ["tls"],
                          "type": "string"
                        },
                        "crt": {
                          "type": "string",
                          "default": "tls.crt",
                          "description": "A Vault property name that contains PEM public key certificate"
                        },
                        "key": {
                          "type": "string",
                          "default": "tls.key",
                          "description": "A Vault property name that contains PEM private key certificate"
                        },
                        "ca": {
                          "type": "string",
                          "title": "CA",
                          "description": "A Vault property name that contains CA certificate content"
                        }
                      },
                      "required": ["type", "crt", "key"],
                      "type": "object"
                    }
                  ],
                  "type": "object"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "409": {
            "description": "Resource already exists",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/teams/{teamId}/secrets/{secretId}": {
      "parameters": [
        {
          "name": "teamId",
          "in": "path",
          "description": "ID of team to return",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "secretId",
          "in": "path",
          "description": "ID of the secret",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "operationId": "getSecret",
        "description": "Get a secret from a given team",
        "x-aclSchema": "Secret",
        "responses": {
          "200": {
            "description": "Successfully obtained secret configuration",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": {
                    "admin": ["read-any", "create-any", "update-any", "delete-any"],
                    "team": ["read", "create", "update", "delete"]
                  },
                  "properties": {
                    "id": {
                      "readOnly": true,
                      "type": "string"
                    },
                    "name": {
                      "type": "string",
                      "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$",
                      "title": "Name",
                      "description": "A secret name",
                      "example": "secret01"
                    }
                  },
                  "required": ["name"],
                  "oneOf": [
                    {
                      "title": "Generic",
                      "properties": {
                        "type": {
                          "default": "generic",
                          "enum": ["generic"]
                        },
                        "entries": {
                          "type": "array",
                          "items": {
                            "description": "A property name at vaultPath",
                            "minItems": 1,
                            "pattern": "^[a-zA-Z0-9_]*$",
                            "type": "string",
                            "uniqueItems": true
                          }
                        }
                      },
                      "required": ["type", "entries"],
                      "type": "object"
                    },
                    {
                      "title": "Docker registry",
                      "properties": {
                        "type": {
                          "default": "docker-registry",
                          "enum": ["docker-registry"],
                          "type": "string"
                        },
                        "dockerconfig": {
                          "type": "string",
                          "enum": [".dockerconfig.json"],
                          "default": ".dockerconfig.json",
                          "readOnly": true
                        }
                      },
                      "required": ["type"],
                      "type": "object"
                    },
                    {
                      "title": "TLS",
                      "properties": {
                        "type": {
                          "default": "tls",
                          "enum": ["tls"],
                          "type": "string"
                        },
                        "crt": {
                          "type": "string",
                          "default": "tls.crt",
                          "description": "A Vault property name that contains PEM public key certificate"
                        },
                        "key": {
                          "type": "string",
                          "default": "tls.key",
                          "description": "A Vault property name that contains PEM private key certificate"
                        },
                        "ca": {
                          "type": "string",
                          "title": "CA",
                          "description": "A Vault property name that contains CA certificate content"
                        }
                      },
                      "required": ["type", "crt", "key"],
                      "type": "object"
                    }
                  ],
                  "type": "object"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "404": {
            "description": "Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "put": {
        "operationId": "editSecret",
        "description": "Edit a secret from a given team",
        "x-aclSchema": "Secret",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "x-acl": {
                  "admin": ["read-any", "create-any", "update-any", "delete-any"],
                  "team": ["read", "create", "update", "delete"]
                },
                "properties": {
                  "id": {
                    "readOnly": true,
                    "type": "string"
                  },
                  "name": {
                    "type": "string",
                    "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$",
                    "title": "Name",
                    "description": "A secret name",
                    "example": "secret01"
                  }
                },
                "required": ["name"],
                "oneOf": [
                  {
                    "title": "Generic",
                    "properties": {
                      "type": {
                        "default": "generic",
                        "enum": ["generic"]
                      },
                      "entries": {
                        "type": "array",
                        "items": {
                          "description": "A property name at vaultPath",
                          "minItems": 1,
                          "pattern": "^[a-zA-Z0-9_]*$",
                          "type": "string",
                          "uniqueItems": true
                        }
                      }
                    },
                    "required": ["type", "entries"],
                    "type": "object"
                  },
                  {
                    "title": "Docker registry",
                    "properties": {
                      "type": {
                        "default": "docker-registry",
                        "enum": ["docker-registry"],
                        "type": "string"
                      },
                      "dockerconfig": {
                        "type": "string",
                        "enum": [".dockerconfig.json"],
                        "default": ".dockerconfig.json",
                        "readOnly": true
                      }
                    },
                    "required": ["type"],
                    "type": "object"
                  },
                  {
                    "title": "TLS",
                    "properties": {
                      "type": {
                        "default": "tls",
                        "enum": ["tls"],
                        "type": "string"
                      },
                      "crt": {
                        "type": "string",
                        "default": "tls.crt",
                        "description": "A Vault property name that contains PEM public key certificate"
                      },
                      "key": {
                        "type": "string",
                        "default": "tls.key",
                        "description": "A Vault property name that contains PEM private key certificate"
                      },
                      "ca": {
                        "type": "string",
                        "title": "CA",
                        "description": "A Vault property name that contains CA certificate content"
                      }
                    },
                    "required": ["type", "crt", "key"],
                    "type": "object"
                  }
                ],
                "type": "object"
              }
            }
          },
          "description": "Secret object that contains updated values",
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully edited a team secret",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": {
                    "admin": ["read-any", "create-any", "update-any", "delete-any"],
                    "team": ["read", "create", "update", "delete"]
                  },
                  "properties": {
                    "id": {
                      "readOnly": true,
                      "type": "string"
                    },
                    "name": {
                      "type": "string",
                      "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$",
                      "title": "Name",
                      "description": "A secret name",
                      "example": "secret01"
                    }
                  },
                  "required": ["name"],
                  "oneOf": [
                    {
                      "title": "Generic",
                      "properties": {
                        "type": {
                          "default": "generic",
                          "enum": ["generic"]
                        },
                        "entries": {
                          "type": "array",
                          "items": {
                            "description": "A property name at vaultPath",
                            "minItems": 1,
                            "pattern": "^[a-zA-Z0-9_]*$",
                            "type": "string",
                            "uniqueItems": true
                          }
                        }
                      },
                      "required": ["type", "entries"],
                      "type": "object"
                    },
                    {
                      "title": "Docker registry",
                      "properties": {
                        "type": {
                          "default": "docker-registry",
                          "enum": ["docker-registry"],
                          "type": "string"
                        },
                        "dockerconfig": {
                          "type": "string",
                          "enum": [".dockerconfig.json"],
                          "default": ".dockerconfig.json",
                          "readOnly": true
                        }
                      },
                      "required": ["type"],
                      "type": "object"
                    },
                    {
                      "title": "TLS",
                      "properties": {
                        "type": {
                          "default": "tls",
                          "enum": ["tls"],
                          "type": "string"
                        },
                        "crt": {
                          "type": "string",
                          "default": "tls.crt",
                          "description": "A Vault property name that contains PEM public key certificate"
                        },
                        "key": {
                          "type": "string",
                          "default": "tls.key",
                          "description": "A Vault property name that contains PEM private key certificate"
                        },
                        "ca": {
                          "type": "string",
                          "title": "CA",
                          "description": "A Vault property name that contains CA certificate content"
                        }
                      },
                      "required": ["type", "crt", "key"],
                      "type": "object"
                    }
                  ],
                  "type": "object"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "404": {
            "description": "Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "delete": {
        "operationId": "deleteSecret",
        "description": "Delete a secret from a given team",
        "x-aclSchema": "Secret",
        "responses": {
          "200": {
            "description": "Successfully deleted a team secret"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "404": {
            "description": "Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/deploy": {
      "get": {
        "x-aclSchema": "Deployment",
        "operationId": "deploy",
        "description": "Trigger a deployment (only for admin)",
        "responses": {
          "202": {
            "description": "Deployment has been triggered",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "409": {
            "description": "Resource already exists",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/kubecfg/{teamId}": {
      "parameters": [
        {
          "name": "teamId",
          "in": "path",
          "description": "ID of team to return",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "operationId": "downloadKubecfg",
        "description": "Download a kubecfg for a team",
        "x-aclSchema": "Kubecfg",
        "responses": {
          "200": {
            "description": "Succesfully finished the download",
            "content": {
              "application/yaml": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "404": {
            "description": "Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/session": {
      "get": {
        "security": [],
        "operationId": "getSession",
        "description": "Get the session for the current user",
        "responses": {
          "200": {
            "description": "Get the session for the logged in user",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": {
                    "admin": ["read"],
                    "team": ["read"]
                  },
                  "properties": {
                    "cluster": {
                      "readOnly": true,
                      "properties": {
                        "apiName": {
                          "description": "Only used for API/UI to show in app.",
                          "type": "string",
                          "readOnly": true
                        },
                        "apiServer": {
                          "description": "Used by kubectl for local deployment to target cluster.",
                          "type": "string",
                          "readOnly": true
                        },
                        "entrypoint": {
                          "description": "A Kubernetes API public IP address (onprem only).",
                          "type": "string",
                          "readOnly": true
                        },
                        "k8sVersion": {
                          "readOnly": true,
                          "default": "1.19",
                          "description": "The cluster k8s version. Otomi supports 2 minor versions backwards compatibility from the suggested default.",
                          "enum": ["1.17", "1.18", "1.19"],
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "readOnly": true
                        },
                        "otomiVersion": {
                          "default": "latest",
                          "description": "Please pin this a valid release version found in the repo. Suggestion: try the most recent stable version.",
                          "type": "string"
                        },
                        "provider": {
                          "type": "string",
                          "enum": ["aws", "azure", "google", "oneprem"],
                          "readOnly": true
                        },
                        "region": {
                          "description": "Dependent on provider.",
                          "type": "string",
                          "readOnly": true
                        },
                        "vpcID": {
                          "description": "AWS only. If provided will override autodiscovery from metadata.",
                          "type": "string",
                          "readOnly": true
                        }
                      },
                      "required": ["otomiVersion"],
                      "type": "object"
                    },
                    "dns": {
                      "readOnly": true
                    },
                    "core": {
                      "readOnly": true
                    },
                    "isDirty": {
                      "type": "boolean",
                      "readOnly": true
                    },
                    "namespaces": {
                      "readOnly": true,
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "teams": {
                      "readOnly": true,
                      "type": "array",
                      "items": {
                        "properties": {
                          "id": {
                            "type": "string",
                            "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                            "title": "ID",
                            "x-acl": {
                              "admin": ["read"],
                              "team": ["read"]
                            }
                          },
                          "name": {
                            "type": "string",
                            "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                            "title": "Name",
                            "description": "A team name"
                          },
                          "oidc": {
                            "properties": {
                              "groupMapping": {
                                "description": "An OIDC group name/id granting access to this team",
                                "title": "Group mapping",
                                "type": "string"
                              }
                            },
                            "title": "OIDC",
                            "type": "object"
                          },
                          "password": {
                            "type": "string",
                            "writeOnly": true
                          },
                          "alerts": {
                            "properties": {
                              "email": {
                                "properties": {
                                  "critical": {
                                    "description": "Email addresses (comma separated) for critical events.",
                                    "title": "Criticals",
                                    "type": "string"
                                  },
                                  "nonCritical": {
                                    "description": "One or more email addresses (comma separated) for non-critical events.",
                                    "title": "Non criticals",
                                    "type": "string"
                                  }
                                },
                                "title": "Email",
                                "type": "object"
                              },
                              "msteams": {
                                "properties": {
                                  "highPrio": {
                                    "description": "The high prio web hook",
                                    "title": "High prio webhook",
                                    "type": "string"
                                  },
                                  "lowPrio": {
                                    "description": "The low prio web hook",
                                    "title": "Low prio webhook",
                                    "type": "string"
                                  }
                                },
                                "title": "Microsoft Teams",
                                "type": "object"
                              },
                              "receivers": {
                                "items": {
                                  "enum": ["slack", "msteams", "email"],
                                  "type": "string"
                                },
                                "title": "Receivers",
                                "type": "array",
                                "uniqueItems": true
                              },
                              "slack": {
                                "properties": {
                                  "channel": {
                                    "description": "Slack channel for non-criticals. If none is given the global one is used, which defaults to 'mon-otomi'.",
                                    "title": "Channel for non-criticals",
                                    "type": "string"
                                  },
                                  "channelCrit": {
                                    "description": "Slack channel for critical alerts. If none is given the global one is used, which defaults to 'mon-otomi-crit'.",
                                    "title": "Channel for criticals",
                                    "type": "string"
                                  },
                                  "url": {
                                    "description": "Slack web hook. If none is given the global one is used.",
                                    "title": "Web hook",
                                    "type": "string"
                                  }
                                },
                                "title": "Slack",
                                "type": "object"
                              }
                            },
                            "title": "Alerting endpoints",
                            "type": "object"
                          }
                        },
                        "required": ["name"],
                        "type": "object",
                        "x-acl": {
                          "admin": ["delete-any", "read-any", "create-any", "update-any"],
                          "team": ["read-any", "update"]
                        },
                        "x-externalDocsPath": "docs/configuring-teams"
                      }
                    },
                    "user": {
                      "readOnly": true,
                      "x-acl": {
                        "admin": [],
                        "team": []
                      },
                      "properties": {
                        "name": {
                          "type": "string",
                          "description": "A user name",
                          "readOnly": true
                        },
                        "email": {
                          "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
                          "type": "string"
                        },
                        "isAdmin": {
                          "type": "boolean",
                          "default": false,
                          "description": "If the user is admin",
                          "readOnly": true
                        },
                        "teams": {
                          "type": "array",
                          "default": [],
                          "description": "A list of teams the user belongs to",
                          "items": {
                            "type": "string"
                          },
                          "readOnly": true,
                          "uniqueItems": true
                        },
                        "roles": {
                          "type": "array",
                          "default": [],
                          "description": "A list of roles that the user has",
                          "items": {
                            "type": "string"
                          },
                          "readOnly": true,
                          "uniqueItems": true
                        }
                      },
                      "required": ["isAdmin", "name", "email", "teams", "roles"],
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "default": {
            "description": "The requested session."
          }
        }
      }
    },
    "/apiDocs": {
      "get": {
        "operationId": "apiDocs",
        "security": [],
        "description": "Get OpenAPIDoc document",
        "responses": {
          "200": {
            "description": "The requested apiDoc.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "default": {
            "description": "The requested apiDoc."
          }
        }
      }
    },
    "/settings": {
      "get": {
        "operationId": "getSettings",
        "description": "Get settings from the `settings.yaml` and `secret.settings.yaml` file.",
        "x-aclSchema": "Settings",
        "responses": {
          "200": {
            "description": "The request is successful.",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": {
                    "admin": ["read-any", "update-any"],
                    "team": []
                  },
                  "additionalProperties": false,
                  "properties": {
                    "alerts": {
                      "type": "object",
                      "properties": {
                        "drone": {
                          "default": "slack",
                          "enum": ["slack", "msteams"],
                          "type": "string"
                        },
                        "email": {
                          "additionalProperties": false,
                          "properties": {
                            "critical": {
                              "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
                              "type": "string",
                              "description": "One or more email addresses (comma separated) for critical events."
                            },
                            "nonCritical": {
                              "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
                              "type": "string",
                              "description": "One or more email addresses (comma separated) for non-critical events."
                            }
                          },
                          "type": "object"
                        },
                        "groupInterval": {
                          "default": "5m",
                          "description": "How long to wait before sending a notification about new alerts that are added to a group of alerts for which an initial notification has already been sent. (Usually ~5m or more.)",
                          "type": "string"
                        },
                        "msteams": {
                          "additionalProperties": false,
                          "properties": {
                            "highPrio": {
                              "description": "The low prio web hook.",
                              "type": "string"
                            },
                            "lowPrio": {
                              "description": "The high prio web hook.",
                              "type": "string"
                            }
                          },
                          "type": "object"
                        },
                        "receivers": {
                          "description": "Notification receivers.",
                          "items": {
                            "enum": ["slack", "msteams", "email"],
                            "type": "string"
                          },
                          "type": "array"
                        },
                        "repeatInterval": {
                          "default": "3h",
                          "description": "How long to wait before sending a notification again if it has already been sent successfully for an alert. (Usually ~3h or more).",
                          "type": "string"
                        },
                        "slack": {
                          "additionalProperties": false,
                          "properties": {
                            "channel": {
                              "default": "mon-otomi",
                              "description": "The Slack channel for non-critical notifications.",
                              "type": "string"
                            },
                            "channelCrit": {
                              "default": "mon-otomi",
                              "description": "The Slack channel for critical notifications.",
                              "type": "string"
                            },
                            "url": {
                              "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                              "type": "string",
                              "description": "A Slack webhook URL."
                            }
                          },
                          "type": "object"
                        }
                      }
                    },
                    "azure": {
                      "description": "Azure specific configuration.",
                      "properties": {
                        "appgw": {
                          "properties": {
                            "isManaged": {
                              "default": true,
                              "description": "Is this appgw installed as AKS addon?",
                              "type": "boolean"
                            }
                          },
                          "type": "object"
                        },
                        "diskType": {
                          "description": "An Azure disk type (SKU Type).",
                          "enum": [
                            "Standard_LRS",
                            "Standard_GRS",
                            "Standard_RAGRS",
                            "Standard_ZRS",
                            "Premium_LRS",
                            "Premium_ZRS",
                            "Standard_GZRS",
                            "Standard_RAGZRS"
                          ],
                          "type": "string"
                        },
                        "keyVault": {
                          "description": "Azure Key Vault access credentials. Will use azure.tenantId if tenantId is not provided.",
                          "properties": {
                            "tenantId": {
                              "description": "An Azure tenant ID.",
                              "type": "string"
                            },
                            "clientId": {
                              "description": "An Azure client ID.",
                              "type": "string"
                            },
                            "clientSecret": {
                              "description": "An Azure client secret.",
                              "type": "string"
                            }
                          },
                          "required": ["clientId", "clientSecret"],
                          "type": "object"
                        },
                        "monitor": {
                          "properties": {
                            "appInsightsApiKey": {
                              "description": "An Azure AppInsights client secret (defaults to clientSecret).",
                              "type": "string"
                            },
                            "appInsightsAppId": {
                              "description": "An Azure AppInsights client id (defaults to clientId).",
                              "type": "string"
                            },
                            "clientId": {
                              "description": "An Azure client id.",
                              "type": "string"
                            },
                            "clientSecret": {
                              "description": "An Azure client secret.",
                              "type": "string"
                            },
                            "logAnalyticsClientId": {
                              "description": "An Azure client secret (defaults to clientSecret).",
                              "type": "string"
                            },
                            "logAnalyticsClientSecret": {
                              "description": "An Azure client secret (defaults to clientSecret).",
                              "type": "string"
                            },
                            "logAnalyticsTenantId": {
                              "description": "An Azure tenant id (defaults to tenantId).",
                              "type": "string"
                            },
                            "logAnalyticsWorkspace": {
                              "description": "An Azure monitor log analytics workspace.",
                              "type": "string"
                            }
                          }
                        },
                        "resourceGroup": {
                          "description": "An Azure resource group.",
                          "type": "string"
                        },
                        "subscriptionId": {
                          "description": "An Azure subscription ID.",
                          "type": "string"
                        },
                        "tenantId": {
                          "description": "An Azure tenant ID.",
                          "type": "string"
                        }
                      },
                      "required": ["diskType", "resourceGroup", "subscriptionId", "tenantId"],
                      "type": "object"
                    },
                    "customer": {
                      "additionalProperties": false,
                      "properties": {
                        "name": {
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "google": {
                      "description": "Google specific configuration.",
                      "properties": {
                        "cloudDnsKey": {
                          "description": "A service account key for managing a DNS zone.",
                          "type": "string"
                        },
                        "kmsAccount": {
                          "description": "A service account key for managing a KMS vault.",
                          "type": "string"
                        },
                        "projectId": {
                          "description": "A Google Cloud project ID for accessing DNS zone.",
                          "type": "string"
                        }
                      },
                      "required": ["cloudDnsKey", "projectId"],
                      "type": "object"
                    },
                    "dns": {
                      "properties": {
                        "dnsZones": {
                          "description": "Extra dns zones that the cluster can administer (see dns). Team services can use this to publish their URLs on.",
                          "items": {
                            "type": "string"
                          },
                          "type": "array"
                        },
                        "domain": {
                          "type": "string",
                          "description": "A fqdn for the cluster"
                        }
                      },
                      "oneOf": [
                        {
                          "title": "aws",
                          "properties": {
                            "aws": {
                              "properties": {
                                "region": {
                                  "type": "string"
                                }
                              },
                              "required": ["region"]
                            }
                          },
                          "required": ["aws"]
                        },
                        {
                          "title": "azure",
                          "properties": {
                            "azure": {
                              "properties": {
                                "cloud": {
                                  "type": "string",
                                  "description": "Azure Cloud to use"
                                },
                                "resourceGroup": {
                                  "type": "string",
                                  "description": "Azure resource group to use"
                                },
                                "hostedZoneName": {
                                  "type": "string"
                                },
                                "tenantId": {
                                  "type": "string",
                                  "description": "Azure tenant ID to use (will default to global value)"
                                },
                                "subscriptionId": {
                                  "type": "string",
                                  "description": "Azure subscription ID to use (will default to global value)"
                                },
                                "aadClientId": {
                                  "type": "string",
                                  "description": "Azure Application Client ID to use"
                                },
                                "aadClientSecret": {
                                  "type": "string",
                                  "description": "Azure Application Client Secret to use"
                                },
                                "useManagedIdentityExtension": {
                                  "type": "boolean",
                                  "description": "If you use Azure MSI, this should be set to true",
                                  "default": false
                                }
                              },
                              "required": [
                                "resourceGroup",
                                "tenantId",
                                "subscriptionId",
                                "aadClientId",
                                "aadClientSecret"
                              ]
                            }
                          },
                          "required": ["azure"]
                        },
                        {
                          "title": "google",
                          "properties": {
                            "google": {
                              "properties": {
                                "serviceAccountKey": {
                                  "description": "A service account key for managing a DNS zone.",
                                  "type": "string"
                                },
                                "project": {
                                  "type": "string"
                                }
                              },
                              "required": ["serviceAccountKey", "project"]
                            }
                          },
                          "required": ["google"]
                        }
                      ],
                      "required": ["domain"],
                      "type": "object"
                    },
                    "home": {
                      "type": "object",
                      "properties": {
                        "drone": {
                          "default": "slack",
                          "enum": ["slack", "msteams"],
                          "type": "string"
                        },
                        "email": {
                          "additionalProperties": false,
                          "properties": {
                            "critical": {
                              "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
                              "type": "string",
                              "description": "One or more email addresses (comma separated) for critical events."
                            },
                            "nonCritical": {
                              "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
                              "type": "string",
                              "description": "One or more email addresses (comma separated) for non-critical events."
                            }
                          },
                          "type": "object"
                        },
                        "groupInterval": {
                          "default": "5m",
                          "description": "How long to wait before sending a notification about new alerts that are added to a group of alerts for which an initial notification has already been sent. (Usually ~5m or more.)",
                          "type": "string"
                        },
                        "msteams": {
                          "additionalProperties": false,
                          "properties": {
                            "highPrio": {
                              "description": "The low prio web hook.",
                              "type": "string"
                            },
                            "lowPrio": {
                              "description": "The high prio web hook.",
                              "type": "string"
                            }
                          },
                          "type": "object"
                        },
                        "receivers": {
                          "description": "Notification receivers.",
                          "items": {
                            "enum": ["slack", "msteams", "email"],
                            "type": "string"
                          },
                          "type": "array"
                        },
                        "repeatInterval": {
                          "default": "3h",
                          "description": "How long to wait before sending a notification again if it has already been sent successfully for an alert. (Usually ~3h or more).",
                          "type": "string"
                        },
                        "slack": {
                          "additionalProperties": false,
                          "properties": {
                            "channel": {
                              "default": "mon-otomi",
                              "description": "The Slack channel for non-critical notifications.",
                              "type": "string"
                            },
                            "channelCrit": {
                              "default": "mon-otomi",
                              "description": "The Slack channel for critical notifications.",
                              "type": "string"
                            },
                            "url": {
                              "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                              "type": "string",
                              "description": "A Slack webhook URL."
                            }
                          },
                          "type": "object"
                        }
                      }
                    },
                    "kms": {
                      "description": "Use Cloud KMS to encrypt and decrypt the master key",
                      "oneOf": [
                        {
                          "title": "gcpckms",
                          "properties": {
                            "gcpckms": {
                              "properties": {
                                "project": {
                                  "type": "string"
                                },
                                "region": {
                                  "type": "string"
                                },
                                "key_ring": {
                                  "type": "string"
                                },
                                "kmsAccount": {
                                  "type": "string"
                                }
                              },
                              "required": ["project", "region", "key_ring", "kmsAccount"],
                              "type": "object"
                            }
                          },
                          "required": ["gcpckms"],
                          "type": "object"
                        },
                        {
                          "title": "awskms",
                          "properties": {
                            "awskms": {
                              "properties": {
                                "region": {
                                  "type": "string"
                                },
                                "access_key": {
                                  "type": "string"
                                },
                                "secret_key": {
                                  "type": "string"
                                },
                                "endpoint": {
                                  "type": "string"
                                }
                              },
                              "required": ["region", "access_key", "secret_key", "endpoint"],
                              "type": "object"
                            }
                          },
                          "required": ["awskms"],
                          "type": "object"
                        },
                        {
                          "title": "azurekeyvault",
                          "properties": {
                            "azurekeyvault": {
                              "properties": {
                                "vault_name": {
                                  "type": "string"
                                },
                                "tenant_id": {
                                  "type": "string"
                                },
                                "client_id": {
                                  "type": "string"
                                },
                                "client_secret": {
                                  "type": "string"
                                }
                              },
                              "required": ["vault_name", "tenant_id", "client_id", "client_secret"],
                              "type": "object"
                            }
                          },
                          "required": ["azurekeyvault"],
                          "type": "object"
                        }
                      ],
                      "type": "object"
                    },
                    "oidc": {
                      "additionalProperties": false,
                      "description": "Holds many parts used in different locations. Please see keycloak, istio and oauth-proxy all consuming parts.",
                      "properties": {
                        "adminGroupID": {
                          "type": "string"
                        },
                        "apiUrl": {
                          "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                          "type": "string"
                        },
                        "authUrl": {
                          "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                          "type": "string"
                        },
                        "clientID": {
                          "type": "string"
                        },
                        "clientSecret": {
                          "type": "string"
                        },
                        "issuer": {
                          "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                          "type": "string"
                        },
                        "scope": {
                          "type": "string"
                        },
                        "teamAdminGroupID": {
                          "type": "string"
                        },
                        "tenantID": {
                          "type": "string"
                        },
                        "tokenUrl": {
                          "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                          "type": "string"
                        },
                        "usernameClaimMapper": {
                          "type": "string",
                          "description": "Claim name used by Keycloak to identify incoming users from identity provider"
                        },
                        "subClaimMapper": {
                          "type": "string",
                          "description": "Select OIDC claim to be used as a unique user identifier",
                          "default": "sub"
                        }
                      },
                      "type": "object"
                    },
                    "otomi": {
                      "additionalProperties": false,
                      "properties": {
                        "hasCloudLB": {
                          "default": false,
                          "description": "Set this to true when an external LB exists or needs to be started (AWS ALB, Azure AppGW, Google Apigee). This will then be configured through ingress controllers. Expects existing LBs to terminate https. Currently this is only working correctly for Azure, and not for AWS and Google. AWS is close to completion.",
                          "type": "boolean"
                        },
                        "isHomeMonitored": {
                          "default": false,
                          "description": "Whether this cluster is home monitored (like when under a Premium SLA). Sends criticals home.",
                          "type": "boolean"
                        },
                        "isManaged": {
                          "default": true,
                          "description": "Whether masters are managed and not under control. Set this to false when onprem.",
                          "type": "boolean"
                        },
                        "isMultitenant": {
                          "default": true,
                          "description": "Whether to separate team metrics and logs. Disabling this lets everybody be admin and see everything.",
                          "type": "boolean"
                        },
                        "mode": {
                          "default": "ee",
                          "description": "The otomi-core edition. Either community edition (ce) or enterprise edition (ee).",
                          "enum": ["ce", "ee"],
                          "type": "string"
                        },
                        "pullSecret": {
                          "default": "",
                          "description": "The pullsecret to deploy the Otomi API and Console. Requires an Otomi license.",
                          "type": "string"
                        },
                        "teamPrefix": {
                          "default": "team-",
                          "description": "The prefix to use in URLs for team domains.",
                          "pattern": "^[a-z]+[-]{1}$",
                          "type": "string"
                        },
                        "addons": {
                          "description": "Manage addon configuration",
                          "additionalProperties": false,
                          "properties": {
                            "conftest": {
                              "properties": {
                                "enabled": {
                                  "type": "boolean",
                                  "default": true,
                                  "description": "Use this flag to enable conftest for policy validation"
                                }
                              },
                              "type": "object"
                            }
                          },
                          "type": "object"
                        }
                      },
                      "type": "object"
                    },
                    "otomiInstanceUrls": {
                      "description": "Use this property to indicate other otomi instances and easily navigate between them from otomi-console",
                      "type": "array",
                      "properties": {
                        "items": {
                          "type": "string"
                        }
                      },
                      "default": []
                    },
                    "smtp": {
                      "additionalProperties": false,
                      "properties": {
                        "auth_identity": {
                          "type": "string"
                        },
                        "auth_password": {
                          "type": "string"
                        },
                        "auth_secret": {
                          "type": "string"
                        },
                        "auth_username": {
                          "type": "string"
                        },
                        "from": {
                          "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
                          "type": "string",
                          "description": "The \"from\" address. Defaults to alerts@$clusterDomain."
                        },
                        "hello": {
                          "type": "string"
                        },
                        "smarthost": {
                          "description": "The smtp host:port combination.",
                          "pattern": "^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9]):()([1-9]|[1-5]?[0-9]{2,4}|6[1-4][0-9]{3}|65[1-4][0-9]{2}|655[1-2][0-9]|6553[1-5])$",
                          "type": "string"
                        }
                      },
                      "required": ["smarthost"],
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "put": {
        "operationId": "editSettings",
        "description": "Edits the settings from the `settings.yaml` file",
        "x-aclSchema": "Settings",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "x-acl": {
                  "admin": ["read-any", "update-any"],
                  "team": []
                },
                "additionalProperties": false,
                "properties": {
                  "alerts": {
                    "type": "object",
                    "properties": {
                      "drone": {
                        "default": "slack",
                        "enum": ["slack", "msteams"],
                        "type": "string"
                      },
                      "email": {
                        "additionalProperties": false,
                        "properties": {
                          "critical": {
                            "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
                            "type": "string",
                            "description": "One or more email addresses (comma separated) for critical events."
                          },
                          "nonCritical": {
                            "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
                            "type": "string",
                            "description": "One or more email addresses (comma separated) for non-critical events."
                          }
                        },
                        "type": "object"
                      },
                      "groupInterval": {
                        "default": "5m",
                        "description": "How long to wait before sending a notification about new alerts that are added to a group of alerts for which an initial notification has already been sent. (Usually ~5m or more.)",
                        "type": "string"
                      },
                      "msteams": {
                        "additionalProperties": false,
                        "properties": {
                          "highPrio": {
                            "description": "The low prio web hook.",
                            "type": "string"
                          },
                          "lowPrio": {
                            "description": "The high prio web hook.",
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "receivers": {
                        "description": "Notification receivers.",
                        "items": {
                          "enum": ["slack", "msteams", "email"],
                          "type": "string"
                        },
                        "type": "array"
                      },
                      "repeatInterval": {
                        "default": "3h",
                        "description": "How long to wait before sending a notification again if it has already been sent successfully for an alert. (Usually ~3h or more).",
                        "type": "string"
                      },
                      "slack": {
                        "additionalProperties": false,
                        "properties": {
                          "channel": {
                            "default": "mon-otomi",
                            "description": "The Slack channel for non-critical notifications.",
                            "type": "string"
                          },
                          "channelCrit": {
                            "default": "mon-otomi",
                            "description": "The Slack channel for critical notifications.",
                            "type": "string"
                          },
                          "url": {
                            "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                            "type": "string",
                            "description": "A Slack webhook URL."
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "azure": {
                    "description": "Azure specific configuration.",
                    "properties": {
                      "appgw": {
                        "properties": {
                          "isManaged": {
                            "default": true,
                            "description": "Is this appgw installed as AKS addon?",
                            "type": "boolean"
                          }
                        },
                        "type": "object"
                      },
                      "diskType": {
                        "description": "An Azure disk type (SKU Type).",
                        "enum": [
                          "Standard_LRS",
                          "Standard_GRS",
                          "Standard_RAGRS",
                          "Standard_ZRS",
                          "Premium_LRS",
                          "Premium_ZRS",
                          "Standard_GZRS",
                          "Standard_RAGZRS"
                        ],
                        "type": "string"
                      },
                      "keyVault": {
                        "description": "Azure Key Vault access credentials. Will use azure.tenantId if tenantId is not provided.",
                        "properties": {
                          "tenantId": {
                            "description": "An Azure tenant ID.",
                            "type": "string"
                          },
                          "clientId": {
                            "description": "An Azure client ID.",
                            "type": "string"
                          },
                          "clientSecret": {
                            "description": "An Azure client secret.",
                            "type": "string"
                          }
                        },
                        "required": ["clientId", "clientSecret"],
                        "type": "object"
                      },
                      "monitor": {
                        "properties": {
                          "appInsightsApiKey": {
                            "description": "An Azure AppInsights client secret (defaults to clientSecret).",
                            "type": "string"
                          },
                          "appInsightsAppId": {
                            "description": "An Azure AppInsights client id (defaults to clientId).",
                            "type": "string"
                          },
                          "clientId": {
                            "description": "An Azure client id.",
                            "type": "string"
                          },
                          "clientSecret": {
                            "description": "An Azure client secret.",
                            "type": "string"
                          },
                          "logAnalyticsClientId": {
                            "description": "An Azure client secret (defaults to clientSecret).",
                            "type": "string"
                          },
                          "logAnalyticsClientSecret": {
                            "description": "An Azure client secret (defaults to clientSecret).",
                            "type": "string"
                          },
                          "logAnalyticsTenantId": {
                            "description": "An Azure tenant id (defaults to tenantId).",
                            "type": "string"
                          },
                          "logAnalyticsWorkspace": {
                            "description": "An Azure monitor log analytics workspace.",
                            "type": "string"
                          }
                        }
                      },
                      "resourceGroup": {
                        "description": "An Azure resource group.",
                        "type": "string"
                      },
                      "subscriptionId": {
                        "description": "An Azure subscription ID.",
                        "type": "string"
                      },
                      "tenantId": {
                        "description": "An Azure tenant ID.",
                        "type": "string"
                      }
                    },
                    "required": ["diskType", "resourceGroup", "subscriptionId", "tenantId"],
                    "type": "object"
                  },
                  "customer": {
                    "additionalProperties": false,
                    "properties": {
                      "name": {
                        "type": "string"
                      }
                    },
                    "type": "object"
                  },
                  "google": {
                    "description": "Google specific configuration.",
                    "properties": {
                      "cloudDnsKey": {
                        "description": "A service account key for managing a DNS zone.",
                        "type": "string"
                      },
                      "kmsAccount": {
                        "description": "A service account key for managing a KMS vault.",
                        "type": "string"
                      },
                      "projectId": {
                        "description": "A Google Cloud project ID for accessing DNS zone.",
                        "type": "string"
                      }
                    },
                    "required": ["cloudDnsKey", "projectId"],
                    "type": "object"
                  },
                  "dns": {
                    "properties": {
                      "dnsZones": {
                        "description": "Extra dns zones that the cluster can administer (see dns). Team services can use this to publish their URLs on.",
                        "items": {
                          "type": "string"
                        },
                        "type": "array"
                      },
                      "domain": {
                        "type": "string",
                        "description": "A fqdn for the cluster"
                      }
                    },
                    "oneOf": [
                      {
                        "title": "aws",
                        "properties": {
                          "aws": {
                            "properties": {
                              "region": {
                                "type": "string"
                              }
                            },
                            "required": ["region"]
                          }
                        },
                        "required": ["aws"]
                      },
                      {
                        "title": "azure",
                        "properties": {
                          "azure": {
                            "properties": {
                              "cloud": {
                                "type": "string",
                                "description": "Azure Cloud to use"
                              },
                              "resourceGroup": {
                                "type": "string",
                                "description": "Azure resource group to use"
                              },
                              "hostedZoneName": {
                                "type": "string"
                              },
                              "tenantId": {
                                "type": "string",
                                "description": "Azure tenant ID to use (will default to global value)"
                              },
                              "subscriptionId": {
                                "type": "string",
                                "description": "Azure subscription ID to use (will default to global value)"
                              },
                              "aadClientId": {
                                "type": "string",
                                "description": "Azure Application Client ID to use"
                              },
                              "aadClientSecret": {
                                "type": "string",
                                "description": "Azure Application Client Secret to use"
                              },
                              "useManagedIdentityExtension": {
                                "type": "boolean",
                                "description": "If you use Azure MSI, this should be set to true",
                                "default": false
                              }
                            },
                            "required": [
                              "resourceGroup",
                              "tenantId",
                              "subscriptionId",
                              "aadClientId",
                              "aadClientSecret"
                            ]
                          }
                        },
                        "required": ["azure"]
                      },
                      {
                        "title": "google",
                        "properties": {
                          "google": {
                            "properties": {
                              "serviceAccountKey": {
                                "description": "A service account key for managing a DNS zone.",
                                "type": "string"
                              },
                              "project": {
                                "type": "string"
                              }
                            },
                            "required": ["serviceAccountKey", "project"]
                          }
                        },
                        "required": ["google"]
                      }
                    ],
                    "required": ["domain"],
                    "type": "object"
                  },
                  "home": {
                    "type": "object",
                    "properties": {
                      "drone": {
                        "default": "slack",
                        "enum": ["slack", "msteams"],
                        "type": "string"
                      },
                      "email": {
                        "additionalProperties": false,
                        "properties": {
                          "critical": {
                            "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
                            "type": "string",
                            "description": "One or more email addresses (comma separated) for critical events."
                          },
                          "nonCritical": {
                            "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
                            "type": "string",
                            "description": "One or more email addresses (comma separated) for non-critical events."
                          }
                        },
                        "type": "object"
                      },
                      "groupInterval": {
                        "default": "5m",
                        "description": "How long to wait before sending a notification about new alerts that are added to a group of alerts for which an initial notification has already been sent. (Usually ~5m or more.)",
                        "type": "string"
                      },
                      "msteams": {
                        "additionalProperties": false,
                        "properties": {
                          "highPrio": {
                            "description": "The low prio web hook.",
                            "type": "string"
                          },
                          "lowPrio": {
                            "description": "The high prio web hook.",
                            "type": "string"
                          }
                        },
                        "type": "object"
                      },
                      "receivers": {
                        "description": "Notification receivers.",
                        "items": {
                          "enum": ["slack", "msteams", "email"],
                          "type": "string"
                        },
                        "type": "array"
                      },
                      "repeatInterval": {
                        "default": "3h",
                        "description": "How long to wait before sending a notification again if it has already been sent successfully for an alert. (Usually ~3h or more).",
                        "type": "string"
                      },
                      "slack": {
                        "additionalProperties": false,
                        "properties": {
                          "channel": {
                            "default": "mon-otomi",
                            "description": "The Slack channel for non-critical notifications.",
                            "type": "string"
                          },
                          "channelCrit": {
                            "default": "mon-otomi",
                            "description": "The Slack channel for critical notifications.",
                            "type": "string"
                          },
                          "url": {
                            "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                            "type": "string",
                            "description": "A Slack webhook URL."
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "kms": {
                    "description": "Use Cloud KMS to encrypt and decrypt the master key",
                    "oneOf": [
                      {
                        "title": "gcpckms",
                        "properties": {
                          "gcpckms": {
                            "properties": {
                              "project": {
                                "type": "string"
                              },
                              "region": {
                                "type": "string"
                              },
                              "key_ring": {
                                "type": "string"
                              },
                              "kmsAccount": {
                                "type": "string"
                              }
                            },
                            "required": ["project", "region", "key_ring", "kmsAccount"],
                            "type": "object"
                          }
                        },
                        "required": ["gcpckms"],
                        "type": "object"
                      },
                      {
                        "title": "awskms",
                        "properties": {
                          "awskms": {
                            "properties": {
                              "region": {
                                "type": "string"
                              },
                              "access_key": {
                                "type": "string"
                              },
                              "secret_key": {
                                "type": "string"
                              },
                              "endpoint": {
                                "type": "string"
                              }
                            },
                            "required": ["region", "access_key", "secret_key", "endpoint"],
                            "type": "object"
                          }
                        },
                        "required": ["awskms"],
                        "type": "object"
                      },
                      {
                        "title": "azurekeyvault",
                        "properties": {
                          "azurekeyvault": {
                            "properties": {
                              "vault_name": {
                                "type": "string"
                              },
                              "tenant_id": {
                                "type": "string"
                              },
                              "client_id": {
                                "type": "string"
                              },
                              "client_secret": {
                                "type": "string"
                              }
                            },
                            "required": ["vault_name", "tenant_id", "client_id", "client_secret"],
                            "type": "object"
                          }
                        },
                        "required": ["azurekeyvault"],
                        "type": "object"
                      }
                    ],
                    "type": "object"
                  },
                  "oidc": {
                    "additionalProperties": false,
                    "description": "Holds many parts used in different locations. Please see keycloak, istio and oauth-proxy all consuming parts.",
                    "properties": {
                      "adminGroupID": {
                        "type": "string"
                      },
                      "apiUrl": {
                        "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                        "type": "string"
                      },
                      "authUrl": {
                        "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                        "type": "string"
                      },
                      "clientID": {
                        "type": "string"
                      },
                      "clientSecret": {
                        "type": "string"
                      },
                      "issuer": {
                        "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                        "type": "string"
                      },
                      "scope": {
                        "type": "string"
                      },
                      "teamAdminGroupID": {
                        "type": "string"
                      },
                      "tenantID": {
                        "type": "string"
                      },
                      "tokenUrl": {
                        "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                        "type": "string"
                      },
                      "usernameClaimMapper": {
                        "type": "string",
                        "description": "Claim name used by Keycloak to identify incoming users from identity provider"
                      },
                      "subClaimMapper": {
                        "type": "string",
                        "description": "Select OIDC claim to be used as a unique user identifier",
                        "default": "sub"
                      }
                    },
                    "type": "object"
                  },
                  "otomi": {
                    "additionalProperties": false,
                    "properties": {
                      "hasCloudLB": {
                        "default": false,
                        "description": "Set this to true when an external LB exists or needs to be started (AWS ALB, Azure AppGW, Google Apigee). This will then be configured through ingress controllers. Expects existing LBs to terminate https. Currently this is only working correctly for Azure, and not for AWS and Google. AWS is close to completion.",
                        "type": "boolean"
                      },
                      "isHomeMonitored": {
                        "default": false,
                        "description": "Whether this cluster is home monitored (like when under a Premium SLA). Sends criticals home.",
                        "type": "boolean"
                      },
                      "isManaged": {
                        "default": true,
                        "description": "Whether masters are managed and not under control. Set this to false when onprem.",
                        "type": "boolean"
                      },
                      "isMultitenant": {
                        "default": true,
                        "description": "Whether to separate team metrics and logs. Disabling this lets everybody be admin and see everything.",
                        "type": "boolean"
                      },
                      "mode": {
                        "default": "ee",
                        "description": "The otomi-core edition. Either community edition (ce) or enterprise edition (ee).",
                        "enum": ["ce", "ee"],
                        "type": "string"
                      },
                      "pullSecret": {
                        "default": "",
                        "description": "The pullsecret to deploy the Otomi API and Console. Requires an Otomi license.",
                        "type": "string"
                      },
                      "teamPrefix": {
                        "default": "team-",
                        "description": "The prefix to use in URLs for team domains.",
                        "pattern": "^[a-z]+[-]{1}$",
                        "type": "string"
                      },
                      "addons": {
                        "description": "Manage addon configuration",
                        "additionalProperties": false,
                        "properties": {
                          "conftest": {
                            "properties": {
                              "enabled": {
                                "type": "boolean",
                                "default": true,
                                "description": "Use this flag to enable conftest for policy validation"
                              }
                            },
                            "type": "object"
                          }
                        },
                        "type": "object"
                      }
                    },
                    "type": "object"
                  },
                  "otomiInstanceUrls": {
                    "description": "Use this property to indicate other otomi instances and easily navigate between them from otomi-console",
                    "type": "array",
                    "properties": {
                      "items": {
                        "type": "string"
                      }
                    },
                    "default": []
                  },
                  "smtp": {
                    "additionalProperties": false,
                    "properties": {
                      "auth_identity": {
                        "type": "string"
                      },
                      "auth_password": {
                        "type": "string"
                      },
                      "auth_secret": {
                        "type": "string"
                      },
                      "auth_username": {
                        "type": "string"
                      },
                      "from": {
                        "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
                        "type": "string",
                        "description": "The \"from\" address. Defaults to alerts@$clusterDomain."
                      },
                      "hello": {
                        "type": "string"
                      },
                      "smarthost": {
                        "description": "The smtp host:port combination.",
                        "pattern": "^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9]):()([1-9]|[1-5]?[0-9]{2,4}|6[1-4][0-9]{3}|65[1-4][0-9]{2}|655[1-2][0-9]|6553[1-5])$",
                        "type": "string"
                      }
                    },
                    "required": ["smarthost"],
                    "type": "object"
                  }
                },
                "type": "object"
              }
            }
          },
          "description": "Settings object that contains updated values",
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully edited `settings.yaml`"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "status": {
                      "type": "integer"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "x-acl": [],
                        "properties": {
                          "path": {
                            "type": "string"
                          },
                          "errorCode": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "location": {
                            "type": "string",
                            "enum": ["body", "path"]
                          }
                        },
                        "type": "object"
                      }
                    }
                  },
                  "type": "object"
                }
              }
            }
          },
          "404": {
            "description": "Resource does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "x-acl": [],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            }
          }
        }
      }
    }
  },
  "servers": [
    {
      "url": "/v1"
    }
  ],
  "components": {
    "parameters": {
      "teamParams": {
        "name": "teamId",
        "in": "path",
        "description": "ID of team to return",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "serviceParams": {
        "name": "serviceId",
        "in": "path",
        "description": "ID of the service",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "secretParams": {
        "name": "secretId",
        "in": "path",
        "description": "ID of the secret",
        "required": true,
        "schema": {
          "type": "string"
        }
      }
    },
    "securitySchemes": {
      "groupAuthn": {
        "type": "apiKey",
        "name": "Authorization",
        "in": "header"
      },
      "groupAuthz": {
        "type": "apiKey",
        "name": "Authorization",
        "in": "header"
      }
    },
    "schemas": {
      "Cluster": {
        "properties": {
          "apiName": {
            "description": "Only used for API/UI to show in app.",
            "type": "string",
            "readOnly": true
          },
          "apiServer": {
            "description": "Used by kubectl for local deployment to target cluster.",
            "type": "string",
            "readOnly": true
          },
          "entrypoint": {
            "description": "A Kubernetes API public IP address (onprem only).",
            "type": "string",
            "readOnly": true
          },
          "k8sVersion": {
            "readOnly": true,
            "default": "1.19",
            "description": "The cluster k8s version. Otomi supports 2 minor versions backwards compatibility from the suggested default.",
            "enum": ["1.17", "1.18", "1.19"],
            "type": "string"
          },
          "name": {
            "type": "string",
            "readOnly": true
          },
          "otomiVersion": {
            "default": "latest",
            "description": "Please pin this a valid release version found in the repo. Suggestion: try the most recent stable version.",
            "type": "string"
          },
          "provider": {
            "type": "string",
            "enum": ["aws", "azure", "google", "oneprem"],
            "readOnly": true
          },
          "region": {
            "description": "Dependent on provider.",
            "type": "string",
            "readOnly": true
          },
          "vpcID": {
            "description": "AWS only. If provided will override autodiscovery from metadata.",
            "type": "string",
            "readOnly": true
          }
        },
        "required": ["otomiVersion"],
        "type": "object"
      },
      "Deployment": {
        "x-externalDocsPath": "docs/deployment",
        "x-acl": {
          "admin": ["read-any"],
          "team": ["read-any"]
        },
        "properties": {
          "id": {
            "type": "integer"
          },
          "status": {
            "type": "string",
            "readOnly": true,
            "description": "Deployment status",
            "enum": ["in-progress", "completed", "failed"]
          }
        },
        "type": "object"
      },
      "Kubecfg": {
        "x-acl": {
          "admin": ["read-any"],
          "team": ["read"]
        },
        "properties": {},
        "type": "object"
      },
      "OpenApiValidationError": {
        "x-acl": [],
        "properties": {
          "status": {
            "type": "integer"
          },
          "errors": {
            "type": "array",
            "items": {
              "x-acl": [],
              "properties": {
                "path": {
                  "type": "string"
                },
                "errorCode": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                },
                "location": {
                  "type": "string",
                  "enum": ["body", "path"]
                }
              },
              "type": "object"
            }
          }
        },
        "type": "object"
      },
      "OtomiStackError": {
        "x-acl": [],
        "properties": {
          "message": {
            "type": "string"
          }
        },
        "type": "object"
      },
      "Secret": {
        "x-acl": {
          "admin": ["read-any", "create-any", "update-any", "delete-any"],
          "team": ["read", "create", "update", "delete"]
        },
        "properties": {
          "id": {
            "readOnly": true,
            "type": "string"
          },
          "name": {
            "type": "string",
            "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$",
            "title": "Name",
            "description": "A secret name",
            "example": "secret01"
          }
        },
        "required": ["name"],
        "oneOf": [
          {
            "title": "Generic",
            "properties": {
              "type": {
                "default": "generic",
                "enum": ["generic"]
              },
              "entries": {
                "type": "array",
                "items": {
                  "description": "A property name at vaultPath",
                  "minItems": 1,
                  "pattern": "^[a-zA-Z0-9_]*$",
                  "type": "string",
                  "uniqueItems": true
                }
              }
            },
            "required": ["type", "entries"],
            "type": "object"
          },
          {
            "title": "Docker registry",
            "properties": {
              "type": {
                "default": "docker-registry",
                "enum": ["docker-registry"],
                "type": "string"
              },
              "dockerconfig": {
                "type": "string",
                "enum": [".dockerconfig.json"],
                "default": ".dockerconfig.json",
                "readOnly": true
              }
            },
            "required": ["type"],
            "type": "object"
          },
          {
            "title": "TLS",
            "properties": {
              "type": {
                "default": "tls",
                "enum": ["tls"],
                "type": "string"
              },
              "crt": {
                "type": "string",
                "default": "tls.crt",
                "description": "A Vault property name that contains PEM public key certificate"
              },
              "key": {
                "type": "string",
                "default": "tls.key",
                "description": "A Vault property name that contains PEM private key certificate"
              },
              "ca": {
                "type": "string",
                "title": "CA",
                "description": "A Vault property name that contains CA certificate content"
              }
            },
            "required": ["type", "crt", "key"],
            "type": "object"
          }
        ],
        "type": "object"
      },
      "Service": {
        "x-acl": {
          "admin": ["delete-any", "read-any", "create-any", "update-any"],
          "team": ["delete", "read", "create", "update"]
        },
        "x-externalDocsPath": "docs/configuring-services",
        "properties": {
          "enabled": {
            "default": true,
            "type": "boolean"
          },
          "id": {
            "readOnly": true,
            "type": "string"
          },
          "name": {
            "type": "string",
            "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
            "title": "Name",
            "description": "A service name",
            "example": "some-service"
          },
          "port": {
            "description": "A service port",
            "type": "integer",
            "default": 80,
            "minimum": 1,
            "maximum": 65535
          },
          "ksvc": {
            "oneOf": [
              {
                "nullable": true,
                "properties": {
                  "annotations": {
                    "title": "Pod annotations",
                    "description": "Kubernetes annotations with arbitrary metadata",
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "type": "string",
                          "pattern": "^((.){1,253}\\/)?(.){1,63}$"
                        },
                        "value": {
                          "type": "string",
                          "maxLength": 32767
                        }
                      }
                    }
                  },
                  "autoCD": {
                    "description": "Deploys new images based on a tagging strategy",
                    "oneOf": [
                      {
                        "additionalProperties": false,
                        "nullable": true,
                        "title": "Off",
                        "type": "object"
                      },
                      {
                        "nullable": true,
                        "properties": {
                          "semver": {
                            "description": "Use this filter if your image tags follow semantic versioning rules (MAJOR.MINOR.PATCH). E.g.: PATCH only: \"~1.1\", MINOR and PATCH only \"~1\", ALL \"*\"",
                            "example": "PATCH only: \"~1.1\", MINOR and PATCH only \"~1\", ALL \"*\",  \">=1.2.3-0\"",
                            "title": "Semver version pattern",
                            "type": "string"
                          },
                          "tagMatcher": {
                            "default": "semver",
                            "enum": ["semver"],
                            "type": "string"
                          }
                        },
                        "required": ["semver"],
                        "title": "Semver versioning",
                        "type": "object"
                      },
                      {
                        "additionalProperties": false,
                        "properties": {
                          "glob": {
                            "description": "Use this filter if you want to make glob-style patterns. E.g.: \"main-v1.3.*\"",
                            "example": "main-v1.3.*",
                            "title": "Glob string pattern",
                            "type": "string"
                          },
                          "tagMatcher": {
                            "default": "glob",
                            "enum": ["glob"],
                            "type": "string"
                          }
                        },
                        "required": ["glob"],
                        "title": "Glob pattern matching",
                        "type": "object"
                      }
                    ],
                    "title": "Continuous delivery"
                  },
                  "env": {
                    "title": "Environment variables",
                    "type": "array",
                    "nullable": true,
                    "items": {
                      "properties": {
                        "name": {
                          "type": "string",
                          "pattern": "^[a-zA-Z0-9_]*$"
                        },
                        "value": {
                          "type": "string",
                          "maxLength": 131072
                        }
                      },
                      "required": ["name", "value"],
                      "type": "object"
                    }
                  },
                  "image": {
                    "nullable": true,
                    "properties": {
                      "repository": {
                        "description": "A container image repository.",
                        "pattern": "^[a-z0-9]+(?:[/._-]{1,2}[a-z0-9]+)*$",
                        "type": "string"
                      },
                      "tag": {
                        "pattern": "[\\w][\\w.-]{0,127}",
                        "type": "string"
                      }
                    },
                    "required": ["repository", "tag"],
                    "title": "Container image",
                    "type": "object"
                  },
                  "resources": {
                    "additionalProperties": false,
                    "description": "Compute resources for containers.",
                    "properties": {
                      "limits": {
                        "description": "Requested resources (best effort).",
                        "additionalProperties": false,
                        "properties": {
                          "cpu": {
                            "description": "Amount of cores, or slice of cpu in millis.",
                            "default": "50m",
                            "example": ["1", "200m"],
                            "pattern": "^([0-9]+\\.[0-9]{1,2})|([0-9]{2,3}m)?$",
                            "type": "string"
                          },
                          "memory": {
                            "description": "Amount of memory. Valid units are E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki.",
                            "default": "64Mi",
                            "example": ["1Mi", "0.5M"],
                            "pattern": "^([0-9]+\\.)?[0-9]+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$",
                            "type": "string"
                          }
                        },
                        "required": ["cpu", "memory"],
                        "type": "object"
                      },
                      "requests": {
                        "description": "Requested resources (guaranteed).",
                        "additionalProperties": false,
                        "properties": {
                          "cpu": {
                            "description": "Amount of cores, or slice of cpu in millis.",
                            "default": "50m",
                            "example": ["1", "200m"],
                            "pattern": "^([0-9]+\\.[0-9]{1,2})|([0-9]{2,3}m)?$",
                            "type": "string"
                          },
                          "memory": {
                            "description": "Amount of memory. Valid units are E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki.",
                            "default": "64Mi",
                            "example": ["1Mi", "0.5M"],
                            "pattern": "^([0-9]+\\.)?[0-9]+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)?$",
                            "type": "string"
                          }
                        },
                        "required": ["cpu", "memory"],
                        "type": "object"
                      }
                    },
                    "title": "Pod resources",
                    "type": "object"
                  },
                  "scaleToZero": {
                    "default": false,
                    "description": "Scales to zero after 60 seconds and needs approximately 8 seconds to start back up.",
                    "title": "Scale to zero",
                    "type": "boolean"
                  },
                  "secrets": {
                    "items": {
                      "properties": {
                        "name": {
                          "type": "string"
                        },
                        "entries": {
                          "items": {
                            "type": "string"
                          },
                          "title": "Entries",
                          "type": "array",
                          "uniqueItems": true
                        }
                      },
                      "required": ["name"],
                      "type": "object"
                    },
                    "type": "array"
                  },
                  "serviceType": {
                    "default": "ksvc",
                    "enum": ["ksvc"],
                    "type": "string"
                  }
                },
                "title": "Knative service"
              },
              {
                "properties": {
                  "serviceType": {
                    "default": "ksvcPredeployed",
                    "enum": ["ksvcPredeployed"],
                    "type": "string"
                  }
                },
                "required": ["serviceType"],
                "title": "Existing Knative service",
                "type": "object"
              },
              {
                "properties": {
                  "serviceType": {
                    "default": "svcPredeployed",
                    "enum": ["svcPredeployed"],
                    "type": "string"
                  }
                },
                "required": ["serviceType"],
                "title": "Existing Kubernetes service",
                "type": "object"
              }
            ],
            "title": "Type",
            "type": "object"
          },
          "ingress": {
            "oneOf": [
              {
                "additionalProperties": false,
                "nullable": true,
                "title": "Private",
                "type": "object"
              },
              {
                "properties": {
                  "useDefaultSubdomain": {
                    "default": true,
                    "description": "Use the team domain so that the URL reveals the owner.",
                    "title": "Use team domain (preferred)",
                    "type": "boolean"
                  },
                  "subdomain": {
                    "description": "A host that is used to set DNS 'A' records",
                    "nullable": true,
                    "title": "Host",
                    "type": "string",
                    "pattern": "^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9])$"
                  },
                  "domain": {
                    "description": "A managed DNS zone",
                    "title": "DNS Zone",
                    "type": "string"
                  },
                  "path": {
                    "description": "The path in the URL that the service should be mapped to (e.g. for microservices on one app/domain.)",
                    "title": "URL path",
                    "type": "string"
                  },
                  "forwardPath": {
                    "description": "Forward the URL path into the service (don't rewrite to /)",
                    "title": "Forward path",
                    "type": "boolean"
                  },
                  "hasSingleSignOn": {
                    "default": false,
                    "title": "Authenticate with Single Sign On",
                    "type": "boolean"
                  },
                  "hasCert": {
                    "default": false,
                    "description": "If true a certificate should exist already",
                    "title": "Already has a certificate",
                    "type": "boolean"
                  },
                  "certArn": {
                    "example": "arn:aws:acm:eu-central-1:xxx:certificate/xxx",
                    "title": "Certificate ARN",
                    "type": "string"
                  },
                  "certSelect": {
                    "default": true,
                    "title": "Select existing secret name",
                    "type": "boolean"
                  },
                  "certName": {
                    "example": "www-example-com",
                    "title": "Secret name",
                    "type": "string"
                  }
                },
                "required": ["domain", "subdomain"],
                "title": "Public URL",
                "type": "object"
              }
            ],
            "title": "Exposure",
            "x-acl": {
              "team": ["read"]
            }
          },
          "teamId": {
            "type": "string",
            "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
            "readOnly": true
          }
        },
        "required": ["name", "teamId"],
        "type": "object"
      },
      "Session": {
        "x-acl": {
          "admin": ["read"],
          "team": ["read"]
        },
        "properties": {
          "cluster": {
            "readOnly": true,
            "properties": {
              "apiName": {
                "description": "Only used for API/UI to show in app.",
                "type": "string",
                "readOnly": true
              },
              "apiServer": {
                "description": "Used by kubectl for local deployment to target cluster.",
                "type": "string",
                "readOnly": true
              },
              "entrypoint": {
                "description": "A Kubernetes API public IP address (onprem only).",
                "type": "string",
                "readOnly": true
              },
              "k8sVersion": {
                "readOnly": true,
                "default": "1.19",
                "description": "The cluster k8s version. Otomi supports 2 minor versions backwards compatibility from the suggested default.",
                "enum": ["1.17", "1.18", "1.19"],
                "type": "string"
              },
              "name": {
                "type": "string",
                "readOnly": true
              },
              "otomiVersion": {
                "default": "latest",
                "description": "Please pin this a valid release version found in the repo. Suggestion: try the most recent stable version.",
                "type": "string"
              },
              "provider": {
                "type": "string",
                "enum": ["aws", "azure", "google", "oneprem"],
                "readOnly": true
              },
              "region": {
                "description": "Dependent on provider.",
                "type": "string",
                "readOnly": true
              },
              "vpcID": {
                "description": "AWS only. If provided will override autodiscovery from metadata.",
                "type": "string",
                "readOnly": true
              }
            },
            "required": ["otomiVersion"],
            "type": "object"
          },
          "dns": {
            "readOnly": true
          },
          "core": {
            "readOnly": true
          },
          "isDirty": {
            "type": "boolean",
            "readOnly": true
          },
          "namespaces": {
            "readOnly": true,
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "teams": {
            "readOnly": true,
            "type": "array",
            "items": {
              "properties": {
                "id": {
                  "type": "string",
                  "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                  "title": "ID",
                  "x-acl": {
                    "admin": ["read"],
                    "team": ["read"]
                  }
                },
                "name": {
                  "type": "string",
                  "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
                  "title": "Name",
                  "description": "A team name"
                },
                "oidc": {
                  "properties": {
                    "groupMapping": {
                      "description": "An OIDC group name/id granting access to this team",
                      "title": "Group mapping",
                      "type": "string"
                    }
                  },
                  "title": "OIDC",
                  "type": "object"
                },
                "password": {
                  "type": "string",
                  "writeOnly": true
                },
                "alerts": {
                  "properties": {
                    "email": {
                      "properties": {
                        "critical": {
                          "description": "Email addresses (comma separated) for critical events.",
                          "title": "Criticals",
                          "type": "string"
                        },
                        "nonCritical": {
                          "description": "One or more email addresses (comma separated) for non-critical events.",
                          "title": "Non criticals",
                          "type": "string"
                        }
                      },
                      "title": "Email",
                      "type": "object"
                    },
                    "msteams": {
                      "properties": {
                        "highPrio": {
                          "description": "The high prio web hook",
                          "title": "High prio webhook",
                          "type": "string"
                        },
                        "lowPrio": {
                          "description": "The low prio web hook",
                          "title": "Low prio webhook",
                          "type": "string"
                        }
                      },
                      "title": "Microsoft Teams",
                      "type": "object"
                    },
                    "receivers": {
                      "items": {
                        "enum": ["slack", "msteams", "email"],
                        "type": "string"
                      },
                      "title": "Receivers",
                      "type": "array",
                      "uniqueItems": true
                    },
                    "slack": {
                      "properties": {
                        "channel": {
                          "description": "Slack channel for non-criticals. If none is given the global one is used, which defaults to 'mon-otomi'.",
                          "title": "Channel for non-criticals",
                          "type": "string"
                        },
                        "channelCrit": {
                          "description": "Slack channel for critical alerts. If none is given the global one is used, which defaults to 'mon-otomi-crit'.",
                          "title": "Channel for criticals",
                          "type": "string"
                        },
                        "url": {
                          "description": "Slack web hook. If none is given the global one is used.",
                          "title": "Web hook",
                          "type": "string"
                        }
                      },
                      "title": "Slack",
                      "type": "object"
                    }
                  },
                  "title": "Alerting endpoints",
                  "type": "object"
                }
              },
              "required": ["name"],
              "type": "object",
              "x-acl": {
                "admin": ["delete-any", "read-any", "create-any", "update-any"],
                "team": ["read-any", "update"]
              },
              "x-externalDocsPath": "docs/configuring-teams"
            }
          },
          "user": {
            "readOnly": true,
            "x-acl": {
              "admin": [],
              "team": []
            },
            "properties": {
              "name": {
                "type": "string",
                "description": "A user name",
                "readOnly": true
              },
              "email": {
                "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
                "type": "string"
              },
              "isAdmin": {
                "type": "boolean",
                "default": false,
                "description": "If the user is admin",
                "readOnly": true
              },
              "teams": {
                "type": "array",
                "default": [],
                "description": "A list of teams the user belongs to",
                "items": {
                  "type": "string"
                },
                "readOnly": true,
                "uniqueItems": true
              },
              "roles": {
                "type": "array",
                "default": [],
                "description": "A list of roles that the user has",
                "items": {
                  "type": "string"
                },
                "readOnly": true,
                "uniqueItems": true
              }
            },
            "required": ["isAdmin", "name", "email", "teams", "roles"],
            "type": "object"
          }
        },
        "type": "object"
      },
      "Settings": {
        "x-acl": {
          "admin": ["read-any", "update-any"],
          "team": []
        },
        "additionalProperties": false,
        "properties": {
          "alerts": {
            "type": "object",
            "properties": {
              "drone": {
                "default": "slack",
                "enum": ["slack", "msteams"],
                "type": "string"
              },
              "email": {
                "additionalProperties": false,
                "properties": {
                  "critical": {
                    "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
                    "type": "string",
                    "description": "One or more email addresses (comma separated) for critical events."
                  },
                  "nonCritical": {
                    "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
                    "type": "string",
                    "description": "One or more email addresses (comma separated) for non-critical events."
                  }
                },
                "type": "object"
              },
              "groupInterval": {
                "default": "5m",
                "description": "How long to wait before sending a notification about new alerts that are added to a group of alerts for which an initial notification has already been sent. (Usually ~5m or more.)",
                "type": "string"
              },
              "msteams": {
                "additionalProperties": false,
                "properties": {
                  "highPrio": {
                    "description": "The low prio web hook.",
                    "type": "string"
                  },
                  "lowPrio": {
                    "description": "The high prio web hook.",
                    "type": "string"
                  }
                },
                "type": "object"
              },
              "receivers": {
                "description": "Notification receivers.",
                "items": {
                  "enum": ["slack", "msteams", "email"],
                  "type": "string"
                },
                "type": "array"
              },
              "repeatInterval": {
                "default": "3h",
                "description": "How long to wait before sending a notification again if it has already been sent successfully for an alert. (Usually ~3h or more).",
                "type": "string"
              },
              "slack": {
                "additionalProperties": false,
                "properties": {
                  "channel": {
                    "default": "mon-otomi",
                    "description": "The Slack channel for non-critical notifications.",
                    "type": "string"
                  },
                  "channelCrit": {
                    "default": "mon-otomi",
                    "description": "The Slack channel for critical notifications.",
                    "type": "string"
                  },
                  "url": {
                    "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                    "type": "string",
                    "description": "A Slack webhook URL."
                  }
                },
                "type": "object"
              }
            }
          },
          "azure": {
            "description": "Azure specific configuration.",
            "properties": {
              "appgw": {
                "properties": {
                  "isManaged": {
                    "default": true,
                    "description": "Is this appgw installed as AKS addon?",
                    "type": "boolean"
                  }
                },
                "type": "object"
              },
              "diskType": {
                "description": "An Azure disk type (SKU Type).",
                "enum": [
                  "Standard_LRS",
                  "Standard_GRS",
                  "Standard_RAGRS",
                  "Standard_ZRS",
                  "Premium_LRS",
                  "Premium_ZRS",
                  "Standard_GZRS",
                  "Standard_RAGZRS"
                ],
                "type": "string"
              },
              "keyVault": {
                "description": "Azure Key Vault access credentials. Will use azure.tenantId if tenantId is not provided.",
                "properties": {
                  "tenantId": {
                    "description": "An Azure tenant ID.",
                    "type": "string"
                  },
                  "clientId": {
                    "description": "An Azure client ID.",
                    "type": "string"
                  },
                  "clientSecret": {
                    "description": "An Azure client secret.",
                    "type": "string"
                  }
                },
                "required": ["clientId", "clientSecret"],
                "type": "object"
              },
              "monitor": {
                "properties": {
                  "appInsightsApiKey": {
                    "description": "An Azure AppInsights client secret (defaults to clientSecret).",
                    "type": "string"
                  },
                  "appInsightsAppId": {
                    "description": "An Azure AppInsights client id (defaults to clientId).",
                    "type": "string"
                  },
                  "clientId": {
                    "description": "An Azure client id.",
                    "type": "string"
                  },
                  "clientSecret": {
                    "description": "An Azure client secret.",
                    "type": "string"
                  },
                  "logAnalyticsClientId": {
                    "description": "An Azure client secret (defaults to clientSecret).",
                    "type": "string"
                  },
                  "logAnalyticsClientSecret": {
                    "description": "An Azure client secret (defaults to clientSecret).",
                    "type": "string"
                  },
                  "logAnalyticsTenantId": {
                    "description": "An Azure tenant id (defaults to tenantId).",
                    "type": "string"
                  },
                  "logAnalyticsWorkspace": {
                    "description": "An Azure monitor log analytics workspace.",
                    "type": "string"
                  }
                }
              },
              "resourceGroup": {
                "description": "An Azure resource group.",
                "type": "string"
              },
              "subscriptionId": {
                "description": "An Azure subscription ID.",
                "type": "string"
              },
              "tenantId": {
                "description": "An Azure tenant ID.",
                "type": "string"
              }
            },
            "required": ["diskType", "resourceGroup", "subscriptionId", "tenantId"],
            "type": "object"
          },
          "customer": {
            "additionalProperties": false,
            "properties": {
              "name": {
                "type": "string"
              }
            },
            "type": "object"
          },
          "google": {
            "description": "Google specific configuration.",
            "properties": {
              "cloudDnsKey": {
                "description": "A service account key for managing a DNS zone.",
                "type": "string"
              },
              "kmsAccount": {
                "description": "A service account key for managing a KMS vault.",
                "type": "string"
              },
              "projectId": {
                "description": "A Google Cloud project ID for accessing DNS zone.",
                "type": "string"
              }
            },
            "required": ["cloudDnsKey", "projectId"],
            "type": "object"
          },
          "dns": {
            "properties": {
              "dnsZones": {
                "description": "Extra dns zones that the cluster can administer (see dns). Team services can use this to publish their URLs on.",
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              "domain": {
                "type": "string",
                "description": "A fqdn for the cluster"
              }
            },
            "oneOf": [
              {
                "title": "aws",
                "properties": {
                  "aws": {
                    "properties": {
                      "region": {
                        "type": "string"
                      }
                    },
                    "required": ["region"]
                  }
                },
                "required": ["aws"]
              },
              {
                "title": "azure",
                "properties": {
                  "azure": {
                    "properties": {
                      "cloud": {
                        "type": "string",
                        "description": "Azure Cloud to use"
                      },
                      "resourceGroup": {
                        "type": "string",
                        "description": "Azure resource group to use"
                      },
                      "hostedZoneName": {
                        "type": "string"
                      },
                      "tenantId": {
                        "type": "string",
                        "description": "Azure tenant ID to use (will default to global value)"
                      },
                      "subscriptionId": {
                        "type": "string",
                        "description": "Azure subscription ID to use (will default to global value)"
                      },
                      "aadClientId": {
                        "type": "string",
                        "description": "Azure Application Client ID to use"
                      },
                      "aadClientSecret": {
                        "type": "string",
                        "description": "Azure Application Client Secret to use"
                      },
                      "useManagedIdentityExtension": {
                        "type": "boolean",
                        "description": "If you use Azure MSI, this should be set to true",
                        "default": false
                      }
                    },
                    "required": ["resourceGroup", "tenantId", "subscriptionId", "aadClientId", "aadClientSecret"]
                  }
                },
                "required": ["azure"]
              },
              {
                "title": "google",
                "properties": {
                  "google": {
                    "properties": {
                      "serviceAccountKey": {
                        "description": "A service account key for managing a DNS zone.",
                        "type": "string"
                      },
                      "project": {
                        "type": "string"
                      }
                    },
                    "required": ["serviceAccountKey", "project"]
                  }
                },
                "required": ["google"]
              }
            ],
            "required": ["domain"],
            "type": "object"
          },
          "home": {
            "type": "object",
            "properties": {
              "drone": {
                "default": "slack",
                "enum": ["slack", "msteams"],
                "type": "string"
              },
              "email": {
                "additionalProperties": false,
                "properties": {
                  "critical": {
                    "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
                    "type": "string",
                    "description": "One or more email addresses (comma separated) for critical events."
                  },
                  "nonCritical": {
                    "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
                    "type": "string",
                    "description": "One or more email addresses (comma separated) for non-critical events."
                  }
                },
                "type": "object"
              },
              "groupInterval": {
                "default": "5m",
                "description": "How long to wait before sending a notification about new alerts that are added to a group of alerts for which an initial notification has already been sent. (Usually ~5m or more.)",
                "type": "string"
              },
              "msteams": {
                "additionalProperties": false,
                "properties": {
                  "highPrio": {
                    "description": "The low prio web hook.",
                    "type": "string"
                  },
                  "lowPrio": {
                    "description": "The high prio web hook.",
                    "type": "string"
                  }
                },
                "type": "object"
              },
              "receivers": {
                "description": "Notification receivers.",
                "items": {
                  "enum": ["slack", "msteams", "email"],
                  "type": "string"
                },
                "type": "array"
              },
              "repeatInterval": {
                "default": "3h",
                "description": "How long to wait before sending a notification again if it has already been sent successfully for an alert. (Usually ~3h or more).",
                "type": "string"
              },
              "slack": {
                "additionalProperties": false,
                "properties": {
                  "channel": {
                    "default": "mon-otomi",
                    "description": "The Slack channel for non-critical notifications.",
                    "type": "string"
                  },
                  "channelCrit": {
                    "default": "mon-otomi",
                    "description": "The Slack channel for critical notifications.",
                    "type": "string"
                  },
                  "url": {
                    "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                    "type": "string",
                    "description": "A Slack webhook URL."
                  }
                },
                "type": "object"
              }
            }
          },
          "kms": {
            "description": "Use Cloud KMS to encrypt and decrypt the master key",
            "oneOf": [
              {
                "title": "gcpckms",
                "properties": {
                  "gcpckms": {
                    "properties": {
                      "project": {
                        "type": "string"
                      },
                      "region": {
                        "type": "string"
                      },
                      "key_ring": {
                        "type": "string"
                      },
                      "kmsAccount": {
                        "type": "string"
                      }
                    },
                    "required": ["project", "region", "key_ring", "kmsAccount"],
                    "type": "object"
                  }
                },
                "required": ["gcpckms"],
                "type": "object"
              },
              {
                "title": "awskms",
                "properties": {
                  "awskms": {
                    "properties": {
                      "region": {
                        "type": "string"
                      },
                      "access_key": {
                        "type": "string"
                      },
                      "secret_key": {
                        "type": "string"
                      },
                      "endpoint": {
                        "type": "string"
                      }
                    },
                    "required": ["region", "access_key", "secret_key", "endpoint"],
                    "type": "object"
                  }
                },
                "required": ["awskms"],
                "type": "object"
              },
              {
                "title": "azurekeyvault",
                "properties": {
                  "azurekeyvault": {
                    "properties": {
                      "vault_name": {
                        "type": "string"
                      },
                      "tenant_id": {
                        "type": "string"
                      },
                      "client_id": {
                        "type": "string"
                      },
                      "client_secret": {
                        "type": "string"
                      }
                    },
                    "required": ["vault_name", "tenant_id", "client_id", "client_secret"],
                    "type": "object"
                  }
                },
                "required": ["azurekeyvault"],
                "type": "object"
              }
            ],
            "type": "object"
          },
          "oidc": {
            "additionalProperties": false,
            "description": "Holds many parts used in different locations. Please see keycloak, istio and oauth-proxy all consuming parts.",
            "properties": {
              "adminGroupID": {
                "type": "string"
              },
              "apiUrl": {
                "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                "type": "string"
              },
              "authUrl": {
                "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                "type": "string"
              },
              "clientID": {
                "type": "string"
              },
              "clientSecret": {
                "type": "string"
              },
              "issuer": {
                "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                "type": "string"
              },
              "scope": {
                "type": "string"
              },
              "teamAdminGroupID": {
                "type": "string"
              },
              "tenantID": {
                "type": "string"
              },
              "tokenUrl": {
                "pattern": "^(https:\\/\\/)([\\w\\-])+\\.{1}([a-zA-Z]{2,63})([\\/\\w-]*)*\\/?\\??([^#\\n\\r]*)?#?([^\\n\\r]*)$",
                "type": "string"
              },
              "usernameClaimMapper": {
                "type": "string",
                "description": "Claim name used by Keycloak to identify incoming users from identity provider"
              },
              "subClaimMapper": {
                "type": "string",
                "description": "Select OIDC claim to be used as a unique user identifier",
                "default": "sub"
              }
            },
            "type": "object"
          },
          "otomi": {
            "additionalProperties": false,
            "properties": {
              "hasCloudLB": {
                "default": false,
                "description": "Set this to true when an external LB exists or needs to be started (AWS ALB, Azure AppGW, Google Apigee). This will then be configured through ingress controllers. Expects existing LBs to terminate https. Currently this is only working correctly for Azure, and not for AWS and Google. AWS is close to completion.",
                "type": "boolean"
              },
              "isHomeMonitored": {
                "default": false,
                "description": "Whether this cluster is home monitored (like when under a Premium SLA). Sends criticals home.",
                "type": "boolean"
              },
              "isManaged": {
                "default": true,
                "description": "Whether masters are managed and not under control. Set this to false when onprem.",
                "type": "boolean"
              },
              "isMultitenant": {
                "default": true,
                "description": "Whether to separate team metrics and logs. Disabling this lets everybody be admin and see everything.",
                "type": "boolean"
              },
              "mode": {
                "default": "ee",
                "description": "The otomi-core edition. Either community edition (ce) or enterprise edition (ee).",
                "enum": ["ce", "ee"],
                "type": "string"
              },
              "pullSecret": {
                "default": "",
                "description": "The pullsecret to deploy the Otomi API and Console. Requires an Otomi license.",
                "type": "string"
              },
              "teamPrefix": {
                "default": "team-",
                "description": "The prefix to use in URLs for team domains.",
                "pattern": "^[a-z]+[-]{1}$",
                "type": "string"
              },
              "addons": {
                "description": "Manage addon configuration",
                "additionalProperties": false,
                "properties": {
                  "conftest": {
                    "properties": {
                      "enabled": {
                        "type": "boolean",
                        "default": true,
                        "description": "Use this flag to enable conftest for policy validation"
                      }
                    },
                    "type": "object"
                  }
                },
                "type": "object"
              }
            },
            "type": "object"
          },
          "otomiInstanceUrls": {
            "description": "Use this property to indicate other otomi instances and easily navigate between them from otomi-console",
            "type": "array",
            "properties": {
              "items": {
                "type": "string"
              }
            },
            "default": []
          },
          "smtp": {
            "additionalProperties": false,
            "properties": {
              "auth_identity": {
                "type": "string"
              },
              "auth_password": {
                "type": "string"
              },
              "auth_secret": {
                "type": "string"
              },
              "auth_username": {
                "type": "string"
              },
              "from": {
                "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
                "type": "string",
                "description": "The \"from\" address. Defaults to alerts@$clusterDomain."
              },
              "hello": {
                "type": "string"
              },
              "smarthost": {
                "description": "The smtp host:port combination.",
                "pattern": "^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9]):()([1-9]|[1-5]?[0-9]{2,4}|6[1-4][0-9]{3}|65[1-4][0-9]{2}|655[1-2][0-9]|6553[1-5])$",
                "type": "string"
              }
            },
            "required": ["smarthost"],
            "type": "object"
          }
        },
        "type": "object"
      },
      "Team": {
        "properties": {
          "id": {
            "type": "string",
            "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
            "title": "ID",
            "x-acl": {
              "admin": ["read"],
              "team": ["read"]
            }
          },
          "name": {
            "type": "string",
            "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
            "title": "Name",
            "description": "A team name"
          },
          "oidc": {
            "properties": {
              "groupMapping": {
                "description": "An OIDC group name/id granting access to this team",
                "title": "Group mapping",
                "type": "string"
              }
            },
            "title": "OIDC",
            "type": "object"
          },
          "password": {
            "type": "string",
            "writeOnly": true
          },
          "alerts": {
            "properties": {
              "email": {
                "properties": {
                  "critical": {
                    "description": "Email addresses (comma separated) for critical events.",
                    "title": "Criticals",
                    "type": "string"
                  },
                  "nonCritical": {
                    "description": "One or more email addresses (comma separated) for non-critical events.",
                    "title": "Non criticals",
                    "type": "string"
                  }
                },
                "title": "Email",
                "type": "object"
              },
              "msteams": {
                "properties": {
                  "highPrio": {
                    "description": "The high prio web hook",
                    "title": "High prio webhook",
                    "type": "string"
                  },
                  "lowPrio": {
                    "description": "The low prio web hook",
                    "title": "Low prio webhook",
                    "type": "string"
                  }
                },
                "title": "Microsoft Teams",
                "type": "object"
              },
              "receivers": {
                "items": {
                  "enum": ["slack", "msteams", "email"],
                  "type": "string"
                },
                "title": "Receivers",
                "type": "array",
                "uniqueItems": true
              },
              "slack": {
                "properties": {
                  "channel": {
                    "description": "Slack channel for non-criticals. If none is given the global one is used, which defaults to 'mon-otomi'.",
                    "title": "Channel for non-criticals",
                    "type": "string"
                  },
                  "channelCrit": {
                    "description": "Slack channel for critical alerts. If none is given the global one is used, which defaults to 'mon-otomi-crit'.",
                    "title": "Channel for criticals",
                    "type": "string"
                  },
                  "url": {
                    "description": "Slack web hook. If none is given the global one is used.",
                    "title": "Web hook",
                    "type": "string"
                  }
                },
                "title": "Slack",
                "type": "object"
              }
            },
            "title": "Alerting endpoints",
            "type": "object"
          }
        },
        "required": ["name"],
        "type": "object",
        "x-acl": {
          "admin": ["delete-any", "read-any", "create-any", "update-any"],
          "team": ["read-any", "update"]
        },
        "x-externalDocsPath": "docs/configuring-teams"
      },
      "User": {
        "readOnly": true,
        "x-acl": {
          "admin": [],
          "team": []
        },
        "properties": {
          "name": {
            "type": "string",
            "description": "A user name",
            "readOnly": true
          },
          "email": {
            "pattern": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$",
            "type": "string"
          },
          "isAdmin": {
            "type": "boolean",
            "default": false,
            "description": "If the user is admin",
            "readOnly": true
          },
          "teams": {
            "type": "array",
            "default": [],
            "description": "A list of teams the user belongs to",
            "items": {
              "type": "string"
            },
            "readOnly": true,
            "uniqueItems": true
          },
          "roles": {
            "type": "array",
            "default": [],
            "description": "A list of roles that the user has",
            "items": {
              "type": "string"
            },
            "readOnly": true,
            "uniqueItems": true
          }
        },
        "required": ["isAdmin", "name", "email", "teams", "roles"],
        "type": "object"
      }
    }
  }
}
