openapi: '3.0.0'
security:
  - groupAuthz: []
info:
  title: The otomi API
  description: Holds the entire schema needed by console to autogenerate forms
  version: 2.0.0b1
servers:
  - url: '/'

externalDocs:
  description: 'This is the base url of the external documentation'
  url: https://techdocs.akamai.com/app-platform/docs/ #Using this URL a final docUrl can be made using this+info.version+ the component's x-externalDocsPath

# -------------------------------------------- Paths
paths:
  /v1/otomi/values:
    get:
      operationId: getValues
      description: Get otomi values
      x-aclSchema: OtomiCliValues
      parameters:
        - name: filesOnly
          in: query
          description: IDs of settings to return
          schema:
            type: string
            enum: ['true', 'false']
        - name: excludeSecrets
          in: query
          schema:
            type: string
            enum: ['true', 'false']
        - name: withWorkloadValues
          in: query
          schema:
            type: string
            enum: ['true', 'false']
      responses:
        '200':
          description: Successfully obtained otomi values
          content:
            application/yaml:
              schema:
                $ref: '#/components/schemas/OtomiCliValues'

  /v1/teams:
    get:
      operationId: getTeams
      description: Get teams collection
      x-aclSchema: Team
      responses:
        '200':
          description: Successfully obtained teams collection
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Team'
    post:
      operationId: createTeam
      description: Create a team
      x-aclSchema: Team
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Team'
        description: Team object that needs to be added to the collection
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully obtained teams collection
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'

  '/v1/teams/{teamId}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getTeam
      description: Get a specific team
      x-aclSchema: Team
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained team
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
    put:
      operationId: editTeam
      description: Edit a team
      x-aclSchema: Team
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Team'
        description: Team object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited team
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
    delete:
      operationId: deleteTeam
      description: Delete team
      x-aclSchema: Team
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a team

  /v2/teams:
    get:
      operationId: getAplTeams
      description: Get teams collection
      x-aclSchema: Team
      responses:
        '200':
          description: Successfully obtained teams collection
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplTeamSettingsResponse'
    post:
      operationId: createAplTeam
      description: Create a team
      x-aclSchema: Team
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplTeamSettingsRequest'
        description: Team object that needs to be added to the collection
        required: true
      responses:

        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully obtained teams collection
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplTeamSettingsResponse'

  '/v2/teams/{teamId}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getAplTeam
      description: Get a specific team
      x-aclSchema: Team
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained team
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplTeamSettingsResponse'
    put:
      operationId: editAplTeam
      description: Edit a team
      x-aclSchema: Team
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplTeamSettingsRequest'
        description: Team object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited team
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplTeamSettingsResponse'
    delete:
      operationId: deleteAplTeam
      description: Delete team
      x-aclSchema: Team
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a team

  /v1/services:
    get:
      operationId: getAllServices
      description: Get all services running on the cluster
      x-aclSchema: Service
      responses:
        '200':
          description: Successfully obtained all services
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Service'
        '400':
          $ref: '#/components/responses/BadRequest'

  '/v1/teams/{teamId}/services':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getTeamServices
      description: Get services from a given team
      x-aclSchema: Service
      responses:
        '200':
          description: Successfully obtained services
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Service'
        '400':
          $ref: '#/components/responses/BadRequest'

    post:
      operationId: createService
      description: Create a service
      x-aclSchema: Service
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Service'
        description: Service object
        required: true
      responses:

        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored service configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Service'

  '/v1/teams/{teamId}/kubernetes/services':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getTeamK8sServices
      description: Get services from a given team
      x-aclSchema: Service
      responses:
        '200':
          description: Successfully obtained kubernetes services
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/K8sService'
        '400':
          $ref: '#/components/responses/BadRequest'

  '/v1/teams/{teamId}/kubernetes/networkpolicies':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getK8SWorkloadPodLabels
      description: Get Podlabels from given workload
      x-aclSchema: NetworkPolicies
      parameters:
        - name: workloadName
          in: query
          description: name of the workload to get Podlabels from
          schema:
            type: string
        - name: namespace
          in: query
          description: namespace of the workload to get Podlabels from
          schema:
            type: string
      responses:
        '200':
          description: Successfully obtained Podlabels from given workload
          content:
            application/json:
              schema:
                type: object
                additionalProperties:
                  type: string
        '400':
          $ref: '#/components/responses/BadRequest'

  '/v1/teams/{teamId}/kubernetes/fetchPodsFromLabel':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: listUniquePodNamesByLabel
      description: Get pods name from label
      parameters:
        - name: labelSelector
          in: query
          description: name of the label to get pods name from
          schema:
            type: string
        - name: namespace
          in: query
          description: namespace of the workload to get Podlabels from
          schema:
            type: string
      responses:
        '200':
          description: Successfully obtained pods from given label
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
        '400':
          $ref: '#/components/responses/BadRequest'

  '/v1/teams/{teamId}/services/{serviceName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/serviceParams'
    get:
      operationId: getService
      description: Get a service from a given team
      x-aclSchema: Service
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained service configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Service'
    put:
      operationId: editService
      description: Edit a service from a given team
      x-aclSchema: Service
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Service'
        description: Service object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited service
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Service'
    delete:
      operationId: deleteService
      description: Delete a service from a given team
      x-aclSchema: Service
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a service

  /v2/services:
    get:
      operationId: getAllAplServices
      description: Get all services running on the cluster
      x-aclSchema: Service
      responses:
        '200':
          description: Successfully obtained all services
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplServiceResponse'
        '400':
          $ref: '#/components/responses/BadRequest'

  '/v2/teams/{teamId}/services':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getTeamAplServices
      description: Get services from a given team
      x-aclSchema: Service
      responses:
        '200':
          description: Successfully obtained services
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplServiceResponse'
        '400':
          $ref: '#/components/responses/BadRequest'

    post:
      operationId: createAplService
      description: Create a service
      x-aclSchema: Service
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplServiceRequest'
        description: Service object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored service configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplServiceResponse'

  '/v2/teams/{teamId}/services/{serviceName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/serviceParams'
    get:
      operationId: getAplService
      description: Get a service from a given team
      x-aclSchema: Service
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained service configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplServiceResponse'
    put:
      operationId: editAplService
      description: Edit a service from a given team
      x-aclSchema: Service
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplServiceRequest'
        description: Service object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited service
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplServiceResponse'
    delete:
      operationId: deleteAplService
      description: Delete a service from a given team
      x-aclSchema: Service
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a service

  /v1/sealedsecrets:
    get:
      operationId: getAllSealedSecrets
      description: Get all sealed secrets
      x-aclSchema: SealedSecret
      responses:
        '200':
          description: Successfully obtained all sealed secrets
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SealedSecret'
        '400':
          $ref: '#/components/responses/BadRequest'

  /v1/sealedsecretskeys:
    get:
      operationId: downloadSealedSecretKeys
      description: Download sealed secret keys
      x-aclSchema: SealedSecretsKeys
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully downloaded sealed secret keys
          content:
            application/key:
              schema:
                $ref: '#/components/schemas/SealedSecretsKeys'

  '/v1/teams/{teamId}/k8sSecrets':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getSecretsFromK8s
      description: Get secrets from k8s
      x-aclSchema: K8sSecret
      responses:
        '200':
          description: Successfully obtained secrets from k8s
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/K8sSecret'
        '400':
          $ref: '#/components/responses/BadRequest'

  '/v1/teams/{teamId}/sealedsecrets':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getSealedSecrets
      description: Get sealed secrets from a given team
      x-aclSchema: SealedSecret
      responses:
        '200':
          description: Successfully obtained sealed secrets
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SealedSecret'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OpenApiValidationError'
    post:
      operationId: createSealedSecret
      description: Create a team sealed secret
      x-aclSchema: SealedSecret
      parameters:
        - name: teamId
          in: path
          description: ID of team
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SealedSecret'
        description: SealedSecret object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored sealed secret configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SealedSecret'

  '/v1/teams/{teamId}/sealedsecrets/{sealedSecretName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/sealedSecretParams'
    get:
      operationId: getSealedSecret
      description: Get a sealed secret from a given team
      x-aclSchema: SealedSecret
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained sealed secret configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SealedSecret'
    put:
      operationId: editSealedSecret
      description: Edit a sealed secret from a given team
      x-aclSchema: SealedSecret
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SealedSecret'
        description: SealedSecret object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team sealed secret
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SealedSecret'
    delete:
      operationId: deleteSealedSecret
      description: Delete a sealed secret from a given team
      x-aclSchema: SealedSecret
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a team sealed secret

  /v2/sealedsecrets:
    get:
      operationId: getAllAplSecrets
      description: Get all secrets
      x-aclSchema: SealedSecret
      responses:
        '200':
          description: Successfully obtained all secrets
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplSecretResponse'
        '400':
          $ref: '#/components/responses/BadRequest'

  '/v2/teams/{teamId}/sealedsecrets':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getAplSealedSecrets
      description: Get sealed secrets from a given team
      x-aclSchema: SealedSecret
      responses:
        '200':
          description: Successfully obtained sealed secrets
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplSecretResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OpenApiValidationError'
    post:
      operationId: createAplSealedSecret
      description: Create a team sealed secret
      x-aclSchema: SealedSecret
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplSecretRequest'
        description: SealedSecret object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored sealed secret configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplSecretResponse'

  '/v2/teams/{teamId}/sealedsecrets/{sealedSecretName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/sealedSecretParams'
    get:
      operationId: getAplSealedSecret
      description: Get a sealed secret from a given team
      x-aclSchema: SealedSecret
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained sealed secret configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplSecretResponse'
    put:
      operationId: editAplSealedSecret
      description: Edit a sealed secret from a given team
      x-aclSchema: SealedSecret
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplSecretRequest'
        description: SealedSecret object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team sealed secret
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplSecretResponse'
    delete:
      operationId: deleteAplSealedSecret
      description: Delete a sealed secret from a given team
      x-aclSchema: SealedSecret
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a team sealed secret

  '/v1/netpols':
    get:
      operationId: getAllNetpols
      x-aclSchema: Netpol
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained all network policy configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Netpol'

  '/v1/teams/{teamId}/netpols':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getTeamNetpols
      x-aclSchema: Build
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained team network policy configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Netpol'
    post:
      operationId: createNetpol
      description: Create a team network policy
      x-aclSchema: Netpol
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Netpol'
        description: Network policy object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored network policy configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Netpol'

  '/v1/teams/{teamId}/netpols/{netpolName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/netpolParams'
    get:
      operationId: getNetpol
      description: Get a network policy from a given team
      x-aclSchema: Netpol
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained network policy configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Netpol'
    put:
      operationId: editNetpol
      description: Edit a network policy from a given team
      x-aclSchema: Netpol
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Netpol'
        description: Netwok policy object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team network policy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Netpol'
    delete:
      operationId: deleteNetpol
      description: Delete a network policy from a given team
      x-aclSchema: Netpol
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a team network policy

  '/v2/netpols':
    get:
      operationId: getAllAplNetpols
      x-aclSchema: Netpol
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained all network policy configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplNetpolResponse'

  '/v2/teams/{teamId}/netpols':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getTeamAplNetpols
      x-aclSchema: Netpol
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained team network policy configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplNetpolResponse'
    post:
      operationId: createAplNetpol
      description: Create a team network policy
      x-aclSchema: Netpol
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplNetpolRequest'
        description: Network policy object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored network policy configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplNetpolResponse'

  '/v2/teams/{teamId}/netpols/{netpolName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/netpolParams'
    get:
      operationId: getAplNetpol
      description: Get a network policy from a given team
      x-aclSchema: Netpol
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained network policy configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplNetpolResponse'
    put:
      operationId: editAplNetpol
      description: Edit a network policy from a given team
      x-aclSchema: Netpol
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplNetpolRequest'
        description: Netwok policy object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team network policy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplNetpolResponse'
    delete:
      operationId: deleteAplNetpol
      description: Delete a network policy from a given team
      x-aclSchema: Netpol
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a team network policy

  '/v1/backups':
    get:
      operationId: getAllBackups
      x-aclSchema: Backup
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained all backups configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Backup'

  '/v1/teams/{teamId}/backups':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getTeamBackups
      x-aclSchema: Backup
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained team backups configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Backup'
    post:
      operationId: createBackup
      description: Create a team backup
      x-aclSchema: Backup
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Backup'
        description: Backup object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored backup configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Backup'

  '/v1/teams/{teamId}/backups/{backupName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/backupParams'
    delete:
      operationId: deleteBackup
      description: Delete a backup from a given team
      x-aclSchema: Backup
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a backup
    get:
      operationId: getBackup
      description: Get a backup from a given team
      x-aclSchema: Backup
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained backup configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Backup'
    put:
      operationId: editBackup
      description: Edit a backup from a given team
      x-aclSchema: Backup
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Backup'
        description: Backup object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team backup
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Backup'

  '/v2/backups':
    get:
      operationId: getAllAplBackups
      x-aclSchema: Backup
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained all backups configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplBackupResponse'

  '/v2/teams/{teamId}/backups':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getTeamAplBackups
      x-aclSchema: Backup
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained team backups configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplBackupResponse'
    post:
      operationId: createAplBackup
      description: Create a team backup
      x-aclSchema: Backup
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplBackupRequest'
        description: Backup object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored backup configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplBackupResponse'

  '/v2/teams/{teamId}/backups/{backupName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/backupParams'
    delete:
      operationId: deleteAplBackup
      description: Delete a backup from a given team
      x-aclSchema: Backup
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a backup
    get:
      operationId: getAplBackup
      description: Get a backup from a given team
      x-aclSchema: Backup
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained backup configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplBackupResponse'
    put:
      operationId: editAplBackup
      description: Edit a backup from a given team
      x-aclSchema: Backup
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplBackupRequest'
        description: Backup object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team backup
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplBackupResponse'

  '/v1/dashboard':
    get:
      operationId: getDashboard
      parameters:
        - name: teamName
          in: query
          description: Name of the team
          schema:
            type: string
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained dashboard inventory data
          content:
            application/json:
              schema:
                type: object

  '/v1/builds':
    get:
      operationId: getAllBuilds
      x-aclSchema: Build
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained all builds configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Build'

  '/v1/teams/{teamId}/builds':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getTeamBuilds
      x-aclSchema: Build
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained team builds configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Build'
    post:
      operationId: createBuild
      description: Create a team build
      x-aclSchema: Build
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Build'
        description: Build object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored build configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Build'

  '/v1/teams/{teamId}/builds/{buildName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/buildParams'
    delete:
      operationId: deleteBuild
      description: Delete a build from a given team
      x-aclSchema: Build
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a build
    get:
      operationId: getBuild
      description: Get a build from a given team
      x-aclSchema: Build
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained build configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Build'
    put:
      operationId: editBuild
      description: Edit a build from a given team
      x-aclSchema: Build
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Build'
        description: Build object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team build
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Build'

  '/v2/builds':
    get:
      operationId: getAllAplBuilds
      x-aclSchema: Build
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained all builds configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplBuildResponse'

  '/v2/teams/{teamId}/builds':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getTeamAplBuilds
      x-aclSchema: Build
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained team builds configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplBuildResponse'
    post:
      operationId: createAplBuild
      description: Create a team build
      x-aclSchema: Build
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplBuildRequest'
        description: Build object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored build configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplBuildResponse'

  '/v2/teams/{teamId}/builds/{buildName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/buildParams'
    delete:
      operationId: deleteAplBuild
      description: Delete a build from a given team
      x-aclSchema: Build
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a build
    get:
      operationId: getAplBuild
      description: Get a build from a given team
      x-aclSchema: Build
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained build configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplBuildResponse'
    put:
      operationId: editAplBuild
      description: Edit a build from a given team
      x-aclSchema: Build
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplBuildRequest'
        description: Build object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team build
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplBuildResponse'

  '/v1/policies':
    get:
      operationId: getAllPolicies
      x-aclSchema: Policies
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained all policy configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Policies'

  '/v1/teams/{teamId}/policies':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getTeamPolicies
      x-aclSchema: Policies
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained team policy configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Policies'

  '/v1/teams/{teamId}/policies/{policyName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/policyParams'
    get:
      operationId: getPolicy
      description: Get a policy from a given team
      x-aclSchema: Policy
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained policy configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Policy'
    put:
      operationId: editPolicy
      description: Edit a policy from a given team
      x-aclSchema: Policy
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Policy'
        description: Policy object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team policy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Policy'

  '/v2/policies':
    get:
      operationId: getAllAplPolicies
      x-aclSchema: Policies
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained all policy configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplPolicyResponse'

  '/v2/teams/{teamId}/policies':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getTeamAplPolicies
      x-aclSchema: Policies
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained team policy configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplPolicyResponse'

  '/v2/teams/{teamId}/policies/{policyName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/policyParams'
    get:
      operationId: getAplPolicy
      description: Get a policy from a given team
      x-aclSchema: Policy
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained policy configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplPolicyResponse'
    put:
      operationId: editAplPolicy
      description: Edit a policy from a given team
      x-aclSchema: Policy
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplPolicyRequest'
        description: Policy object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team policy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplPolicyResponse'

  '/v1/k8sVersion':
    get:
      operationId: getK8sVersion
      description: Get cluster k8s version
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully obtained k8s version
          content:
            application/json:
              schema:
                type: string

  '/v2/cloudtty':
    get:
      operationId: connectAplCloudtty
      description: Get a cloudtty iFrameUrl
      x-aclSchema: Cloudtty
      parameters:
        - name: teamId
          in: query
          description: Id of the team
          schema:
            type: string
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored cloudtty configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cloudtty'
    delete:
      operationId: deleteAplCloudtty
      description: Delete cloudtty url
      x-aclSchema: Cloudtty
      responses:
        '200':
          description: Successfully removed cloudtty url

  '/v1/cloudtty':
    get:
      operationId: connectCloudtty
      description: Get a cloudtty iFrameUrl
      x-aclSchema: Cloudtty
      parameters:
        - name: teamId
          in: query
          description: Id of the team
          schema:
            type: string
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored cloudtty configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cloudtty'
    delete:
      operationId: deleteCloudtty
      description: Delete cloudtty url
      x-aclSchema: Cloudtty
      responses:
        '200':
          description: Successfully removed cloudtty url

  '/v1/users':
    get:
      operationId: getAllUsers
      x-aclSchema: User
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained all users configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
    post:
      operationId: createUser
      description: Create a team user
      x-aclSchema: User
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
        description: User object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored user configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'

  '/v1/users/{userId}':
    parameters:
      - $ref: '#/components/parameters/userParams'
    get:
      operationId: getUser
      description: Get a user from a given team
      x-aclSchema: User
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained user configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
    put:
      operationId: editUser
      description: Edit a user from a given team
      x-aclSchema: User
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
        description: User object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
    delete:
      operationId: deleteUser
      description: Delete a user from a given team
      x-aclSchema: User
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a user

  '/v1/teams/{teamId}/users':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    put:
      operationId: editTeamUsers
      description: Edit a user from a given team
      x-aclSchema: User
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  id:
                    $ref: '#/components/schemas/User/properties/id'
                  teams:
                    $ref: '#/components/schemas/User/properties/teams'
        description: User object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team user
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      $ref: '#/components/schemas/User/properties/id'
                    teams:
                      $ref: '#/components/schemas/User/properties/teams'

  /v1/coderepos:
    get:
      operationId: getAllCodeRepos
      description: Get all code repositories
      x-aclSchema: CodeRepo
      responses:
        '200':
          description: Successfully obtained all code repositories
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CodeRepo'
        '400':
          $ref: '#/components/responses/BadRequest'

  '/v1/teams/{teamId}/coderepos':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getTeamCodeRepos
      description: Get code repos from a given team
      x-aclSchema: CodeRepo
      responses:
        '200':
          description: Successfully obtained code repositories
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CodeRepo'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OpenApiValidationError'
    post:
      operationId: createCodeRepo
      description: Create a team code repo
      x-aclSchema: CodeRepo
      parameters:
        - name: teamId
          in: path
          description: ID of team
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CodeRepo'
        description: CodeRepo object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored code repo configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CodeRepo'

  '/v1/teams/{teamId}/coderepos/{codeRepositoryName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/codeRepoParams'
    get:
      operationId: getCodeRepo
      description: Get a code repo from a given team
      x-aclSchema: CodeRepo
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained code repo configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CodeRepo'
    put:
      operationId: editCodeRepo
      description: Edit a code repo from a given team
      x-aclSchema: CodeRepo
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CodeRepo'
        description: CodeRepo object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team code repo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CodeRepo'
    delete:
      operationId: deleteCodeRepo
      description: Delete a code repo from a given team
      x-aclSchema: CodeRepo
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a team code repo

  /v2/coderepos:
    get:
      operationId: getAllAplCodeRepos
      description: Get all code repositories
      x-aclSchema: CodeRepo
      responses:
        '200':
          description: Successfully obtained all code repositories
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplCodeRepoResponse'
        '400':
          $ref: '#/components/responses/BadRequest'

  '/v2/teams/{teamId}/coderepos':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getTeamAplCodeRepos
      description: Get code repos from a given team
      x-aclSchema: CodeRepo
      responses:
        '200':
          description: Successfully obtained code repositories
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplCodeRepoResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OpenApiValidationError'
    post:
      operationId: createAplCodeRepo
      description: Create a team code repo
      x-aclSchema: CodeRepo
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplCodeRepoRequest'
        description: CodeRepo object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored code repo configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplCodeRepoResponse'

  '/v2/teams/{teamId}/coderepos/{codeRepositoryName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/codeRepoParams'
    get:
      operationId: getAplCodeRepo
      description: Get a code repo from a given team
      x-aclSchema: CodeRepo
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained code repo configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplCodeRepoResponse'
    put:
      operationId: editAplCodeRepo
      description: Edit a code repo from a given team
      x-aclSchema: CodeRepo
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplCodeRepoRequest'
        description: CodeRepo object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team code repo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplCodeRepoResponse'
    delete:
      operationId: deleteAplCodeRepo
      description: Delete a code repo from a given team
      x-aclSchema: CodeRepo
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a team code repo

  '/v1/workloads':
    get:
      operationId: getAllWorkloads
      x-aclSchema: Workload
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained all workloads configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Workload'

  '/v1/workloadCatalog':
    post:
      operationId: workloadCatalog
      description: Get workload catalog from a repository
      requestBody:
        content:
          application/json:
            schema:
              type: object
        description: Workload catalog object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully updated a team workload catalog
          content:
            application/json:
              schema:
                type: object

  '/v1/helmChartContent':
    get:
      operationId: getHelmChartContent
      parameters:
        - name: url
          in: query
          description: URL of the helm chart
          schema:
            type: string
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained helm chart content
          content:
            application/json:
              schema:
                type: object
                properties:
                  values:
                    type: object
                  error:
                    type: string
  '/v1/createWorkloadCatalog':
    post:
      operationId: createWorkloadCatalog
      description: Create workload catalog from a repository
      requestBody:
        content:
          application/json:
            schema:
              type: object
        description: Workload catalog object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully updated a team workload catalog
          content:
            application/json:
              schema:
                type: object

  '/v1/teams/{teamId}/workloads':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getTeamWorkloads
      x-aclSchema: Workload
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained team workloads configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Workload'
    post:
      operationId: createWorkload
      description: Create a team workload
      x-aclSchema: Workload
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Workload'
        description: Workload object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored workload configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workload'

  '/v1/teams/{teamId}/workloads/{workloadName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/workloadParams'
    delete:
      operationId: deleteWorkload
      description: Delete a workload from a given team
      x-aclSchema: Workload
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a workload
    get:
      operationId: getWorkload
      description: Get a workload from a given team
      x-aclSchema: Workload
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained workload configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workload'
    put:
      operationId: editWorkload
      description: Edit a workload from a given team
      x-aclSchema: Workload
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Workload'
        description: Workload object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team workload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workload'

  '/v1/teams/{teamId}/workloads/{workloadName}/values':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/workloadParams'
    get:
      operationId: getWorkloadValues
      description: Get workload helm chart values
      x-aclSchema: Workload
      responses:
        '200':
          description: Successfully obtained all workload values
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkloadValues'
        '400':
          $ref: '#/components/responses/BadRequest'
    put:
      operationId: editWorkloadValues
      description: Edit workload values
      x-aclSchema: Workload
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WorkloadValues'
        description: Workload values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited workload values
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkloadValues'

  '/v2/workloads':
    get:
      operationId: getAllAplWorkloads
      x-aclSchema: Workload
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained all workloads configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplWorkloadResponse'

  '/v2/workloadNames':
    get:
      operationId: getAllAplWorkloadNames
      x-aclSchema: WorkloadName
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained all workload names
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WorkloadName'

  '/v2/teams/{teamId}/workloads':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getTeamAplWorkloads
      x-aclSchema: Workload
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained team workloads configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplWorkloadResponse'
    post:
      operationId: createAplWorkload
      description: Create a team workload
      x-aclSchema: Workload
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplWorkloadRequest'
        description: Workload object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored workload configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplWorkloadResponse'

  '/v2/teams/{teamId}/workloads/{workloadName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/workloadParams'
    delete:
      operationId: deleteAplWorkload
      description: Delete a workload from a given team
      x-aclSchema: Workload
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a workload
    get:
      operationId: getAplWorkload
      description: Get a workload from a given team
      x-aclSchema: Workload
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained workload configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplWorkloadResponse'
    put:
      operationId: editAplWorkload
      description: Edit a workload from a given team
      x-aclSchema: Workload
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplWorkloadRequest'
        description: Workload object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team workload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplWorkloadResponse'

  '/v1/kubecfg/{teamId}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: downloadKubecfg
      description: Download a kubecfg for a team
      x-aclSchema: Kubecfg
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Succesfully finished the download
          content:
            'application/yaml':
              schema:
                $ref: '#/components/schemas/Kubecfg'

  '/v1/dockerconfig/{teamId}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: downloadDockerConfig
      description: Download Docker login creds for a team
      x-aclSchema: DockerConfig
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Succesfully finished the download
          content:
            'application/yaml':
              schema:
                $ref: '#/components/schemas/DockerConfig'

  /v1/session:
    get:
      operationId: getSession
      description: Get the session for the current user
      responses:
        '200':
          description: Get the session for the logged in user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Session'
        default:
          description: The requested session.

  /v1/apiDocs:
    get:
      operationId: 'v1apiDocs'
      security: []
      description: Get OpenAPIDoc document
      responses:
        '200':
          description: The requested apiDoc.
          content:
            application/json:
              schema:
                type: object
        default:
          description: The requested apiDoc.

  /v1/settingsInfo:
    get:
      operationId: getSettingsInfo
      description: Get settings information from the 'settings.yaml' file.
      x-aclSchema: SettingsInfo
      responses:
        '200':
          description: The request is successful.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SettingsInfo'

  /v1/repoBranches:
    get:
      operationId: getRepoBranches
      description: Get repo branches from the git providers.
      x-aclSchema: RepoBranches
      parameters:
        - name: codeRepoName
          in: query
          description: Name of the code repository
          schema:
            type: string
        - name: teamId
          in: query
          description: Id of the team
          schema:
            type: string
      responses:
        '200':
          description: The request is successful.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /v1/testRepoConnect:
    get:
      operationId: getTestRepoConnect
      description: Get test repo connect information from the git providers.
      x-aclSchema: TestRepoConnect
      parameters:
        - name: url
          in: query
          description: URL of the repository
          schema:
            type: string
        - name: teamId
          in: query
          description: Id of the team
          schema:
            type: string
        - name: secret
          in: query
          description: Name of the secret for private repositories
          schema:
            type: string
      responses:
        '200':
          description: The request is successful.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TestRepoConnect'

  /v1/internalRepoUrls:
    get:
      operationId: getInternalRepoUrls
      x-aclSchema: InternalRepoUrls
      parameters:
        - name: teamId
          in: query
          description: ID of the team
          schema:
            type: string
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained internal repo urls
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  '/v1/objwizard':
    post:
      operationId: createObjWizard
      description: Create a obj wizard configuration
      x-aclSchema: ObjWizard
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ObjWizard'
        description: ObjWizard object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully configured obj wizard configuration
          content:
            application/json:
              schema:
                type: object

  /v1/settings:
    get:
      operationId: getSettings
      description: Get settings from the 'settings.yaml' or 'secret.settings.yaml' file.
      x-aclSchema: Settings
      parameters:
        - name: ids
          in: query
          description: IDs of settings to return
          schema:
            type: array
            items:
              type: string
              uniqueItems: true
      responses:
        '200':
          description: The request is successful.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Settings'

  '/v1/settings/{settingId}':
    parameters:
      - $ref: '#/components/parameters/settingsParams'
    put:
      operationId: editSettings
      description: Edit settings from the 'settings.yaml' or 'secret.settings.yaml' file.
      x-aclSchema: Settings
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Settings'
        description: Put new settings.
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited settings.

  /v1/apps/{teamId}:
    parameters:
      - in: path
        name: teamId
        required: true
        schema:
          type: string
    get:
      operationId: getApps
      description: Get list of apps for a team
      x-aclSchema: App
      parameters:
        - name: picks
          in: query
          description: Selection of properties to return.
          schema:
            type: array
            items:
              type: string
              uniqueItems: true
      responses:
        '200':
          description: The request is successful.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/App'
    put:
      operationId: toggleApps
      description: Turn on/off list of apps for a team
      x-aclSchema: App
      requestBody:
        description: App toggles
        content:
          application/json:
            schema:
              type: object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully toggled apps
  /v1/apps/{teamId}/{appId}:
    parameters:
      - in: path
        name: teamId
        required: true
        schema:
          type: string
      - in: path
        name: appId
        required: true
        schema:
          type: string
    get:
      operationId: getApp
      description: Get app information
      x-aclSchema: App
      responses:
        '200':
          description: The request is successful.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/App'
    put:
      operationId: editApp
      description: Edit app values
      x-aclSchema: App
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/App'
        description: Edit app values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited app values.

  '/alpha/ai/models':
    get:
      operationId: getAIModels
      description: Get available shared AI models (foundation or embedding)
      x-aclSchema: AIModel
      responses:
        '200':
          description: Successfully obtained shared AI models
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplAIModelResponse'

  '/alpha/teams/{teamId}/kb':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getAplKnowledgeBases
      description: Get knowledge bases from a given team
      x-aclSchema: KnowledgeBase
      responses:
        '200':
          description: Successfully obtained knowledge bases
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplKnowledgeBaseResponse'
    post:
      operationId: createAplKnowledgeBase
      description: Create a team knowledge base
      x-aclSchema: KnowledgeBase
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplKnowledgeBaseRequest'
        description: KnowledgeBase object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored knowledge base configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplKnowledgeBaseResponse'

  '/alpha/teams/{teamId}/kb/{knowledgeBaseName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/knowledgeBaseParams'
    get:
      operationId: getAplKnowledgeBase
      description: Get a knowledge base from a given team
      x-aclSchema: KnowledgeBase
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained knowledge base configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplKnowledgeBaseRequest'
    put:
      operationId: editAplKnowledgeBase
      description: Edit a knowledge base from a given team
      x-aclSchema: KnowledgeBase
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplKnowledgeBaseRequest'
        description: KnowledgeBase object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team knowledge base
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplKnowledgeBaseResponse'
    delete:
      operationId: deleteAplKnowledgeBase
      description: Delete a knowledge base from a given team
      x-aclSchema: KnowledgeBase
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a team knowledge base

  '/alpha/teams/{teamId}/agents':
    parameters:
      - $ref: '#/components/parameters/teamParams'
    get:
      operationId: getAplAgents
      description: Get agents from a given team
      x-aclSchema: Agent
      responses:
        '200':
          description: Successfully obtained agents
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AplAgentResponse'
    post:
      operationId: createAplAgent
      description: Create a team agent
      x-aclSchema: Agent
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplAgentRequest'
        description: Agent object
        required: true
      responses:
        
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/OtomiStackError'
        '200':
          description: Successfully stored agent configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplAgentResponse'

  '/alpha/teams/{teamId}/agents/{agentName}':
    parameters:
      - $ref: '#/components/parameters/teamParams'
      - $ref: '#/components/parameters/agentParams'
    get:
      operationId: getAplAgent
      description: Get an agent from a given team
      x-aclSchema: Agent
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully obtained agent configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplAgentResponse'
    put:
      operationId: editAplAgent
      description: Edit an agent from a given team
      x-aclSchema: Agent
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AplAgentRequest'
        description: Agent object that contains updated values
        required: true
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully edited a team agent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AplAgentResponse'
    delete:
      operationId: deleteAplAgent
      description: Delete an agent from a given team
      x-aclSchema: Agent
      responses:
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '200':
          description: Successfully deleted a team agent

## -------------------------------------------- Servers
#
#servers:
#  - url: '/'

# -------------------------------------------- Components
components:
  parameters:
    backupParams:
      name: backupName
      in: path
      description: Name of the backup
      required: true
      schema:
        type: string
    buildParams:
      name: buildName
      in: path
      description: Name of the build
      required: true
      schema:
        type: string
    policyParams:
      name: policyName
      in: path
      description: Name of the policy
      required: true
      schema:
        type: string
    userParams:
      name: userId
      in: path
      description: ID of the user
      required: true
      schema:
        type: string
    codeRepoParams:
      name: codeRepositoryName
      in: path
      description: Name of the code repository
      required: true
      schema:
        type: string
    teamParams:
      name: teamId
      in: path
      description: ID of team
      required: true
      schema:
        type: string
    netpolParams:
      name: netpolName
      in: path
      description: Name of the network policy
      required: true
      schema:
        type: string
    serviceParams:
      name: serviceName
      in: path
      description: Name of the service
      required: true
      schema:
        type: string
    sealedSecretParams:
      name: sealedSecretName
      in: path
      description: Name of the sealed secret
      required: true
      schema:
        type: string
    settingsParams:
      name: settingId
      in: path
      description: ID of the setting
      required: true
      schema:
        type: string
    workloadParams:
      name: workloadName
      in: path
      description: Name of the workload
      required: true
      schema:
        type: string
    knowledgeBaseParams:
      name: knowledgeBaseName
      in: path
      description: Name of the knowledge base
      required: true
      schema:
        type: string
    agentParams:
      name: agentName
      in: path
      description: Name of the agent
      required: true
      schema:
        type: string
  securitySchemes:
    groupAuthn:
      type: apiKey
      name: Authorization
      in: header
    groupAuthz:
      type: apiKey
      name: Authorization
      in: header

  # -------------------------------------------- Schemas
  # Indicate root schemas with UpperCamelCase (e.g. Cluster)
  # Indicate definition references with camelCase (e.g. azureCreds)
  #
  # Please stick to: alphabetical sorting, all Uppercase first and then lowercase.
  # --------------------------------------------
  responses:
    BadRequest:
      description: Bad Request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/OpenApiValidationError'
    NotFound:
      description: Resource does not exist
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/OtomiStackError'
    OtomiStackError:
      description: Resource already exists
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/OtomiStackError'

  schemas:
    aplResourceStatusCondition:
      type: object
      properties:
        lastTransitionTime:
          type: string
          format: date-time
        message:
          type: string
        reason:
          type: string
        status:
          type: boolean
        type:
          type: string
    aplMetadata:
      type: object
      properties:
        metadata:
          type: object
          properties:
            name:
              $ref: 'definitions.yaml#/idName'
          required:
            - name
      required:
        - metadata
    aplTeamMetadata:
      type: object
      properties:
        metadata:
          type: object
          properties:
            name:
              $ref: 'definitions.yaml#/idName'
            labels:
              type: object
              properties:
                apl.io/teamId:
                  $ref: 'definitions.yaml#/idName'
              required:
                - apl.io/teamId
          required:
            - name
            - labels
      required:
        - metadata
    aplStatusResponse:
      type: object
      properties:
        status:
          type: object
          properties:
            conditions:
              type: array
              items:
                $ref: '#/components/schemas/aplResourceStatusCondition'
            phase:
              type: string
      required:
        - status
    AplAIModel:
      type: object
      properties:
        kind:
          type: string
          enum: [AplAIModel]
        spec:
          $ref: 'aiModel.yaml#/AplAIModelSpec'
      required:
        - kind
        - spec
    AplAIModelResponse:
      type: object
      allOf:
        - $ref: '#/components/schemas/AplAIModel'
        - $ref: '#/components/schemas/aplMetadata'
        - $ref: '#/components/schemas/aplStatusResponse'
    AplAgent:
      type: object
      properties:
        kind:
          type: string
          enum: [AkamaiAgent]
        spec:
          $ref: 'agent.yaml#/AplAgentSpec'
      required:
        - kind
        - spec
    AplAgentRequest:
      allOf:
        - $ref: '#/components/schemas/AplAgent'
        - $ref: '#/components/schemas/aplMetadata'
    AplAgentResponse:
      type: object
      allOf:
        - $ref: '#/components/schemas/AplAgent'
        - $ref: '#/components/schemas/aplTeamMetadata'
        - $ref: '#/components/schemas/aplStatusResponse'
    AplBackup:
      type: object
      properties:
        kind:
          type: string
          enum: [AplTeamBackup]
        spec:
          $ref: 'backup.yaml#/AplBackupSpec'
      required:
        - kind
        - spec
    AplBackupRequest:
      allOf:
        - $ref: '#/components/schemas/AplBackup'
        - $ref: '#/components/schemas/aplMetadata'
    AplBackupResponse:
      type: object
      allOf:
        - $ref: '#/components/schemas/AplBackup'
        - $ref: '#/components/schemas/aplTeamMetadata'
        - $ref: '#/components/schemas/aplStatusResponse'
    AplBuild:
      type: object
      properties:
        kind:
          type: string
          enum: [AplTeamBuild]
        spec:
          $ref: 'build.yaml#/AplBuildSpec'
      required:
        - kind
        - spec
    AplBuildRequest:
      allOf:
        - $ref: '#/components/schemas/AplBuild'
        - $ref: '#/components/schemas/aplMetadata'
    AplBuildResponse:
      type: object
      allOf:
        - $ref: '#/components/schemas/AplBuild'
        - $ref: '#/components/schemas/aplTeamMetadata'
        - $ref: '#/components/schemas/aplStatusResponse'
    AplCodeRepo:
      type: object
      properties:
        kind:
          type: string
          enum: [AplTeamCodeRepo]
        spec:
          $ref: 'codeRepo.yaml#/AplCodeRepoSpec'
      required:
        - kind
        - spec
    AplCodeRepoRequest:
      allOf:
        - $ref: '#/components/schemas/AplCodeRepo'
        - $ref: '#/components/schemas/aplMetadata'
    AplCodeRepoResponse:
      type: object
      allOf:
        - $ref: '#/components/schemas/AplCodeRepo'
        - $ref: '#/components/schemas/aplTeamMetadata'
        - $ref: '#/components/schemas/aplStatusResponse'
    AplKnowledgeBase:
      type: object
      properties:
        kind:
          type: string
          enum: [AkamaiKnowledgeBase]
        spec:
          $ref: 'knowledgeBase.yaml#/AplKnowledgeBaseSpec'
      required:
        - kind
        - spec
    AplKnowledgeBaseRequest:
      allOf:
        - $ref: '#/components/schemas/AplKnowledgeBase'
        - $ref: '#/components/schemas/aplMetadata'
    AplKnowledgeBaseResponse:
      type: object
      allOf:
        - $ref: '#/components/schemas/AplKnowledgeBase'
        - $ref: '#/components/schemas/aplTeamMetadata'
        - $ref: '#/components/schemas/aplStatusResponse'
    AplNetpol:
      type: object
      properties:
        kind:
          type: string
          enum: [AplTeamNetworkControl]
        spec:
          $ref: 'netpol.yaml#/AplNetpolSpec'
      required:
        - kind
        - spec
    AplNetpolRequest:
      allOf:
        - $ref: '#/components/schemas/AplNetpol'
        - $ref: '#/components/schemas/aplMetadata'
    AplNetpolResponse:
      type: object
      allOf:
        - $ref: '#/components/schemas/AplNetpol'
        - $ref: '#/components/schemas/aplTeamMetadata'
        - $ref: '#/components/schemas/aplStatusResponse'
    AplPolicy:
      type: object
      properties:
        kind:
          type: string
          enum: [AplTeamPolicy]
        spec:
          $ref: 'policies.yaml#/Policy'
      required:
        - kind
        - spec
    AplPolicyRequest:
      allOf:
        - $ref: '#/components/schemas/AplPolicy'
        - $ref: '#/components/schemas/aplMetadata'
    AplPolicyResponse:
      type: object
      allOf:
        - $ref: '#/components/schemas/AplPolicy'
        - $ref: '#/components/schemas/aplTeamMetadata'
        - $ref: '#/components/schemas/aplStatusResponse'
    AplSecret:
      type: object
      properties:
        kind:
          type: string
          enum: [AplTeamSecret]
        spec:
          $ref: 'sealedsecret.yaml#/AplSealedSecretSpec'
      required:
        - kind
        - spec
    AplSecretRequest:
      allOf:
        - $ref: '#/components/schemas/AplSecret'
        - $ref: '#/components/schemas/aplMetadata'
    AplSecretResponse:
      type: object
      allOf:
        - $ref: '#/components/schemas/AplSecret'
        - $ref: '#/components/schemas/aplTeamMetadata'
        - $ref: '#/components/schemas/aplStatusResponse'
    AplService:
      type: object
      properties:
        kind:
          type: string
          enum: [AplTeamService]
        spec:
          $ref: 'service.yaml#/AplServiceSpec'
      required:
        - kind
        - spec
    AplServiceRequest:
      allOf:
        - $ref: '#/components/schemas/AplService'
        - $ref: '#/components/schemas/aplMetadata'
    AplServiceResponse:
      type: object
      allOf:
        - $ref: '#/components/schemas/AplService'
        - $ref: '#/components/schemas/aplTeamMetadata'
        - $ref: '#/components/schemas/aplStatusResponse'
    AplTeamSettings:
      type: object
      properties:
        kind:
          type: string
          enum: [AplTeamSettingSet]
        spec:
          $ref: 'team.yaml#/AplTeamSpec'
      required:
        - kind
        - spec
    AplTeamSettingsRequest:
      allOf:
        - $ref: '#/components/schemas/AplTeamSettings'
        - $ref: '#/components/schemas/aplTeamMetadata'
    AplTeamSettingsResponse:
      type: object
      allOf:
        - $ref: '#/components/schemas/AplTeamSettings'
        - $ref: '#/components/schemas/aplTeamMetadata'
        - $ref: '#/components/schemas/aplStatusResponse'
    AplWorkload:
      type: object
      properties:
        kind:
          type: string
          enum: [AplTeamWorkload]
        spec:
          $ref: 'workload.yaml#/AplWorkloadSpec'
      required:
        - kind
        - spec
    AplWorkloadRequest:
      allOf:
        - $ref: '#/components/schemas/AplWorkload'
        - $ref: '#/components/schemas/aplMetadata'
    AplWorkloadResponse:
      type: object
      allOf:
        - $ref: '#/components/schemas/AplWorkload'
        - $ref: '#/components/schemas/aplTeamMetadata'
        - $ref: '#/components/schemas/aplStatusResponse'

    Agent:
      $ref: 'agent.yaml#/Agent'
    App:
      $ref: 'app.yaml#/App'
    AppList:
      $ref: 'app.yaml#/AppList'
    Backup:
      $ref: 'backup.yaml#/Backup'
    Build:
      $ref: 'build.yaml#/Build'
    Cloudtty:
      $ref: 'cloudtty.yaml#/Cloudtty'
    Cluster:
      $ref: 'cluster.yaml#/Cluster'
    CodeRepo:
      $ref: 'codeRepo.yaml#/CodeRepo'
    K8sService:
      $ref: 'k8s.yaml#/K8sService'
    KnowledgeBase:
      $ref: 'knowledgeBase.yaml#/KnowledgeBase'
    Kubecfg:
      $ref: 'kubecfg.yaml#/Kubecfg'
    Netpol:
      $ref: 'netpol.yaml#/Netpol'
    DockerConfig:
      $ref: 'dockerconfig.yaml#/DockerConfig'
    OpenApiValidationError:
      $ref: 'error.yaml#/OpenApiValidationError'
    OtomiStackError:
      $ref: 'error.yaml#/OtomiStackError'
    OtomiCliValues:
      $ref: 'otomi/cli.yaml#/OtomiCliValues'
    Policy:
      $ref: 'policies.yaml#/Policy'
    Policies:
      $ref: 'policies.yaml#/Policies'
    SealedSecret:
      $ref: 'sealedsecret.yaml#/SealedSecret'
    SealedSecretsKeys:
      $ref: 'sealedsecretskeys.yaml#/SealedSecretsKeys'
    K8sSecret:
      $ref: 'k8sSecret.yaml#/K8sSecret'
    SessionUser:
      $ref: 'user.yaml#/SessionUser'
    Service:
      $ref: 'service.yaml#/Service'
    Session:
      $ref: 'session.yaml#/Session'
    ObjWizard:
      $ref: 'objwizard.yaml#/ObjWizard'
    Settings:
      $ref: 'settings.yaml#/Settings'
    SettingsInfo:
      $ref: 'settingsinfo.yaml#/SettingsInfo'
    RepoBranches:
      $ref: 'repobranches.yaml#/RepoBranches'
    TestRepoConnect:
      $ref: 'testrepoconnect.yaml#/TestRepoConnect'
    InternalRepoUrls:
      $ref: 'internalRepoUrls.yaml#/InternalRepoUrls'
    AIModel:
      $ref: 'aiModel.yaml#/AIModel'
    Team:
      $ref: 'team.yaml#/Team'
    TeamAuthz:
      $ref: 'user.yaml#/TeamAuthz'
    TeamSelfService:
      $ref: 'team.yaml#/TeamSelfService'
    User:
      $ref: 'user.yaml#/User'
    Workload:
      $ref: 'workload.yaml#/Workload'
    WorkloadName:
      $ref: 'workloadname.yaml#/WorkloadName'
    WorkloadValues:
      $ref: 'workload.yaml#/WorkloadValues'
