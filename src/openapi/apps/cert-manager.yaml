AppCertManager:
  additionalProperties: false
  type: object
  properties:
    id:
      $ref: ../definitions.yaml#/idName
    rawValues:
      $ref: ../definitions.yaml#/rawValues
    shortcuts:
      description: Resource URL that lands the user in a place of interest within an app.
      type: array
      nullable: true
      items:
        $ref: ../definitions.yaml#/shortcut
    values:
      x-externalDocsPath: docs/apps/cert-manager
      additionalProperties: false
      type: object
      properties:
        issuer:
          description: Indicates the origin of the wildcard certificate.
            The custom-ca - cert-manager uses the customRootCA to generate wildcard certificate.
            The letsencrypt - cert-manager requests certificate from letsencrypt endpoint.
            The byo-wildcard-cert allows users to bring their own trusted wildcard certificate (cert-manager not involved)
          type: string
          enum:
            - custom-ca
            - letsencrypt
            - byo-wildcard-cert
          default: custom-ca
        byoWildcardCert:
          description: 'Bring your own trusted wildcard certificate.'
          type: string
        byoWildcardCertKey:
          description: 'A certificate key corresponding to the byoWildcardCert.'
          type: string
          x-secret: true
        customRootCA:
          type: string
          description: CA that is used to create and verify self-signed certificates. Leave it empty to generate one automatically.
        customRootCAKey:
          x-secret: true
          type: string
          description: CA private key that is used to issue certificates. Leave it empty to generate one automatically.
        email:
          $ref: ../definitions.yaml#/email
        stage:
          type: string
          enum:
            - production
            - staging
          default: production
        resources:
          type: object
          properties:
            limits:
              type: object
              properties:
                cpu:
                  $ref: ../definitions.yaml#/quantityCpu
                  default: 200m
                memory:
                  $ref: ../definitions.yaml#/quantityMem
                  default: 384Mi
            requests:
              type: object
              properties:
                cpu:
                  $ref: ../definitions.yaml#/quantityCpu
                  default: 50m
                memory:
                  $ref: ../definitions.yaml#/quantityMem
                  default: 64Mi
          required:
            - limits
            - requests
  required: [id]
