AppCertManager:
  additionalProperties: false
  x-externalDocsPath: https://cert-manager.io/docs/
  x-short: Cloud native certificate management
  description: Automate certificate management in cloud native environments. Cert-manager builds on top of Kubernetes and OpenShift to provide X.509 certificates and issuers as first-class resource types. Provide 'certificates as a service' securely to developers and applications working within your cluster.
  title: Cert Manager
  type: object
  properties:
    id:
      $ref: ../definitions.yaml#/idName
    rawValues:
      $ref: ../definitions.yaml#/rawValues
    shortcuts:
      description: Resource URL that lands the user in a place of interest within an app.
      type: array
      nullable: true
      items:
        $ref: ../definitions.yaml#/shortcut
    values:
      x-externalDocsPath: docs/console/apps/cert-manager
      additionalProperties: false
      type: object
      properties:
        customRootCA:
          type: string
          description: CA that is used to create and verify self-signed certificates. Leave it empty to generate one automatically.
        customRootCAKey:
          x-secret: ''
          type: string
          description: CA private key that is used to issue certificates. Leave it empty to generate one automatically.
        email:
          $ref: ../definitions.yaml#/email
        issuer:
          type: string
          enum:
            - custom-ca
            - letsencrypt
          default: custom-ca
        stage:
          type: string
          enum:
            - production
            - staging
          default: production
      # oneOf:
      #   - properties:
      #       issuer:
      #         enum:
      #           - letsencrypt
      #     required:
      #       - email
      #       - issuer
      #     not:
      #       anyOf:
      #         - required:
      #             - customRootCA
      #             - customRootCAKey
      #         - required:
      #             - customRootCA
      #         - required:
      #             - customRootCAKey
      #   - allOf:
      #       - oneOf:
      #           - not:
      #               required:
      #                 - issuer
      #           - properties:
      #               issuer:
      #                 enum:
      #                   - custom-ca
      #             required:
      #               - issuer
      #       - oneOf:
      #           # we need both or none at all:
      #           - required:
      #               - customRootCA
      #               - customRootCAKey
      #           - not:
      #               anyOf:
      #                 - required:
      #                     - customRootCA
      #                 - required:
      #                     - customRootCAKey
