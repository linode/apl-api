AppHarbor:
  additionalProperties: false
  type: object
  properties:
    id:
      $ref: ../definitions.yaml#/idName
    enabled:
      type: boolean
      default: false
    rawValues:
      $ref: ../definitions.yaml#/rawValues
    shortcuts:
      description: Resource URL that lands the user in a place of interest within an app.
      type: array
      nullable: true
      items:
        $ref: ../definitions.yaml#/shortcut
    values:
      x-externalDocsPath: docs/apps/harbor
      additionalProperties: false
      type: object
      properties:
        adminPassword:
          $ref: ../definitions.yaml#/adminPassword
        # privateLibrary:
        #   type: boolean
        #   default: true
        #   description: Will mark the main project named "library" as private.
        database:
          type: object
        databasePassword:
          type: string
          description: Once set and deployed it cannot be changed with manual intervention.
          x-secret: 'randAlphaNum 20'
        core:
          type: object
          properties:
            secret:
              type: string
              x-secret: 'randAlphaNum 16'
            xsrfKey:
              type: string
              x-secret: 'randAlphaNum 32'
        jobservice:
          type: object
          properties:
            secret:
              type: string
              x-secret: 'randAlphaNum 16'
        registry:
          type: object
          properties:
            secret:
              type: string
              x-secret: 'randAlpha 16'
            credentials:
              type: object
              properties:
                htpasswd:
                  type: string
                  x-secret: 'htpasswd .dot.username .dot.password'
                username:
                  $ref: ../definitions.yaml#/otomiAdminUsername
                password:
                  type: string
                  x-secret: 'randAlphaNum 32'
          required:
            - secret
            - credentials
        secretKey:
          type: string
          x-secret: 'randAlpha 16'
        # image:
        #   type: object
        #   properties:
        #     tag:
        #       $ref: ../definitions.yaml#/imageTag
        #       default: v2.4.0
        #     pullPolicy:
        #       $ref: ../definitions.yaml#/imagePullPolicy
        resources:
          additionalProperties: false
          type: object
          properties:
            chartmuseum:
              title: Chart Museum
              type: object
              properties:
                limits:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 400m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 256Mi
                requests:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 100m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 128Mi
              required:
                - limits
                - requests
            core:
              type: object
              properties:
                limits:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 100m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 512Mi
                requests:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 50m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 256Mi
              required:
                - limits
                - requests
            database:
              type: object
              properties:
                limits:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 100m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 512Mi
                requests:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 50m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 256Mi
              required:
                - limits
                - requests
            jobservice:
              title: Job service
              type: object
              properties:
                limits:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 100m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 512Mi
                requests:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 50m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 256Mi
              required:
                - limits
                - requests
            portal:
              type: object
              properties:
                limits:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 400m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 256Mi
                requests:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 100m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 128Mi
              required:
                - limits
                - requests
            redis:
              type: object
              properties:
                limits:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 400m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 256Mi
                requests:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 100m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 128Mi
              required:
                - limits
                - requests
            registry:
              type: object
              properties:
                limits:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 100m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 128Mi
                requests:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 50m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 64Mi
              required:
                - limits
                - requests
            registry-controller:
              title: Registry controller
              type: object
              properties:
                limits:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 400m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 256Mi
                requests:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 100m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 256Mi
              required:
                - limits
                - requests
      required:
        - databasePassword
  required: [id]
