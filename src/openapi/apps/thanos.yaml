AppThanos:
  additionalProperties: false
  type: object
  properties:
    id:
      $ref: ../definitions.yaml#/idName
    enabled:
      type: boolean
      default: false
    rawValues:
      $ref: ../definitions.yaml#/rawValues
    values:
      x-externalDocsPath: docs/apps/thanos
      additionalProperties: false
      type: object
      properties:
        receiver:
          description: Thanos receiver parameters
          properties:
            resources:
              type: object
              properties:
                limits:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 1000m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 1000Mi
                requests:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 100m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 200Mi
              required:
                - limits
                - requests
            mode:
              description: Mode to run receiver in.
              type: string
              default: standalone
              enum:
                - standalone
                - dual-mode
            replicaCount:
              description: Number of Thanos Receive replicas.
              type: integer
              default: 1
            persistence:
              properties:
                size: 
                  type: string
                  default: 8Gi
        storegateway:
          description: Store gateway configuration
          properties:
            resources:
              type: object
              properties:
                limits:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 1000m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 1000Mi
                requests:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 100m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 200Mi
              required:
                - limits
                - requests
            persistence:
              properties:
                size: 
                  type: string
                  default: 8Gi  
        bucketweb:
          properties:
            resources:
              type: object
              properties:
                limits:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 1000m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 1000Mi
                requests:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 100m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 200Mi
              required:
                - limits
                - requests
        compactor:
          description: Resolution and Retention flags.
          properties:
            retentionResolutionRaw:
              type: string
              default: 30d
            retentionResolution5m:
              type: string
              default: 30d
            retentionResolution1h: 
              type: string
              default: 10y
            persistence:
              properties:
                size: 
                  type: string
                  default: 8Gi
        ruler:
          properties:
            enabled:
              type: boolean
              default: false
            resources:
              type: object
              properties:
                limits:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 1000m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 1000Mi
                requests:
                  type: object
                  properties:
                    cpu:
                      $ref: ../definitions.yaml#/quantityCpu
                      default: 100m
                    memory:
                      $ref: ../definitions.yaml#/quantityMem
                      default: 200Mi
              required:
                - limits
                - requests
            persistence:
              properties:
                size: 
                  type: string
                  default: 8Gi
        objstore:
          title: Object store
          description: Configure the Thanos object store.
          nullable: true
          type: object
          oneOf:
            - title: localMinio
              type: object
              properties:
                localMinio:
                  properties:
                    bucket:
                      description: The name of the bucket
                      type: string
                    accessKey:
                      description: Access Key
                      $ref: ../definitions.yaml#/wordCharacterPattern
                      x-secret: ''
                    secretKey:
                      description: Secret Key
                      $ref: ../definitions.yaml#/wordCharacterPattern
                      x-secret: ''
                  required:
                    - bucket
                    - accessKey
                    - secretKey
              required:
                - localMinio
            - title: s3Like
              type: object
              properties:
                s3Like:
                  properties:
                    bucket:
                      description: The name of the bucket
                      type: string
                    s3Url:
                      description: URL of the storage endpoint
                      type: string                      
                    accessKey:
                      description: Access Key
                      $ref: ../definitions.yaml#/wordCharacterPattern
                      x-secret: ''
                    secretKey:
                      description: Secret Key
                      $ref: ../definitions.yaml#/wordCharacterPattern
                      x-secret: ''
                  required:
                    - bucket
                    - endpoint
                    - accessKey
                    - secretKey
              required:
                - s3Like



