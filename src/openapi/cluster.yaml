# Please leave the following line so yaml-language-server doesn't incorrectly validate this file according to its cluster.yaml schema:
# yaml-language-server: $schema=https://raw.githubusercontent.com/json-schema-org/json-schema-spec/draft-04/schema.json
AdditionalCluster:
  additionalProperties: false
  x-acl:
    admin:
      - read-any
      - update-any
      - create-any
      - delete-any
    team:
      - read-any
  title: Additional cluster
  description: A k8s cluster managed by Otomi.
  properties:
    domainSuffix:
      $ref: definitions.yaml#/domainSuffix
    name:
      $ref: definitions.yaml#/clusterName
    provider:
      $ref: definitions.yaml#/provider
  required:
    - domainSuffix
    - name
    - provider
  type: object

Cluster:
  additionalProperties: false
  type: object
  x-acl:
    admin:
      - read-any
      - update-any
    team:
      - read-any
  title: Cluster
  description: The k8s cluster managed by this Otomi instance.
  properties:
    name:
      $ref: definitions.yaml#/clusterName
      readOnly: true
    domainSuffix:
      $ref: definitions.yaml#/domainSuffix
      readOnly: true
    provider:
      $ref: definitions.yaml#/provider
      readOnly: true
    k8sVersion:
      $ref: definitions.yaml#/k8sVersion
      readOnly: true
    apiName:
      $ref: definitions.yaml#/idName
      title: API name
      description: Name of cluster. On AWS this must match the exact EKS cluster name.
      readOnly: true
    apiServer:
      $ref: definitions.yaml#/url
      title: API server
      description: Full url to a kubernetes api server. Used to generate KUBECONFIG for download, for local access to target cluster.
    owner:
      $ref: definitions.yaml#/idName
      description: A cluster owner. Used in alerts/reports to distinguish between resources for different customers.
      default: otomi
    region:
      $ref: definitions.yaml#/awsRegion
      description: 'An AWS region. Used by charts such as cluster-autoscaler and aws-certs job. Example: eu-central-1'
    k8sContext:
      type: string
      x-hidden: true
