# If this file is called "cluster.yaml", it gets validated by yaml-schema and it keeps thinking it is a proprietory file
BaseCluster:
  properties:
    apiName:
      title: API name
      description: Only used for API/UI to show in app.
      type: string
    apiServer:
      title: API server
      description: Used by kubectl for local deployment to target cluster.
      type: string
    domainSuffix:
      title: Domain suffix
      $ref: 'definitions.yaml#/domain'
      description: Domain suffix for the cluster. Also added to list of dns zones in the Otomi Console.
    entrypoint:
      title: Entrypoint
      description: Enter the `kube-apiserver` public IP address (onprem only).
      type: string
    k8sVersion:
      title: Kubernetes version
      $ref: 'definitions.yaml#/k8sVersion'
    name:
      title: Name
      type: string
    otomiVersion:
      title: Otomi version
      default: latest
      description: |
        Please pin this a valid release version found in the repo. Suggestion: try the most recent stable version.
      type: string
    provider:
      title: Provider
      description: Enter the cloud provider of this cluster.
      type: string
      enum:
        - aws
        - azure
        - google
        - onprem
    region:
      title: Region
      description: Enter the region of the cluster for its cloud provider.
      type: string
    vpcID:
      title: VPC ID
      description: AWS only. If provided, this property will override the autodiscovery from metadata.
      type: string
  required:
    - apiServer
    - domainSuffix
    - k8sVersion
    - name
    - otomiVersion
    - provider
    - region

AdditionalCluster:
  x-acl:
    admin:
      - read
      - update
      - create
      - delete
    team:
      - read
  title: Additional cluster
  description: Cluster to manage by Otomi.
  $ref: '#/BaseCluster'

Cluster:
  x-acl:
    admin:
      - read
      - update
    team:
      - read
  $ref: '#/BaseCluster'
  title: Cluster
  description: The cluster managed by this Otomi instance.
