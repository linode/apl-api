adminPassword:
  type: string
  title: Admin password
  description: Uses `otomi.adminPassword` when left empty.
  x-secret: ''
  x-acl:
    admin: [read-any, update-any]
    team: []
alerts:
  additionalProperties: false
  type: object
  properties:
    repeatInterval:
      x-default: 3h
      description: Indicates waiting time before sending a notification again after it was sent successfully for an alert. (Usually ~3h or more).
      title: Repeat Interval
      type: string
    groupInterval:
      x-default: 5m
      description: How long to wait before sending a notification about new alerts that are added to a group of alerts for which an initial notification has already been sent. (Usually ~5m or more.)
      title: Group Interval
      type: string
    receivers:
      description: Select default notification channel(s) for receiving alerts.
      items:
        enum:
          - slack
          - msteams
          - opsgenie
          - email
        type: string
      title: Notification receivers
      type: array
      uniqueItems: true
    drone:
      description: Select default notification channels for Otomi deployments by Drone.
      items:
        enum:
          - slack
          - msteams
          - opsgenie
        type: string
      type: array
      uniqueItems: true
    slack:
      title: Slack
      description: Configure Slack endpoints for alerts.
      additionalProperties: false
      properties:
        channel:
          x-default: mon-otomi
          description: The Slack channel for non-critical notifications.
          title: Non-critical
          type: string
        channelCrit:
          x-default: mon-otomi-crit
          description: The Slack channel for critical notifications.
          title: Critical
          type: string
        url:
          $ref: '#/url'
          description: A Slack webhook URL.
      required:
        - url
      type: object
    msteams:
      additionalProperties: false
      description: Configure Microsoft Teams endpoints for alerts.
      properties:
        highPrio:
          title: High prio web hook
          type: string
        lowPrio:
          title: Low prio web hook
          type: string
      required:
        - highPrio
        - lowPrio
      title: Microsoft Teams
      type: object
    opsgenie:
      title: OpsGenie
      description: Configure OpsGenie endpoints for alerts. Criticals will get level P1, and non-crits P2.
      additionalProperties: false
      properties:
        apiKey:
          description: The api key to use for authn.
          title: Api key
          type: string
          x-secret: ''
        url:
          $ref: '#/url'
          description: An opsgenie URL without the '?apiKey' part.
        responders:
          description: Configure one or multiple alert responders.
          type: array
          items:
            type: object
            allOf:
              - properties:
                  type:
                    type: string
                    enum:
                      - team
                      - user
                      - escalation
                      - schedule
                    default: team
                required: [type]
              - title: Responder
                description: An OpsGenie responder identity.
                oneOf:
                  - title: ID
                    required: [id]
                    properties:
                      id:
                        $ref: '#/wordCharacterPattern'
                  - title: Name
                    required: [name]
                    properties:
                      name:
                        $ref: '#/idName'
                  - title: Username
                    required: [username]
                    properties:
                      username:
                        $ref: '#/wordCharacterPattern'
      required:
        - apiKey
        - url
      type: object
    email:
      title: Email
      description: Configure email endpoints for alerts.
      additionalProperties: false
      properties:
        critical:
          title: Critical Events
          $ref: '#/email'
          description: One or more email addresses (comma separated) for critical events.
        nonCritical:
          title: Non-critical Events
          $ref: '#/email'
          description: One or more email addresses (comma separated) for non-critical events.
      required:
        - critical
        - nonCritical
      type: object
annotation:
  type: string
  pattern: ^((.){1,253}\/)?(.){1,63}$
annotations:
  description: Kubernetes annotations with arbitrary metadata
  type: array
  items:
    type: object
    properties:
      name:
        $ref: '#/annotation'
      value:
        type: string
        maxLength: 32767
autoscaling:
  type: object
  properties:
    maxReplicas:
      type: integer
      x-default: 10
    minReplicas:
      type: integer
      x-default: 1
autoscalingEnabled:
  type: object
  allOf:
    - properties:
        enabled:
          type: boolean
          x-default: true
    - $ref: '#/autoscaling'
awsAccessKey:
  title: AWS access key
  description: An AWS access key ID.
  type: string
  x-secret: ''
awsSecretKey:
  title: AWS secret key
  description: An AWS secret key.
  type: string
  x-secret: ''
awsRegion:
  title: AWS region
  description: An AWS region.
  type: string
awsRole:
  description: Role may be set explicitly if no metadata can be accessed.
  example: arn:aws:iam::YYYYYYYYYYYY:role/dns-manager
  type: string
azureClientId:
  title: Azure client id
  description: An Azure client id.
  type: string
  x-secret: ''
azureClientSecret:
  title: Azure client secret
  description: An Azure client secret.
  type: string
  x-secret: ''
azureEnvironment:
  title: Azure environment
  description: An Azure environment. Don't specify this if you don't know what you are doing!
  type: string
  x-default: AzureCloud
  enum:
    - AzureCloud
    - AzureChinaCloud
    - AzureUSGovernment
    - AzureGermanCloud
azureMonitor:
  description: Azure Monitor data can be made available in Grafana.
  title: Azure Monitor
  type: object
  nullable: true
  oneOf:
    - $ref: '#/offChoice'
    - properties:
        appInsightsApiKey:
          $ref: '#/azureClientSecret'
          title: AppInsights api key
          description: An Azure AppInsights client secret.
        appInsightsAppId:
          $ref: '#/azureClientId'
          title: AppInsights app id
        azureLogAnalyticsSameAs:
          title: LogAnalytics using same creds?
          type: boolean
          x-default: true
        clientId:
          $ref: '#/azureClientId'
        clientSecret:
          $ref: '#/azureClientSecret'
        logAnalyticsClientId:
          $ref: '#/azureClientId'
          title: LogAnalytics client id
          description: An Azure client secret.
        logAnalyticsClientSecret:
          $ref: '#/azureClientSecret'
          title: LogAnalytics client secret
          description: An Azure client secret.
        logAnalyticsTenantId:
          $ref: '#/azureTenantId'
          title: LogAnalytics tenant id
          description: An Azure tenant id.
        logAnalyticsDefaultWorkspace:
          title: LogAnalytics workspace
          description: An Azure LogAnalytics workspace.
          type: string
        subscriptionId:
          $ref: '#/azureSubscriptionId'
        tenantId:
          $ref: '#/azureTenantId'
      title: 'On'
      type: object
      required:
        - clientId
        - clientSecret
azureSubscriptionId:
  title: Azure subscription id
  description: An Azure subscription id.
  type: string
azureTenantId:
  title: Azure tenant id
  description: An Azure tenant id. Defaults to one found in metadata.
  type: string
clusterName:
  $ref: '#/idName'
  description: Short name that will be used in construction of cluster domain and messaging.
  type: string
containerSpecNoSec:
  properties:
    image:
      $ref: '#/image'
    resources:
      $ref: '#/resources'
      title: Container resources
    env:
      $ref: '#/env'
    secrets:
      $ref: '#/secrets'
    secretMounts:
      $ref: '#/secretMounts'
    files:
      $ref: '#/files'
    command:
      type: string
      title: Command
      description: Override the entrypoint/command of the container.
    args:
      type: string
      title: Command arguments
      description: Override the arguments given to the entrypoint/command of the container.
  required:
    - image
    - resources
  type: object
containerSpec:
  allOf:
    - properties:
        securityContext:
          $ref: '#/securityContext'
    - $ref: '#/containerSpecNoSec'
  type: object
dns:
  title: DNS
  type: object
  description: Domain name server settings.
  additionalProperties: false
  properties:
    zones:
      description: Extra dns zones that the cluster can administer (see dns). Team services can use this to publish their URLs on.
      items:
        type: string
        title: Zone
      title: Zones
      type: array
      uniqueItems: true
    provider:
      description: The DNS provider managing the domains.
      title: Provider
      oneOf:
        - $ref: '#/offChoice'
        - title: AWS
          properties:
            aws:
              description: Uses explicit credentials when either a role or a pair of id+key is provided. Assumes node role present otherwise.
              x-hideTitle: true
              properties:
                accessKeyID:
                  $ref: '#/awsAccessKey'
                secretAccessKey:
                  $ref: '#/awsSecretKey'
                role:
                  $ref: '#/awsRole'
                region:
                  $ref: '#/awsRegion'
              required:
                - region
              type: object
          required:
            - aws
          type: object
        - title: Azure
          properties:
            azure:
              x-hideTitle: true
              properties:
                environment:
                  type: string
                  description: Name of the Azure environment.
                  default: AzurePublicCloud
                  enum:
                    - AzurePublicCloud
                    - AzureChinaCloud
                    - AzureUSGovernment
                    - AzureGermanCloud
                resourceGroup:
                  title: Resource group
                  type: string
                  description: Azure resource group. Required for cert-manager.
                hostedZoneName:
                  title: Hosted zone name
                  description: Name of the DNS zone that should be used.
                  type: string
                tenantId:
                  title: Tenant ID
                  type: string
                  description: Azure tenant ID
                subscriptionId:
                  title: Subscription ID
                  type: string
                  description: Azure subscription ID
                useManagedIdentityExtension:
                  title: Using managed identities?
                  description: If you use Azure MSI, this should be set to true
                  type: boolean
                  x-default: false
                userAssignedIdentityID:
                  title: MSI id
                  type: string
                  description: If you use Azure MSI, this is the Client ID of a Azure user-assigned managed identity or resource id. Required for cert-manager.
                  x-secret: ''
                aadClientId:
                  title: Client ID
                  type: string
                  description: Azure Application Client ID
                aadClientSecret:
                  title: Client secret
                  type: string
                  description: Azure Application Client Secret
              required:
                - tenantId
                - subscriptionId
                - resourceGroup
              type: object
          required:
            - azure
          type: object
        - title: Google
          properties:
            google:
              x-hideTitle: true
              properties:
                serviceAccountKey:
                  description: A service account key for managing a DNS zone.
                  type: string
                  x-secret: true
                  x-formtype: textarea
                project:
                  type: string
              required:
                - serviceAccountKey
                - project
              type: object
          required:
            - google
          type: object
        - title: Other
          properties:
            other:
              type: object
              properties: {}
          required:
            - other
    entrypoint:
      $ref: '#/ipV4Address'
      description: Optional. A public IP address that will override (loadbalancer) ip used for registering hosts. This allows for access to private clusters.
domain:
  pattern: ^((([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9]))|([a-f0-9:]+:+)+[a-f0-9]+$
  x-message: a valid fully qualified domain name (FQDN)
  type: string
domainSuffix:
  $ref: '#/domain'
  title: Domain suffix
  description: Domain suffix for the cluster. Also added to list of dns zones in the Otomi Console.
droneGit:
  properties:
    clientID:
      $ref: '#/wordCharacterPattern'
    clientSecretValue:
      type: string
      x-secret: ''
  type: object
  required: [clientID, clientSecretValue]
duration:
  description: 'Prometheus duration (See: https://prometheus.io/docs/prometheus/latest/configuration/configuration/#configuration-file)'
  pattern: '((([0-9]+)y)?(([0-9]+)w)?(([0-9]+)d)?(([0-9]+)h)?(([0-9]+)m)?(([0-9]+)s)?(([0-9]+)ms)?|0)'
  type: string
  x-default: 1d
email:
  pattern: ^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$
  x-message: a valid email address
  type: string
env:
  title: Environment variables
  description: Environment variables for containers.
  type: array
  nullable: true
  items:
    properties:
      name:
        type: string
        pattern: ^[a-zA-Z0-9_]*$
        x-message: a valid environment variable name that consists of letters and underscores
      value:
        type: string
        maxLength: 131072
    required:
      - name
      - value
    type: object
files:
  description: 'Entries of absolute path > content pairs. One caveat: content can be 131072 chars max.'
  title: Files
  type: array
  nullable: true
  items:
    properties:
      path:
        type: string
        pattern: ^\/[^\0]+$
        x-message: a valid file name
      content:
        type: string
        maxLength: 131072
    required:
      - path
      - content
    type: object
googleAccountJson:
  description: Enter GCP account JSON for authentication.
  title: Account JSON
  type: string
  x-secret: ''
  x-formtype: textarea
googleProject:
  description: Enter GCP project.
  title: GCP Project
  type: string
hostPort:
  pattern: ^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9]):()([1-9]|[1-5]?[0-9]{2,4}|6[1-4][0-9]{3}|65[1-4][0-9]{2}|655[1-2][0-9]|6553[1-5])$
  type: string
  x-message: a valid host port
idName:
  pattern: ^[a-z]([-a-z0-9]*[a-z0-9])+$
  type: string
  x-message: a valid name that consists of lowercase letters and dashes
image:
  allOf:
    - properties:
        repository:
          description: A container image repository.
          pattern: ^[a-z0-9]+(?:[/._-]{1,2}[a-z0-9]+)*$
          x-message: a valid container registry repository
          type: string
      required:
        - repository
      type: object
    - $ref: '#/imageSimple'
  title: Container image
  description: Anything specified here overrides image specs from the release
imagePullPolicy:
  description: Container pull policy.
  default: IfNotPresent
  enum:
    - IfNotPresent
    - Always
  type: string
imageTag:
  pattern: '[\w][\w.-]{0,127}'
  type: string
  x-message: a valid container registry image tag
imageSimple:
  properties:
    tag:
      $ref: '#/imageTag'
    pullPolicy:
      $ref: '#/imagePullPolicy'
  required:
    - tag
  type: object
  title: Container image
ingressClassParameters:
  type: object
  properties:
    network:
      title: Load balancer type
      type: string
      enum:
        - public
        - private
      default: public
    loadBalancerIP:
      title: Load balancer IP address
      description: A static IP address assigned to a load balancer
      type: string
    loadBalancerRG:
      title: Load balancer Azure resource group
      type: string
    loadBalancerSubnet:
      title: Load balancer subnet
      type: string
      description: Specify Azure subnet provider for load balancer IP address (applies to private network only)
    sourceIpAddressFiltering:
      title: Source IP address filtering
      type: string
      description: 'Whitelist source IP address ranges. The value is a comma separated list of CIDRs, e.g. 10.0.0.0/24,172.10.0.1'
ipV4Address:
  type: string
  pattern: ^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$
jobSpec:
  properties:
    name:
      $ref: '#/idName'
      title: Name
      description: A job name
      example: some-job
    enabled:
      type: boolean
      x-default: true
    type:
      default: Job
      enum:
        - Job
        - CronJob
      title: Job type
      type: string
    script:
      $ref: '#/script'
    ttlSecondsAfterFinished:
      x-default: 86400
      description: Time To Live after job is finished in seconds. Will be removed afterwards.
      title: TTL after finished
      type: integer
    schedule:
      x-default: 0 1 * * *
      description: Must give a cron-type expression if the job-type is 'cronjob' (job.type). Defaults to once a day at 1am.
      type: string
    runPolicy:
      default: OnSpecChange
      description: |
        If runPolicy is set to 'Always', the job controller will always be re-deployed after a successful deployment with Helm.
        If runPolicy is set to 'OnSpecChange', the job controller will only be re-deployed if one changes this specification.
      enum:
        - Always
        - OnSpecChange
      title: Run policy
      type: string
    init:
      type: array
      items:
        $ref: '#/containerSpec'
      title: Init containers
      description: May specify an array of init containers, allowing to do preparations like checking for conditions.
  required:
    - name
    - script
    - type
  type: object
k8sVersion:
  title: Kubernetes version
  description: The cluster k8s version. Must match one of the list.
  enum:
    - '1.19'
    - '1.20'
    - '1.21'
    - '1.22'
    - '1.23'
  type: string
kms:
  additionalProperties: false
  description: Holds KMS settings like credentials for retrieving encryption/decryption keys.
  title: KMS settings
  type: object
  properties:
    sops:
      description: Encryption credentials for SOPS to encrypt the platform secrets.
      title: SOPS credentials
      type: object
      oneOf:
        - $ref: '#/offChoice'
        - properties:
            provider:
              type: string
              enum:
                - aws
              default: aws
            aws:
              type: object
              properties:
                keys:
                  description: Comma separated list of one or two ARNs to keys as defined in AWS KMS. One if used for both enc+dec. Two if one for enc, other for dec.
                  title: AWS KMS keys
                  type: string
                accessKey:
                  $ref: '#/awsAccessKey'
                secretKey:
                  $ref: '#/awsSecretKey'
                region:
                  $ref: '#/awsRegion'
              required:
                - accessKey
                - keys
                - secretKey
              title: ''
          required:
            - aws
          title: AWS
          type: object
        - properties:
            provider:
              type: string
              default: azure
              enum:
                - azure
            azure:
              type: object
              properties:
                keys:
                  description: Comma separated list of one or two paths to keys as defined in Azure Keyvault. One if used for both enc+dec. Two if one for enc, other for dec.
                  title: Azure Keyvault keys
                  type: string
                clientId:
                  $ref: '#/azureClientId'
                clientSecret:
                  $ref: '#/azureClientSecret'
                tenantId:
                  $ref: '#/azureTenantId'
              required:
                - clientId
                - clientSecret
                - keys
              title: ''
          required:
            - azure
          title: Azure
          type: object
        - properties:
            provider:
              type: string
              default: google
              enum:
                - google
            google:
              type: object
              properties:
                keys:
                  description: Comma separated list of one or two paths to keys as defined in GCP KMS. One if used for both enc+dec. Two if one for enc, other for dec.
                  title: GCP KMS keys
                  type: string
                accountJson:
                  $ref: '#/googleAccountJson'
                project:
                  $ref: '#/googleProject'
              required:
                - keys
                - accountJson
                - project
              title: ''
          required:
            - google
          title: Google
          type: object
        - properties:
            provider:
              type: string
              default: vault
              enum:
                - vault
            vault:
              type: object
              properties:
                keys:
                  description: Comma separated list of one or two paths to keys as defined in Vault. One if used for both enc+dec. Two if one for enc, other for dec.
                  title: Vault keys
                  type: string
                token:
                  $ref: '#/vaultToken'
              required:
                - keys
                - token
              title: ''
          required:
            - vault
          title: Vault
          type: object
ksvcNew:
  description: Will create a new knative service from the input gathered here.
  title: New Knative service
  allOf:
    - properties:
        annotations:
          $ref: '#/annotations'
          title: Pod annotations
      type: object
    - properties:
        securityContext:
          properties:
            runAsUser:
              $ref: '#/runAsUser'
            readOnlyRootFilesystem:
              description: Whether this container has a read-only root filesystem. Default is false.
              type: boolean
              x-default: false
          title: Security context
      type: object
    - $ref: '#/containerSpecNoSec'
    - properties:
        serviceType:
          default: ksvc
          enum:
            - ksvc
          type: string
        scaleToZero:
          description: Scales to zero after 60 seconds and needs approximately 8 seconds to start back up.
          title: Scale to zero
          type: boolean
          x-default: false
        containerPort:
          $ref: '#/portNumber'
          description: Container port the knative pod will connect with. Leaving this empty will let knative infer the port from the container, which usually works, but might be problematic when the container does not specifically expose a port. (As is the case with nginx derived images!)
          title: Container port
        # autoCD:
        #   description: Deploys new images based on a tagging strategy
        #   oneOf:
        #     - $ref: '#/offChoice'
        #     - nullable: true
        #       properties:
        #         semver:
        #           description: 'Use this filter if your image tags follow semantic versioning rules (MAJOR.MINOR.PATCH). E.g.: PATCH only: "~1.1", MINOR and PATCH only "~1", ALL "*"'
        #           example: 'PATCH only: "~1.1", MINOR and PATCH only "~1", ALL "*",  ">=1.2.3-0"'
        #           title: Semver version pattern
        #           type: string
        #         tagMatcher:
        #           default: semver
        #           enum:
        #             - semver
        #           type: string
        #       required:
        #         - semver
        #       title: Semver versioning
        #       type: object
        #     - properties:
        #         glob:
        #           description: 'Use this filter if you want to make glob-style patterns. E.g.: "main-v1.3.*"'
        #           example: main-v1.3.*
        #           title: Glob string pattern
        #           type: string
        #         tagMatcher:
        #           default: glob
        #           enum:
        #             - glob
        #           type: string
        #       required:
        #         - glob
        #       title: Glob pattern matching
        #       type: object
        #       additionalProperties: false
        #   title: Continuous delivery (coming soon!)
        #   type: object
      required:
        - serviceType
      title: Knative service
      type: object
  x-externalDocsPath: docs/console/services/#1-new-knative-service
ksvcPredeployed:
  description: Will map onto a predeployed knative service. Will take care of rewriting to the existing knative url.
  properties:
    serviceType:
      default: ksvcPredeployed
      enum:
        - ksvcPredeployed
      type: string
  title: Existing Knative service
  type: object
labels:
  $ref: '#/annotations'
  description: A set of labels.
logLevel:
  type: string
  default: info
  enum:
    - error
    - warn
    - info
    - debug
    - trace
offChoice:
  additionalProperties: false
  nullable: true
  title: 'None'
  type: object
otomiAdminUsername:
  type: string
  x-secret: '"admin"'
path:
  description: An absolute path
  type: string
  pattern: '^[/].*$'
podSecurityContext:
  properties:
    runAsUser:
      $ref: '#/runAsUser'
    runAsGroup:
      $ref: '#/runAsGroup'
    runAsNonRoot:
      $ref: '#/runAsNonRoot'
    fsGroup:
      description: Supplementary group ID. Volumes that support ownership management are modified to be owned and writable by this ID.
      type: string
    fsGroupChangePolicy:
      description:
        'Defines behavior for changing ownership and permission of the volume before being exposed inside a Pod. This field only applies to volume types that support fsGroup controlled ownership and permissions.
        This field has two possible values:
        OnRootMismatch: Only change permissions and ownership if permission and ownership of root directory does not match with expected permissions of the volume. This could help shorten the time it takes to change ownership and permission of a volume.
        Always: Always change permission and ownership of the volume when volume is mounted.'
      enum:
        - Always
        - OnRootMismatch
      type: string
  description: Security context for the pod.
  title: Pod security context
  type: object
podSpec:
  allOf:
    - properties:
        annotations:
          $ref: '#/annotations'
          title: Pod annotations
      type: object
    - properties:
        podSecurityContext:
          $ref: '#/podSecurityContext'
      type: object
    - $ref: '#/containerSpec'
  type: object
portNumber:
  maximum: 32768
  minimum: 80
  type: integer
provider:
  title: Provider
  description: The cloud provider of this cluster.
  type: string
  enum:
    - aws
    - azure
    - digitalocean
    - google
    - ovh
    - vultr
    - custom
quantityCpu:
  title: CPU quantity
  description: Amount of cores, or slice of cpu in millis.
  example: 50m
  pattern: (^[1-9][0-9]*(?!<.*)$)|(^([0]|[1-9]+)\.[0-9]{1,3}(?!<.*)$)|(^[1-9][0-9]*m$)
  type: string
quantityMem:
  title: Memory quantity
  description: Amount of memory. Valid units are E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki.
  example: 1Gi
  pattern: ^([0-9]+\.)?[0-9]+(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)$
  type: string
rawValues:
  description: "May define value overrides for a chart. WARNING: these values currently have no schema and can't be validated as such, and may break deployment. You are on your own here."
  type: object
  x-acl:
    admin: [read-any, update-any]
    team: []
replicas:
  type: integer
  title: Number of replicas
  x-default: 1
repoUrl:
  description: Path to a remote git repo without protocol. Will use https to access.
  pattern: ^(.+@)*([\w\d\.]+)(:[\d]+){0,1}/*(.*)$
  type: string
  x-message: a valid git repo URL
resource:
  properties:
    cpu:
      $ref: '#/quantityCpu'
    memory:
      $ref: '#/quantityMem'
  required:
    - cpu
    - memory
  type: object
resources:
  description: Compute resources for containers.
  properties:
    limits:
      $ref: '#/resource'
      description: Requested resources (best effort).
    requests:
      $ref: '#/resource'
      description: Requested resources (guaranteed).
  required:
    - limits
    - requests
  type: object
resourceQuota:
  description: 'List of kubernetes resource quota. Should adhere to the "spec.hard" format as described here: https://kubernetes.io/docs/concepts/policy/resource-quotas/. Not validated as there is no schema published. Change at your own risk.'
  title: Resource quota
  type: array
  items:
    type: object
    properties:
      name:
        type: string
      value:
        type: string
    required:
      - name
      - value
  default:
    - name: pods
      value: '50'
    - name: services.loadbalancers
      value: '0'
runAsNonRoot:
  description: Will prevent the container from starting with UID 0. This implies that k8s must be able to infer the UID from the image. If it complains the UID must be explicitly set with runAsUser.
  title: Run as non-root
  type: boolean
  x-default: true
runAsUser:
  description: The UID to run the entrypoint of the container process. Defaults to user specified in image metadata if unspecified. May be set in both SecurityContext and PodSecurityContext. If set in both SecurityContext and PodSecurityContext, the value specified in SecurityContext takes precedence.
  x-default: 1001
  maximum: 65535
  minimum: 0
  title: Run as user
  type: integer
runAsGroup:
  description: The GID to run the entrypoint of the container process. Defaults to group specified in image metadata if unspecified. May be set in both SecurityContext and PodSecurityContext. If set in both SecurityContext and PodSecurityContext, the value specified in SecurityContext takes precedence.
  x-default: 1001
  maximum: 65535
  minimum: 0
  title: Run as group
  type: integer
scaling:
  description: Min and max number of replicas.
  properties:
    minReplicas:
      type: integer
      title: Minimum nr of replicas
    maxReplicas:
      type: integer
      title: Maximum nr of replicas
  type: object
script:
  description: May specify a non-empty string containing an executable script.
  type: string
securityContext:
  additionalProperties:
    uniqueItems: true
  properties:
    runAsUser:
      $ref: '#/runAsUser'
    runAsGroup:
      $ref: '#/runAsGroup'
    runAsNonRoot:
      $ref: '#/runAsNonRoot'
  type: object
secrets:
  description: A list of team secrets that will be mounted into the pod as env vars.
  items:
    type: string
  title: Secrets
  type: array
  uniqueItems: true
secretMounts:
  description: Pairs of secret name > absolute folder path. Will mount the contents of the secret in the container at the specified folder path.
  title: Secret mounts
  type: array
  items:
    properties:
      name:
        $ref: '#/idName'
      path:
        $ref: '#/path'
    type: object
    required: [name, path]
s3Url:
  type: string
  description: An url to an AWS S3 bucket
shortcut:
  additionalProperties: false
  properties:
    title:
      type: string
      description: Title for the shortcut
    description:
      type: string
      description: A short description about the target of this shortcut.
    path:
      $ref: '#/path'
  required:
    - title
    - description
    - path
  type: object
size:
  description: Disk size. Valid units are E|P|T|G|Ti|Gi.
  pattern: '^([0-9]+\.)?[0-9]+(E|P|T|G||Ti|Gi)?$'
  type: string
svcPredeployed:
  description: Will map onto a predeployed k8s service.
  properties:
    serviceType:
      default: svcPredeployed
      enum:
        - svcPredeployed
      type: string
  title: Existing Kubernetes service
  type: object
url:
  pattern: ^https?:\/\/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&\/=]*)
  type: string
vaultToken:
  title: Token
  type: string
volumes:
  items:
    additionalProperties: false
    properties:
      configMap:
        properties:
          name:
            type: string
        type: object
      name:
        description: Name must match mount name.
        type: string
    type: object
  type: array
wordCharacterPattern:
  type: string
  pattern: ^[^\s]+$
  x-error: At least one non whitespace character
