idName: &idNameField
  type: string
  pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$

Team:
  properties:
    id:
      <<: *idNameField
      title: ID
      x-acl:
        admin:
          - read
        team:
          - read
    name:
      <<: *idNameField
      title: Name
      description: A team name
      example: some-team
      x-acl:
        admin:
          - create
          - read
        team:
          - read
    clusters:
      items:
        type: string
      minItems: 1
      title: Clusters
      type: array
      uniqueItems: true
      x-acl:
        team:
          - read
    oidc:
      properties:
        groupMapping:
          description: An OIDC group name/id granting access to this team
          title: Group mapping
          type: string
      title: OIDC
      type: object
    password:
      type: string
      writeOnly: true
    alerts:
      properties:
        email:
          properties:
            critical:
              description: Email addresses (comma separated) for critical events.
              title: Criticals
              type: string
            nonCritical:
              description: One or more email addresses (comma separated) for non-critical events.
              title: Non criticals
              type: string
          title: Email
          type: object
        msteams:
          properties:
            highPrio:
              description: The high prio web hook
              title: High prio webhook
              type: string
            lowPrio:
              description: The low prio web hook
              title: Low prio webhook
              type: string
          title: Microsoft Teams
          type: object
        receivers:
          items:
            enum:
              - slack
              - msteams
              - email
            type: string
          title: Receivers
          type: array
          uniqueItems: true
        slack:
          properties:
            channel:
              description: Slack channel for non-criticals. If none is given the global one is used, which defaults to 'mon-otomi'.
              title: Channel for non-criticals
              type: string
            channelCrit:
              description: Slack channel for critical alerts. If none is given the global one is used, which defaults to 'mon-otomi-crit'.
              title: Channel for criticals
              type: string
              format: email
            critical:
              title: Criticals
              type: string
              format: email
              description: Email addresses (comma separated) for critical events.
          type: object
      title: Alerting endpoints
      type: object
  required:
    - name
    - clusters
    - password
  type: object
  x-acl:
    admin:
      - delete-any
      - read-any
      - create-any
      - update-any
    team:
      - read-any
      - update
  x-externalDocsPath: docs/configuring-teams
