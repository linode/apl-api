TeamAuthz:
  type: object
  description: Authorization for a team that user is a member
  properties:
    deniedAttributes:
      type: object
      description: Attribute paths that are not allowed to be modified by a user
      additionalProperties:
        description: Schema name
        type: array
        items:
          type: string
  required:
    - deniedAttributes
SessionUser:
  # readOnly: true
  x-acl:
    platformAdmin:
      - create-any
      - read-any
      - update-any
      - delete-any
    teamAdmin:
      - create
      - read
      - update
      - delete
    teamMember:
      - read
  properties:
    name:
      type: string
      description: A user name
      # readOnly: true
    email:
      $ref: definitions.yaml#/email
    isPlatformAdmin:
      type: boolean
      default: false
      description: If the user is admin.
      # readOnly: true
    isTeamAdmin:
      type: boolean
      default: false
      description: If the user is admin.
      # readOnly: true
    authz:
      type: object
      additionalProperties:
        description: Team ID
        $ref: 'user.yaml#/TeamAuthz'
    teams:
      type: array
      default: []
      description: A list of teams the user belongs to.
      items:
        type: string
      # readOnly: true
      uniqueItems: true
    roles:
      type: array
      default: []
      description: A list of roles that the user has.
      items:
        type: string
      # readOnly: true
      uniqueItems: true
    sub:
      type: string
      description: A user subject.
  required:
    - authz
    - isPlatformAdmin
    - isTeamAdmin
    - name
    - email
    - teams
    - roles
  type: object

User:
  x-acl:
    platformAdmin:
      - create-any
      - read-any
      - update-any
      - delete-any
    teamAdmin:
      - read-any
      - update-any
    teamMember: []
  properties:
    id:
      type: string
    teamId:
      $ref: 'definitions.yaml#/idName'
    email:
      $ref: definitions.yaml#/email
      title: Email
      description: A unique email
    firstName:
      type: string
      title: First Name
      description: The first name of the user
    lastName:
      type: string
      title: Last Name
      description: The last name of the user
    isPlatformAdmin:
      type: boolean
      default: false
      description: If the user is platform admin.
    isTeamAdmin:
      type: boolean
      default: false
      description: If the user is team admin.
    teams:
      description: A list of teams the user belongs to.
      title: Teams
      type: array
      items:
        type: string
      uniqueItems: true
    initialPassword:
      type: string
      description: The initial password of the user
  required:
    - email
    - firstName
    - lastName
    - isPlatformAdmin
    - isTeamAdmin
  type: object
