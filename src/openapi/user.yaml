TeamAuthz:
  type: object
  description: Authorization for a team that user is a member
  properties:
    deniedAttributes:
      type: object
      description: Attribute paths that are not allowed to be modified by a user
      additionalProperties:
        description: Schema name
        type: array
        items:
          type: string
  required:
    - deniedAttributes
SessionUser:
  # readOnly: true
  x-acl:
    platformAdmin:
      - read
    teamAdmin:
      - read
    teamMember:
      - read
  properties:
    name:
      type: string
      description: A user name
      # readOnly: true
    email:
      $ref: definitions.yaml#/email
    isPlatformAdmin:
      type: boolean
      default: false
      description: Select to assign the user the platform-admin role.
      # readOnly: true
    isTeamAdmin:
      type: boolean
      default: false
      description: Select to assign the user the team-admin role.
      # readOnly: true
    authz:
      type: object
      additionalProperties:
        description: Team ID
        $ref: 'user.yaml#/TeamAuthz'
    teams:
      type: array
      default: []
      description: Select the team(s) to assign the user the team-member role.
      items:
        type: string
      # readOnly: true
      uniqueItems: true
    roles:
      type: array
      default: []
      description: A list of roles that the user has.
      items:
        type: string
      # readOnly: true
      uniqueItems: true
    sub:
      type: string
      description: A user subject.
  required:
    - authz
    - isPlatformAdmin
    - isTeamAdmin
    - name
    - email
    - teams
    - roles
  type: object

User:
  x-acl:
    platformAdmin:
      - create-any
      - read-any
      - update-any
      - delete-any
    teamAdmin:
      - read-any
      - update-any
    teamMember: []
  properties:
    id:
      type: string
    email:
      $ref: definitions.yaml#/email
      title: Email
      description: A unique email address.
    firstName:
      type: string
      title: First Name
      description: The first name of the user.
    lastName:
      type: string
      title: Last Name
      description: The last name of the user.
    isPlatformAdmin:
      type: boolean
      default: false
      description: Select to assign the user the platform-admin role.
    isTeamAdmin:
      type: boolean
      default: false
      description: Select to assign the user the team-admin role.
    teams:
      description: Select the team(s) to assign the user the team-member role.
      title: Teams
      type: array
      items:
        type: string
      uniqueItems: true
    initialPassword:
      type: string
      description: The initial password of the user
  required:
    - email
    - firstName
    - lastName
  type: object
