apiVersion: v1
kind: Pod
metadata:
  labels:
    app: tty-$SUB
    otomi: tty
  name: tty-$SUB
  namespace: team-admin
spec:
  serviceAccountName: tty-$SUB
  securityContext:
    runAsNonRoot: true
    seccompProfile:
      type: RuntimeDefault
    runAsUser: 1001
    runAsGroup: 1001
    fsGroup: 1001
  containers:
    - image: linode/apl-tty:1.2.5
      name: po
      resources:
        requests:
          memory: '128Mi'
          cpu: '250m'
        limits:
          memory: '256Mi'
          cpu: '500m'
      env:
        - name: NAMESPACE
          value: team-$TARGET_TEAM
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
            - ALL
---
