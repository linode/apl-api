apiVersion: v1
kind: Pod
metadata:
  labels:
    app: tty-$SUB
    otomi: tty
  name: tty-$SUB
  namespace: team-admin
spec:
  serviceAccountName: tty-$SUB
  securityContext:
    runAsUser: 1001
    runAsGroup: 1001
  volumes:
    - name: kconfig
      configMap:
        name: kconfig-team-$TARGET_TEAM
  containers:
    - image: linode/apl-tty:1.2.2
      name: po
      resources:
        requests:
          memory: '128Mi'
          cpu: '250m'
        limits:
          memory: '256Mi'
          cpu: '500m'
      volumeMounts:
        - name: kconfig
          mountPath: /etc/kconfig
      command:
        - bash
        - -c
        - bash /etc/kconfig/kconfig.sh && ttyd -w /home/user -W -p 8080 tmux new -A
---
